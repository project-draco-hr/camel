{
  Endpoint newOrder=endpoint("activemq:queue:newOrder");
  Predicate isWidget=xpath("/order/product = 'widget'");
  Endpoint widget=endpoint("activemq:queue:widget");
  Endpoint gadget=endpoint("activemq:queue:gadget");
  from(newOrder).choice().when(isWidget).to("log:widget").to(widget).otherwise().to("log:gadget").to(gadget);
}
