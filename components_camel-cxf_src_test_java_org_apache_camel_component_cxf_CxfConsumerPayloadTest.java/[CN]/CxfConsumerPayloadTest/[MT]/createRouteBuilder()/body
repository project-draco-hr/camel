{
  return new RouteBuilder(){
    public void configure(){
      from(SIMPLE_ENDPOINT_URI + "&dataFormat=PAYLOAD").to("log:info").process(new Processor(){
        @SuppressWarnings("unchecked") public void process(        final Exchange exchange) throws Exception {
          CxfPayload<SoapHeader> requestPayload=exchange.getIn().getBody(CxfPayload.class);
          List<Element> inElements=requestPayload.getBody();
          List<Element> outElements=new ArrayList<Element>();
          String request=exchange.getIn().getBody(String.class);
          XmlConverter converter=new XmlConverter();
          String documentString=ECHO_RESPONSE;
          if (inElements.get(0).getLocalName().equals("echoBoolean")) {
            documentString=ECHO_BOOLEAN_RESPONSE;
            assertEquals("Get a wrong request",ECHO_BOOLEAN_REQUEST,request);
          }
 else {
            assertEquals("Get a wrong request",ECHO_REQUEST,request);
          }
          Document outDocument=converter.toDOMDocument(documentString);
          outElements.add(outDocument.getDocumentElement());
          CxfPayload<SoapHeader> responsePayload=new CxfPayload<SoapHeader>(null,outElements);
          exchange.getOut().setBody(responsePayload);
        }
      }
);
    }
  }
;
}
