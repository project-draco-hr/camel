{
  if (producer instanceof ServicePoolAware) {
    pool.release(endpoint,producer);
  }
 else   if (!producer.isSingleton()) {
    producer.stop();
    if (producer instanceof ShutdownableService) {
      ShutdownableService.class.cast(producer).shutdown();
    }
  }
}
