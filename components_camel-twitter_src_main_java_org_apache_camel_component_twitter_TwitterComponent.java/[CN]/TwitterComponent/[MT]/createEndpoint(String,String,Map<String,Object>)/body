{
  TwitterConfiguration properties=new TwitterConfiguration();
  properties.setConsumerKey(consumerKey);
  properties.setConsumerSecret(consumerSecret);
  properties.setAccessToken(accessToken);
  properties.setAccessTokenSecret(accessTokenSecret);
  properties.setHttpProxyHost(httpProxyHost);
  properties.setHttpProxyUser(httpProxyUser);
  properties.setHttpProxyPassword(httpProxyPassword);
  if (httpProxyPort != null) {
    properties.setHttpProxyPort(httpProxyPort);
  }
  setProperties(properties,parameters);
  TwitterEndpoint endpoint;
switch (properties.getType()) {
case POLLING:
    endpoint=new TwitterEndpointPolling(uri,this,properties);
  break;
case EVENT:
endpoint=new TwitterEndpointEvent(uri,this,properties);
break;
default :
endpoint=new TwitterEndpointDirect(uri,this,properties);
break;
}
return endpoint;
}
