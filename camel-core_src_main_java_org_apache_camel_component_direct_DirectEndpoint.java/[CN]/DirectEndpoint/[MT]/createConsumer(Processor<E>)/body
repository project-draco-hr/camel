{
  DefaultConsumer<E> consumer=new DefaultConsumer<E>(this,processor){
    @Override public void start() throws Exception {
      if (!allowMutlipleConsumers && !consumers.isEmpty())       throw new IllegalStateException("Endpoint " + getEndpointUri() + " only allows 1 active consumer but you attempted to start a 2nd consumer.");
      consumers.add(this);
      super.start();
    }
    @Override public void stop() throws Exception {
      super.stop();
      consumers.remove(this);
    }
  }
;
  return consumer;
}
