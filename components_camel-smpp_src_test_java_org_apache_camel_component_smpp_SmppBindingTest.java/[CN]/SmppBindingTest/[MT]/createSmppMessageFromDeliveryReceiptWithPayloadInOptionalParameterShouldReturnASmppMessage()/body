{
  DeliverSm deliverSm=new DeliverSm();
  deliverSm.setSmscDeliveryReceipt();
  deliverSm.setOptionalParameters(new OctetString(OptionalParameter.Tag.MESSAGE_PAYLOAD,"id:2 sub:001 dlvrd:001 submit date:0908312310 done date:0908312311 stat:DELIVRD err:xxx Text:Hello SMPP world!"));
  try {
    SmppMessage smppMessage=binding.createSmppMessage(deliverSm);
    assertEquals("Hello SMPP world!",smppMessage.getBody());
    assertEquals(10,smppMessage.getHeaders().size());
    assertEquals("2",smppMessage.getHeader(SmppConstants.ID));
    assertEquals(1,smppMessage.getHeader(SmppConstants.DELIVERED));
    assertEquals("xxx",smppMessage.getHeader(SmppConstants.ERROR));
    assertEquals(1,smppMessage.getHeader(SmppConstants.SUBMITTED));
    assertEquals(DeliveryReceiptState.DELIVRD,smppMessage.getHeader(SmppConstants.FINAL_STATUS));
    assertEquals(SmppMessageType.DeliveryReceipt.toString(),smppMessage.getHeader(SmppConstants.MESSAGE_TYPE));
  }
 catch (  Exception e) {
    fail("Should not throw exception while creating smppMessage.");
  }
}
