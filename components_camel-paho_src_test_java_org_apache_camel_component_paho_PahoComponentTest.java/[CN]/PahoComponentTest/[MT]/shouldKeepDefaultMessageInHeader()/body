{
  final String msg="msg";
  mock.expectedBodiesReceived(msg);
  template.sendBody("direct:test",msg);
  mock.assertIsSatisfied();
  Exchange exchange=mock.getExchanges().get(0);
  MqttProperties mqttProperties=exchange.getIn().getHeader(PahoConstants.HEASER_MQTT_PROPERTIES,MqttProperties.class);
  String payload=new String((byte[])exchange.getIn().getBody(),"utf-8");
  assertEquals("queue",new String(mqttProperties.getTopic()));
  assertEquals(msg,new String(payload));
}
