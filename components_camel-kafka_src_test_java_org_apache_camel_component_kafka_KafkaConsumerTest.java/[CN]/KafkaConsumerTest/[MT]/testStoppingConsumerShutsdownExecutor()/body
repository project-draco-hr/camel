{
  when(endpoint.getZookeeperHost()).thenReturn("localhost");
  when(endpoint.getZookeeperPort()).thenReturn(2181);
  when(endpoint.getGroupId()).thenReturn("12345");
  KafkaConsumer consumer=new KafkaConsumer(endpoint,processor);
  ThreadPoolExecutor e=mock(ThreadPoolExecutor.class);
  consumer.executor=e;
  consumer.doStop();
  verify(e).shutdown();
}
