{
  if (blobName != null && payload != null) {
    Blob blob=blobStore.blobBuilder(blobName).build();
    ByteArrayOutputStream baos=new ByteArrayOutputStream();
    ObjectOutputStream oos=null;
    try {
      oos=new ObjectOutputStream(baos);
      oos.writeObject(payload);
      blob.setPayload(baos.toByteArray());
      blobStore.putBlob(container,blob);
    }
 catch (    IOException e) {
      LOG.error("Error while writing blob",e);
    }
 finally {
      if (oos != null) {
        try {
          oos.close();
        }
 catch (        IOException e) {
        }
      }
      if (baos != null) {
        try {
          baos.close();
        }
 catch (        IOException e) {
        }
      }
    }
  }
}
