{
  ApplicationContext applicationContext=new ClassPathXmlApplicationContext("org/apache/camel/spring/routingUsingCamelContextFactoryTest.xml");
  CamelContext context=(CamelContext)applicationContext.getBean("camel");
  assertNotNull("No context found!",context);
  MockEndpoint resultEndpoint=(MockEndpoint)resolveMandatoryEndpoint(context,"mock:result");
  resultEndpoint.expectedBodiesReceived(body);
  CamelClient<Exchange> client=new CamelClient<Exchange>(context);
  client.send("queue:start",new Processor<Exchange>(){
    public void process(    Exchange exchange){
      Message in=exchange.getIn();
      in.setHeader("name","James");
      in.setBody(body);
    }
  }
);
  resultEndpoint.assertIsSatisfied();
}
