{
  DefaultEndpoint<MyExchange> endpoint=new DefaultEndpoint<MyExchange>("foo",new DefaultComponent(){
    @Override protected Endpoint createEndpoint(    String uri,    String remaining,    Map parameters) throws Exception {
      return null;
    }
  }
){
    public Consumer createConsumer(    Processor processor) throws Exception {
      return null;
    }
    public Exchange createExchange(    ExchangePattern pattern){
      return new MyExchange(getCamelContext(),pattern);
    }
    public Producer<MyExchange> createProducer() throws Exception {
      return null;
    }
    public boolean isSingleton(){
      return false;
    }
  }
;
  DefaultProducer producer=new DefaultProducer(endpoint){
    public void process(    Exchange exchange) throws Exception {
      log.debug("Received: " + exchange);
    }
  }
;
  Exchange exchange=new DefaultExchange(context);
  producer.process(exchange);
  Class<?> type=endpoint.getExchangeType();
  assertEquals("exchange type",MyExchange.class,type);
  MyExchange actual=(MyExchange)endpoint.createExchange(exchange);
  assertNotNull(actual);
  assertTrue("Not same exchange",actual != exchange);
  MyExchange expected=new MyExchange(context,pattern);
  actual=(MyExchange)endpoint.createExchange(expected);
  assertSame("Should not copy an exchange when of the correct type",expected,actual);
}
