{
  MockEndpoint mock=getMockEndpoint("mock:result");
  mock.expectedMessageCount(1);
  mock.expectedBodiesReceived("Hello World");
  template.sendBodyAndHeader("file:target/directoryfilter/skipDir/","This is a file to be filtered",Exchange.FILE_NAME,"skipme.txt");
  template.sendBodyAndHeader("file:target/directoryfilter/skipDir2/","This is a file to be filtered",Exchange.FILE_NAME,"skipme.txt");
  template.sendBodyAndHeader("file:target/directoryfilter/okDir/","Hello World",Exchange.FILE_NAME,"hello.txt");
  mock.assertIsSatisfied();
  assertEquals(4,names.size());
  Collections.sort(names);
  assertEquals("okDir",names.get(0));
  assertTrue(names.get(0),names.get(1).equals("okDir/hello.txt") || names.get(1).equals("okDir\\hello.txt"));
  assertEquals("skipDir",names.get(2));
  assertEquals("skipDir2",names.get(3));
}
