{
  try {
    JAXBContext context=((ModelCamelContext)getCamelContext()).getModelJAXBContextFactory().newJAXBContext();
    Unmarshaller unmarshaller=context.createUnmarshaller();
    Object value=unmarshaller.unmarshal(new StringReader(xml));
    if (value instanceof RouteDefinition) {
      RouteDefinition routeDefinition=(RouteDefinition)value;
      ((ModelCamelContext)getCamelContext()).addRouteDefinitions(Collections.singletonList(routeDefinition));
      return Response.seeOther(new URI("/routes")).build();
    }
 else {
      error="Posted XML is not a route but is of type " + ObjectHelper.className(value);
    }
  }
 catch (  JAXBException e) {
    error="Failed to parse XML: " + e.getMessage();
  }
catch (  Exception e) {
    error="Failed to install route: " + e.getMessage();
  }
  return Response.ok(new Viewable("create",this)).build();
}
