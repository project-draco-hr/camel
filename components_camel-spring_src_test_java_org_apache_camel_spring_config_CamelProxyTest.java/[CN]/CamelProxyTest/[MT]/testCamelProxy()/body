{
  ApplicationContext ac=new ClassPathXmlApplicationContext("org/apache/camel/spring/config/CamelProxyTest.xml");
  MyProxySender sender=(MyProxySender)ac.getBean("myProxySender");
  String reply=sender.hello("World");
  assertEquals("Hello World",reply);
  MyProxySender anotherSender=(MyProxySender)ac.getBean("myAnotherProxySender");
  SpringCamelContext context=ac.getBeansOfType(SpringCamelContext.class).values().iterator().next();
  MockEndpoint result=TestSupport.resolveMandatoryEndpoint(context,"mock:result",MockEndpoint.class);
  result.expectedBodiesReceived("Hello my friends!");
  anotherSender.greeting("Hello my friends!");
  result.assertIsSatisfied();
  result.reset();
  MyProxySender myProxySenderWithCamelContextId=(MyProxySender)ac.getBean("myProxySenderWithCamelContextId");
  result.expectedBodiesReceived("Hello my friends again!");
  myProxySenderWithCamelContextId.greeting("Hello my friends again!");
  result.assertIsSatisfied();
}
