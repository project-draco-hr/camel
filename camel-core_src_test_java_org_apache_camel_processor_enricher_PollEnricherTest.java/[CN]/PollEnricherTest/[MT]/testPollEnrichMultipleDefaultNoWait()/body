{
  mock.expectedMessageCount(1);
  template.sendBody("seda:foo5","msg1");
  template.sendBody("seda:foo5","msg2");
  template.sendBody("seda:enricher-test-5","test");
  Thread.sleep(100);
  template.sendBody("seda:foo5","msg3");
  template.sendBody("seda:foo5","msg4");
  List<?> polledExchanges=mock.getExchanges().get(0).getIn().getBody(List.class);
  assertEquals(2,polledExchanges.size());
  mock.expectedHeaderReceived(Exchange.TO_ENDPOINT,"seda://foo5");
  mock.assertIsSatisfied(0);
}
