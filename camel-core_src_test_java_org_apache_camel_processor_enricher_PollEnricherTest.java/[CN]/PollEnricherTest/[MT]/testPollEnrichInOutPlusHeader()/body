{
  template.sendBody("seda:foo4","blah");
  Thread.sleep(250);
  Exchange exchange=template.request("direct:enricher-test-4",new Processor(){
    public void process(    Exchange exchange){
      exchange.getIn().setHeader("foo","bar");
      exchange.getIn().setBody("test");
    }
  }
);
  assertEquals("bar",exchange.getIn().getHeader("foo"));
  assertEquals("test:blah",exchange.getIn().getBody());
  assertFalse(exchange.hasOut() && exchange.getOut().isFault());
  assertEquals("seda://foo4",exchange.getOut().getHeader(Exchange.TO_ENDPOINT));
  assertNull(exchange.getException());
}
