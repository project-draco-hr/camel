{
  String host=config.getHost();
  int port=config.getPort();
  String username=config.getUsername();
  if (config.getFtpClientConfig() != null) {
    LOG.trace("Configuring FTPClient with config: " + config.getFtpClientConfig());
    client.configure(config.getFtpClientConfig());
  }
  LOG.trace("Connecting to " + config);
  client.connect(host,port);
  boolean login;
  if (username != null) {
    LOG.trace("Attempting to login user: " + username);
    login=client.login(username,config.getPassword());
  }
 else {
    LOG.trace("Attempting to login anonymous");
    login=client.login("anonymous",null);
  }
  if (LOG.isTraceEnabled()) {
    LOG.trace("User " + (username != null ? username : "anonymous") + " logged in: "+ login);
  }
  if (!login) {
    return false;
  }
  client.setFileType(config.isBinary() ? FTPClient.BINARY_FILE_TYPE : FTPClient.ASCII_FILE_TYPE);
  return true;
}
