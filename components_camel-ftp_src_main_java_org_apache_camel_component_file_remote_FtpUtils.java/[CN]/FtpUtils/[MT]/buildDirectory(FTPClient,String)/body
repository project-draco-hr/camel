{
  String originalDirectory=ftpClient.printWorkingDirectory();
  boolean success=false;
  try {
    success=ftpClient.changeWorkingDirectory(dirName);
    if (!success) {
      if (LOG.isTraceEnabled()) {
        LOG.trace("Trying to build remote directory: " + dirName);
      }
      success=ftpClient.makeDirectory(dirName);
      if (!success) {
        buildDirectoryChunks(ftpClient,dirName);
      }
    }
  }
  finally {
    ftpClient.changeWorkingDirectory(originalDirectory);
  }
  return success;
}
