{
  if (configuration.getCacheConfiguration() != null) {
    return configuration.getCacheConfiguration();
  }
  MutableConfiguration mutableConfiguration=new MutableConfiguration();
  if (configuration.getCacheLoaderFactory() != null) {
    mutableConfiguration.setCacheLoaderFactory(configuration.getCacheLoaderFactory());
  }
  if (configuration.getCacheWriterFactory() != null) {
    mutableConfiguration.setCacheWriterFactory(configuration.getCacheWriterFactory());
  }
  if (configuration.getExpiryPolicyFactory() != null) {
    mutableConfiguration.setExpiryPolicyFactory(configuration.getExpiryPolicyFactory());
  }
  mutableConfiguration.setManagementEnabled(configuration.isManagementEnabled());
  mutableConfiguration.setStatisticsEnabled(configuration.isStatisticsEnabled());
  mutableConfiguration.setReadThrough(configuration.isReadThrough());
  mutableConfiguration.setStoreByValue(configuration.isStoreByValue());
  mutableConfiguration.setWriteThrough(configuration.isWriteThrough());
  return mutableConfiguration;
}
