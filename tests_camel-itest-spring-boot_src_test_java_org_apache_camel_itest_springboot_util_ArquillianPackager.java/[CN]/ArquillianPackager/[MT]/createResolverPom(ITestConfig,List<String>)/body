{
  String pom;
  try (InputStream pomTemplate=ArquillianPackager.class.getResourceAsStream("/dependency-resolver-pom.xml")){
    pom=IOUtils.toString(pomTemplate);
  }
   StringBuilder dependencies=new StringBuilder();
  for (  String dep : cleanTestProvidedDependencies) {
    dependencies.append(dep);
    dependencies.append("\n");
  }
  pom=pom.replace("<!-- DEPENDENCIES -->",dependencies.toString());
  Map<String,String> resolvedProperties=new TreeMap<>();
  Pattern propPattern=Pattern.compile("(\\$\\{[^}]*\\})");
  Matcher m=propPattern.matcher(pom);
  while (m.find()) {
    String property=m.group();
    String resolved=DependencyResolver.resolveParentProperty(property);
    resolvedProperties.put(property,resolved);
  }
  for (  String property : resolvedProperties.keySet()) {
    pom=pom.replace(property,resolvedProperties.get(property));
  }
  File pomFile=new File(config.getModuleBasePath() + "/target/itest-spring-boot-dependency-resolver-pom.xml");
  try (FileWriter fw=new FileWriter(pomFile)){
    IOUtils.write(pom,fw);
  }
   return pomFile;
}
