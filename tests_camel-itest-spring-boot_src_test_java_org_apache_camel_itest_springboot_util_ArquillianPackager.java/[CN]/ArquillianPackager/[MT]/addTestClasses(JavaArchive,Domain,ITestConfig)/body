{
  File test=new File(config.getModuleBasePath() + "/target/test-classes/");
  File[] fs=test.listFiles();
  if (fs == null) {
    fs=new File[]{};
  }
  LinkedList<File> testFiles=new LinkedList<>(Arrays.asList(fs));
  while (!testFiles.isEmpty()) {
    File f=testFiles.pop();
    String relative=test.getCanonicalFile().toURI().relativize(f.getCanonicalFile().toURI()).getPath();
    if (f.isFile()) {
      if (f.getName().endsWith(".class")) {
        mainArk=mainArk.addAsResource(f,CLASSES_FOLDER + "/" + relative);
      }
    }
 else {
      mainArk=mainArk.addAsDirectory(CLASSES_FOLDER + "/" + relative);
      File[] files=f.listFiles();
      if (files == null) {
        files=new File[]{};
      }
      testFiles.addAll(Arrays.asList(files));
    }
  }
  return mainArk;
}
