{
  Unmarshaller unmarshaller=getContext().createUnmarshaller();
  if (schema != null) {
    SchemaFactory factory=getOrCreateSchemaFactory();
    try {
      Schema newSchema=factory.newSchema(getSources());
      unmarshaller.setSchema(newSchema);
      unmarshaller.setEventHandler(new ValidationEventHandler(){
        public boolean handleEvent(        ValidationEvent event){
          return event.getSeverity() == ValidationEvent.WARNING;
        }
      }
);
    }
  finally {
      returnSchemaFactory(factory);
    }
  }
  return unmarshaller;
}
