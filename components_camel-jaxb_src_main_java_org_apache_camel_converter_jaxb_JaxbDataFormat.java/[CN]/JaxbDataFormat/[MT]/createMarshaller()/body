{
  Marshaller marshaller=getContext().createMarshaller();
  if (schema != null) {
    Schema newSchema=SCHEMA_FACTORY.newSchema(getSources());
    marshaller.setSchema(newSchema);
    marshaller.setEventHandler(new ValidationEventHandler(){
      public boolean handleEvent(      ValidationEvent event){
        return event.getSeverity() == 0;
      }
    }
);
  }
  return marshaller;
}
