{
  DefaultMessageListenerContainer answer=new DefaultMessageListenerContainer();
  answer.setDestinationName("temporary");
  answer.setDestinationResolver(new DestinationResolver(){
    public Destination resolveDestinationName(    Session session,    String destinationName,    boolean pubSubDomain) throws JMSException {
      TemporaryQueue queue=session.createTemporaryQueue();
      setReplyTo(queue);
      return queue;
    }
  }
);
  answer.setAutoStartup(true);
  answer.setMessageListener(this);
  answer.setPubSubDomain(false);
  answer.setSubscriptionDurable(false);
  answer.setConcurrentConsumers(1);
  answer.setConnectionFactory(endpoint.getConnectionFactory());
  String clientId=endpoint.getClientId();
  if (clientId != null) {
    clientId+=".CamelReplyManager";
    answer.setClientId(clientId);
  }
  answer.setSessionTransacted(false);
  if (endpoint.getExceptionListener() != null) {
    answer.setExceptionListener(endpoint.getExceptionListener());
  }
  if (endpoint.getReceiveTimeout() >= 0) {
    answer.setReceiveTimeout(endpoint.getReceiveTimeout());
  }
  if (endpoint.getRecoveryInterval() >= 0) {
    answer.setRecoveryInterval(endpoint.getRecoveryInterval());
  }
  return answer;
}
