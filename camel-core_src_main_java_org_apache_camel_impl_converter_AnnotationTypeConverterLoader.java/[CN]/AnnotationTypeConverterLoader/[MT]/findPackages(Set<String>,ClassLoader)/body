{
  Enumeration<URL> resources=classLoader.getResources(META_INF_SERVICES);
  while (resources.hasMoreElements()) {
    URL url=resources.nextElement();
    if (url != null) {
      BufferedReader reader=new BufferedReader(new InputStreamReader(url.openStream()));
      try {
        while (true) {
          String line=reader.readLine();
          if (line == null) {
            break;
          }
          line=line.trim();
          if (line.startsWith("#") || line.length() == 0) {
            continue;
          }
          tokenize(packages,line);
        }
      }
  finally {
        try {
          reader.close();
        }
 catch (        IOException e) {
          LOG.warn("Caught exception closing stream: " + e,e);
        }
      }
    }
  }
}
