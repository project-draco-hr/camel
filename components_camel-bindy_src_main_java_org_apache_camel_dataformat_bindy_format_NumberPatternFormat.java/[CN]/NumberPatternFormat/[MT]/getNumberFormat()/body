{
  if (locale == null) {
    return null;
  }
  NumberFormat format=NumberFormat.getNumberInstance(locale);
  if (format instanceof DecimalFormat) {
    ((DecimalFormat)format).applyLocalizedPattern(pattern);
  }
  return format;
}
