{
  Message message=chat.createMessage();
  message.setTo(participant);
  message.setFrom(endpoint.getUser());
  message.setThread(exchange.getExchangeId());
  message.setType(Message.Type.NORMAL);
  endpoint.getBinding().populateXmppMessage(message,exchange);
  if (log.isDebugEnabled()) {
    log.debug(">>>> message: " + message.getBody());
  }
  try {
    chat.sendMessage(message);
  }
 catch (  XMPPException e) {
    throw new RuntimeXmppException(e);
  }
}
