{
  JettyHttpOperationFailedException exception;
  String uri=httpExchange.getUrl();
  Map<String,Object> headers=httpExchange.getHeaders();
  String body=httpExchange.getBody();
  if (responseCode >= 300 && responseCode < 400) {
    String locationHeader=httpExchange.getResponseFields().getStringField("location");
    if (locationHeader != null) {
      exception=new JettyHttpOperationFailedException(uri,responseCode,locationHeader,headers,body);
    }
 else {
      exception=new JettyHttpOperationFailedException(uri,responseCode,headers,body);
    }
  }
 else {
    exception=new JettyHttpOperationFailedException(uri,responseCode,headers,body);
  }
  return exception;
}
