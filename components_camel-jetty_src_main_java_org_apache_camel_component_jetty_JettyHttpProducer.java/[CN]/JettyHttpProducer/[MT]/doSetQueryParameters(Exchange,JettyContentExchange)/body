{
  String queryString=exchange.getIn().getHeader(Exchange.HTTP_QUERY,String.class);
  if (queryString == null) {
    queryString=getEndpoint().getHttpUri().getQuery();
  }
  if (ObjectHelper.isEmpty(queryString)) {
    return;
  }
  String uri=httpExchange.getURI();
  Map parameters=URISupport.parseParameters(new URI(uri));
  parameters.putAll(URISupport.parseQuery(queryString));
  if (uri.contains("?")) {
    uri=ObjectHelper.before(uri,"?");
  }
  if (!parameters.isEmpty()) {
    uri=uri + "?" + URISupport.createQueryString(parameters);
    httpExchange.setURI(uri);
  }
}
