{
  counter=1;
  getMockEndpoint("mock:result").expectedMessageCount(1);
  getMockEndpoint("mock:async").expectedMessageCount(1);
  template.sendBody("activemq:queue:foo","Hello World");
  assertMockEndpointsSatisfied();
  assertNotSame("Should use a different thread when doing async routing",thread1,thread2);
}
