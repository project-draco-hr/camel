{
  Exchange exchange=template.request("http://localhost:{{port}}/test",new Processor(){
    @Override public void process(    Exchange exchange) throws Exception {
    }
  }
);
  Message out=exchange.getOut();
  String len=out.getHeader(Exchange.CONTENT_LENGTH,String.class);
  assertEquals("We should have the content-length header here.","20",len);
  String response=out.getBody(String.class);
  assertEquals("Get a wrong response","This is hello world.",response);
}
