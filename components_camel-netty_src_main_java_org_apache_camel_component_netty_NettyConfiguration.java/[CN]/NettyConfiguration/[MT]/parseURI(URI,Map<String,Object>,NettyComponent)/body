{
  protocol=uri.getScheme();
  if ((!protocol.equalsIgnoreCase("tcp")) && (!protocol.equalsIgnoreCase("udp"))) {
    throw new IllegalArgumentException("Unrecognized Netty protocol: " + protocol + " for uri: "+ uri);
  }
  setHost(uri.getHost());
  setPort(uri.getPort());
  sslHandler=component.resolveAndRemoveReferenceParameter(parameters,"sslHandler",SslHandler.class,null);
  passphrase=component.resolveAndRemoveReferenceParameter(parameters,"passphrase",String.class,null);
  keyStoreFormat=component.getAndRemoveParameter(parameters,"keyStoreFormat",String.class,"JKS");
  securityProvider=component.getAndRemoveParameter(parameters,"securityProvider",String.class,"SunX509");
  keyStoreFile=component.resolveAndRemoveReferenceParameter(parameters,"keyStoreFile",File.class,null);
  trustStoreFile=component.resolveAndRemoveReferenceParameter(parameters,"trustStoreFile",File.class,null);
  clientPipelineFactory=component.resolveAndRemoveReferenceParameter(parameters,"clientPipelineFactory",ClientPipelineFactory.class,null);
  serverPipelineFactory=component.resolveAndRemoveReferenceParameter(parameters,"serverPipelineFactory",ServerPipelineFactory.class,null);
  List<ChannelHandler> referencedEncoders=component.resolveAndRemoveReferenceListParameter(parameters,"encoders",ChannelHandler.class,null);
  addToHandlersList(encoders,referencedEncoders,ChannelHandler.class);
  List<ChannelHandler> referencedDecoders=component.resolveAndRemoveReferenceListParameter(parameters,"decoders",ChannelHandler.class,null);
  addToHandlersList(decoders,referencedDecoders,ChannelHandler.class);
  EndpointHelper.setReferenceProperties(component.getCamelContext(),this,parameters);
  EndpointHelper.setProperties(component.getCamelContext(),this,parameters);
  if (encoders.isEmpty() && decoders.isEmpty()) {
    if (allowDefaultCodec) {
      if (isTextline()) {
        Charset charset=getEncoding() != null ? Charset.forName(getEncoding()) : CharsetUtil.UTF_8;
        encoders.add(ChannelHandlerFactories.newStringEncoder(charset));
        ChannelBuffer[] delimiters=delimiter == TextLineDelimiter.LINE ? Delimiters.lineDelimiter() : Delimiters.nulDelimiter();
        decoders.add(ChannelHandlerFactories.newDelimiterBasedFrameDecoder(decoderMaxLineLength,delimiters));
        decoders.add(ChannelHandlerFactories.newStringDecoder(charset));
        if (LOG.isDebugEnabled()) {
          LOG.debug("Using textline encoders and decoders with charset: {}, delimiter: {} and decoderMaxLineLength: {}",new Object[]{charset,delimiter,decoderMaxLineLength});
        }
      }
 else {
        encoders.add(ChannelHandlerFactories.newObjectEncoder());
        decoders.add(ChannelHandlerFactories.newObjectDecoder());
        LOG.debug("Using object encoders and decoders");
      }
    }
 else {
      LOG.debug("No encoders and decoders will be used");
    }
  }
 else {
    LOG.debug("Using configured encoders and/or decoders");
  }
}
