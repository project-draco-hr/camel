{
  if (request instanceof SoapMessage) {
    SoapMessage soapMessage=(SoapMessage)request;
    SoapHeader soapHeader=soapMessage.getSoapHeader();
    if (soapHeader != null) {
      headers.put(SpringWebserviceConstants.SPRING_WS_SOAP_HEADER,soapHeader.getSource());
      Iterator<QName> attIter=soapHeader.getAllAttributes();
      while (attIter.hasNext()) {
        QName name=attIter.next();
        headers.put(name.getLocalPart(),soapHeader.getAttributeValue(name));
      }
      Iterator<SoapHeaderElement> elementIter=soapHeader.examineAllHeaderElements();
      while (elementIter.hasNext()) {
        SoapHeaderElement element=elementIter.next();
        QName name=element.getName();
        headers.put(name.getLocalPart(),element);
      }
    }
  }
}
