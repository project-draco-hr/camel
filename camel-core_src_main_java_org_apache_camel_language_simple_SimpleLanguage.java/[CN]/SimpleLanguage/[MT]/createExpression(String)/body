{
  ObjectHelper.notNull(expression,"expression");
  expression=expression.trim();
  @SuppressWarnings("deprecation") Expression answer=SimpleBackwardsCompatibleParser.parseExpression(expression,allowEscape);
  if (answer == null) {
    SimpleExpressionParser parser=new SimpleExpressionParser(expression,allowEscape);
    answer=parser.parseExpression();
  }
  if (resultType != null) {
    answer=ExpressionBuilder.convertToExpression(answer,resultType);
  }
  return answer;
}
