{
  result.expectedMessageCount(1);
  Thread tmpThread=new Thread(){
    public void run(){
      try {
        ServerSocket tmpSocket=new ServerSocket(mllpClient.getMllpPort());
        Thread.sleep(15000);
        tmpSocket.close();
      }
 catch (      Exception ex) {
        throw new RuntimeException("Exception caught in dummy listener",ex);
      }
    }
  }
;
  tmpThread.start();
  context.start();
  mllpClient.connect();
  mllpClient.sendMessageAndWaitForAcknowledgement(generateMessage(),10000);
  assertMockEndpointsSatisfied(10,TimeUnit.SECONDS);
}
