{
  setUpComponent();
  component.setLazyCreateEngines(false);
  settings.setString(sessionID,SessionFactory.SETTING_CONNECTION_TYPE,SessionFactory.INITIATOR_CONNECTION_TYPE);
  settings.setLong(sessionID,Initiator.SETTING_SOCKET_CONNECT_PORT,1234);
  writeSettings();
  camelContext.start();
  QuickfixjEndpoint e1=(QuickfixjEndpoint)component.createEndpoint(getEndpointUri(settingsFile.getName(),null) + "?lazyCreateEngine=true");
  assertThat(component.getEngines().get(settingsFile.getName()).isInitialized(),is(false));
  assertThat(component.getEngines().get(settingsFile.getName()).isStarted(),is(false));
  assertThat(component.getEngines().get(settingsFile.getName()).isLazy(),is(true));
  e1.ensureInitialized();
  assertThat(component.getEngines().get(settingsFile.getName()).isInitialized(),is(true));
  assertThat(component.getEngines().get(settingsFile.getName()).isStarted(),is(true));
  writeSettings(settings,false);
  component.createEndpoint(getEndpointUri(settingsFile2.getName(),sessionID));
  assertThat(component.getEngines().get(settingsFile2.getName()).isInitialized(),is(true));
  assertThat(component.getEngines().get(settingsFile2.getName()).isStarted(),is(true));
  assertThat(component.getEngines().get(settingsFile2.getName()).isLazy(),is(false));
}
