{
  if (source.getInputStream() != null) {
    CachedOutputStream cos=new CachedOutputStream(exchange);
    IOHelper.copyAndCloseInput(source.getInputStream(),cos);
    streamCache=cos.getStreamCache();
    readCache=null;
    setSystemId(source.getSystemId());
    stream=(InputStream)streamCache;
  }
 else   if (source.getReader() != null) {
    String data=exchange.getContext().getTypeConverter().convertTo(String.class,source.getReader());
    readCache=new ReaderCache(data);
    streamCache=null;
    setReader(readCache);
    stream=new ByteArrayInputStream(data.getBytes());
  }
 else {
    streamCache=null;
    readCache=null;
    stream=null;
  }
}
