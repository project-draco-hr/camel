{
  context.addRoutes(new RouteBuilder(){
    @Override public void configure() throws Exception {
      from("direct:start").resequence(header("id")).to("mock:result");
    }
  }
);
  context.start();
  MockEndpoint mock=getMockEndpoint("mock:result");
  mock.expectedBodiesReceived("A","C","E","F");
  template.sendBodyAndHeader("direct:start","A","id","1");
  template.sendBodyAndHeader("direct:start","C","id","2");
  template.sendBodyAndHeader("direct:start","D","id","2");
  template.sendBodyAndHeader("direct:start","F","id","4");
  template.sendBodyAndHeader("direct:start","B","id","1");
  template.sendBodyAndHeader("direct:start","E","id","3");
  assertMockEndpointsSatisfied();
}
