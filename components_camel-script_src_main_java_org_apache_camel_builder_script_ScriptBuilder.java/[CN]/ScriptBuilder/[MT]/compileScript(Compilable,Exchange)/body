{
  Reader reader=null;
  try {
    if (scriptText != null) {
      compiledScript=compilable.compile(scriptText);
    }
 else     if (scriptResource != null) {
      reader=createScriptReader(exchange);
      compiledScript=compilable.compile(reader);
    }
  }
 catch (  ScriptException e) {
    if (LOG.isDebugEnabled()) {
      LOG.debug("Script compile failed: " + e.getMessage(),e);
    }
    throw createScriptCompileException(e);
  }
catch (  IOException e) {
    throw createScriptCompileException(e);
  }
 finally {
    IOHelper.close(reader);
  }
}
