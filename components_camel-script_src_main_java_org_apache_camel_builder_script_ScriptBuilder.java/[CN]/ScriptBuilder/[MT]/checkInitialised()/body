{
  if (scriptText == null && scriptResource == null) {
    throw new IllegalArgumentException("Neither scriptText or scriptResource are specified");
  }
  if (engine == null) {
    engine=createScriptEngine();
  }
  if (compiledScript == null) {
    if (engine instanceof Compilable) {
      compileScript((Compilable)engine);
    }
  }
}
