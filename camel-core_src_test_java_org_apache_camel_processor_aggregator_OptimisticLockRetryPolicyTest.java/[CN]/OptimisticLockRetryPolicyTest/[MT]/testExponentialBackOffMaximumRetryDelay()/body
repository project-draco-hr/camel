{
  OptimisticLockRetryPolicy policy=new OptimisticLockRetryPolicy();
  policy.setRandomBackOff(false);
  policy.setExponentialBackOff(true);
  policy.setMaximumRetryDelay(200L);
  policy.setRetryDelay(50L);
  for (int i=0; i < 10; i++) {
    long start=System.currentTimeMillis();
    policy.doDelay(i);
    long elapsed=System.currentTimeMillis() - start;
switch (i) {
case 0:
      assertTrue(elapsed <= 50 + precision);
    assertTrue(elapsed >= 50 - precision);
  break;
case 1:
assertTrue(elapsed <= 100 + precision);
assertTrue(elapsed >= 100 - precision);
break;
default :
assertTrue(elapsed <= 200 + precision);
assertTrue(elapsed >= 200 - precision);
break;
}
}
}
