{
  System.out.println("Notice this client requires that the CamelServer is already running!");
  ApplicationContext context=new ClassPathXmlApplicationContext("META-INF/camel-client.xml");
  final ProducerTemplate producer=(ProducerTemplate)context.getBean("camelTemplate");
  final MockEndpoint mock=(MockEndpoint)context.getBean("result");
  mock.expectedMessageCount(SIZE);
  mock.expectsNoDuplicates().body();
  System.out.println("Sending ...");
  for (int i=0; i < SIZE; i++) {
    InputReportIncident input=new InputReportIncident();
    input.setIncidentId("" + i);
    input.setIncidentDate("20091116");
    input.setGivenName("Claus");
    input.setFamilyName("Ibsen");
    input.setSummary("Camel rocks");
    input.setDetails("More bla");
    input.setEmail("davsclaus@apache.org");
    input.setPhone("55512345678");
    producer.sendBody("direct:start",input);
  }
  System.out.println("... Send done");
  System.out.println("Asserting ...");
  mock.assertIsSatisfied();
  System.out.println("... Asserting done");
  System.exit(0);
}
