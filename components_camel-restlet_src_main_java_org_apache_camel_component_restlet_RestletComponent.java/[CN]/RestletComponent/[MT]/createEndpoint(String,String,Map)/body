{
  RestletBinding restletBinding=null;
  String ref=getAndRemoveParameter(parameters,"restletBindingRef",String.class);
  if (ref != null) {
    restletBinding=CamelContextHelper.mandatoryLookup(getCamelContext(),ref,RestletBinding.class);
  }
  if (restletBinding == null) {
    restletBinding=new DefaultRestletBinding();
  }
  if (restletBinding instanceof HeaderFilterStrategyAware) {
    ((HeaderFilterStrategyAware)restletBinding).setHeaderFilterStrategy(headerFilterStrategy);
  }
  Map<String,String> realm=null;
  ref=getAndRemoveParameter(parameters,"restletRealmRef",String.class);
  if (ref != null) {
    realm=CamelContextHelper.mandatoryLookup(getCamelContext(),ref,Map.class);
  }
  Method method=getAndRemoveParameter(parameters,"restletMethod",Method.class);
  RestletEndpoint result=new RestletEndpoint(this,remaining,parameters,restletBinding);
  if (method != null) {
    result.setRestletMethod(method);
  }
  if (realm != null) {
    result.setRealm(realm);
  }
  return result;
}
