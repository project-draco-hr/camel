{
  path=FileUtil.stripLeadingSeparator(path);
  String scheme="http";
  String host="0.0.0.0";
  int port=0;
  RestConfiguration config=getCamelContext().getRestConfiguration();
  if (config != null && (config.getComponent() == null || config.getComponent().equals("restlet"))) {
    if (config.getScheme() != null) {
      scheme=config.getScheme();
    }
    if (config.getHost() != null) {
      host=config.getHost();
    }
    int num=config.getPort();
    if (num > 0) {
      port=num;
    }
  }
  String url=String.format("restlet:%s://%s:%s/%s?restletMethod=%s",scheme,host,port,path,verb);
  RestletEndpoint endpoint=camelContext.getEndpoint(url,RestletEndpoint.class);
  setProperties(endpoint,parameters);
  return endpoint.createConsumer(processor);
}
