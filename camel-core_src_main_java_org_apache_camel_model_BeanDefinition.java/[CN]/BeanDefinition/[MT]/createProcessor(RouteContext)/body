{
  BeanProcessor answer;
  if (ObjectHelper.isNotEmpty(ref)) {
    answer=new BeanProcessor(new RegistryBean(routeContext.getCamelContext(),ref));
  }
 else {
    if (bean == null) {
      ObjectHelper.notNull(beanType,"bean, ref or beanType",this);
      bean=CamelContextHelper.newInstance(routeContext.getCamelContext(),beanType);
    }
    answer=new BeanProcessor(bean,routeContext.getCamelContext());
  }
  if (method != null) {
    answer.setMethod(method);
  }
  return answer;
}
