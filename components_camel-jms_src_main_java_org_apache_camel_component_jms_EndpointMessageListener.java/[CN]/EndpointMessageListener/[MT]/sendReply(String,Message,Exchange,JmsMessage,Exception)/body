{
  if (replyDestination == null) {
    if (LOG.isDebugEnabled()) {
      LOG.debug("Cannot send reply message as there is no replyDestination for: " + out);
    }
    return;
  }
  getTemplate().send(replyDestination,new MessageCreator(){
    public Message createMessage(    Session session) throws JMSException {
      Message reply=endpoint.getBinding().makeJmsMessage(exchange,out,session,cause);
      if (endpoint.getConfiguration().isUseMessageIDAsCorrelationID()) {
        String messageID=exchange.getIn().getHeader("JMSMessageID",String.class);
        reply.setJMSCorrelationID(messageID);
      }
 else {
        String correlationID=message.getJMSCorrelationID();
        if (correlationID != null) {
          reply.setJMSCorrelationID(correlationID);
        }
      }
      if (LOG.isDebugEnabled()) {
        LOG.debug(endpoint + " sending reply JMS message: " + reply);
      }
      return reply;
    }
  }
);
}
