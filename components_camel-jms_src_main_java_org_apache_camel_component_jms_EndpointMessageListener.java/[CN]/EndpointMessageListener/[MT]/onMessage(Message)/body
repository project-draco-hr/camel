{
  RuntimeCamelException rce=null;
  try {
    if (LOG.isDebugEnabled()) {
      LOG.debug(endpoint + " consumer receiving JMS message: " + message);
    }
    Destination replyDestination=getReplyToDestination(message);
    final JmsExchange exchange=createExchange(message,replyDestination);
    if (eagerLoadingOfProperties) {
      exchange.getIn().getHeaders();
    }
    processor.process(exchange);
    JmsMessage body=null;
    if (exchange.isFailed()) {
      if (exchange.getException() != null) {
        rce=wrapRuntimeCamelException(exchange.getException());
      }
 else       if (exchange.getFault().getBody() != null) {
        body=exchange.getFault();
      }
    }
 else {
      body=exchange.getOut(false);
    }
    if (rce == null && body != null && !disableReplyTo) {
      sendReply(replyDestination,message,exchange,body);
    }
  }
 catch (  Exception e) {
    rce=wrapRuntimeCamelException(e);
  }
  if (rce != null) {
    LOG.warn(endpoint + " consumer caught an exception while processing JMS message: " + message,rce);
    throw rce;
  }
}
