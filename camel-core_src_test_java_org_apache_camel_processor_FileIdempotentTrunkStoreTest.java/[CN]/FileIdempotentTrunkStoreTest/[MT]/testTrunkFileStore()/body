{
  resultEndpoint.expectedBodiesReceived("A","B","C","D","E");
  sendMessage("AAAAAAAAAA","A");
  sendMessage("BBBBBBBBBB","B");
  sendMessage("CCCCCCCCCC","C");
  sendMessage("AAAAAAAAAA","A");
  sendMessage("DDDDDDDDDD","D");
  sendMessage("BBBBBBBBBB","B");
  sendMessage("EEEEEEEEEE","E");
  resultEndpoint.assertIsSatisfied();
  resultEndpoint.reset();
  resultEndpoint.expectedBodiesReceived("Z","X");
  sendMessage("ZZZZZZZZZZ","Z");
  IdempotentRepository<String> repo2=FileIdempotentRepository.fileIdempotentRepository(store);
  repo2.start();
  int size=0;
  if (repo2.contains("AAAAAAAAAA")) {
    size++;
  }
  if (repo2.contains("BBBBBBBBBB")) {
    size++;
  }
  if (repo2.contains("CCCCCCCCCC")) {
    size++;
  }
  if (repo2.contains("DDDDDDDDDD")) {
    size++;
  }
  if (repo2.contains("EEEEEEEEEE")) {
    size++;
  }
  if (repo2.contains("ZZZZZZZZZZ")) {
    size++;
  }
  assertEquals(5,size);
  sendMessage("XXXXXXXXXX","X");
  resultEndpoint.assertIsSatisfied();
  assertTrue(repo.contains("XXXXXXXXXX"));
}
