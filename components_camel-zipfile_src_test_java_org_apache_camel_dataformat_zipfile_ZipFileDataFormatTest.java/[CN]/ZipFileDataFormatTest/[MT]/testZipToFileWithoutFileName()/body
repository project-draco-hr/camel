{
  String[] files=TEST_DIR.list();
  assertTrue(files == null || files.length == 0);
  MockEndpoint mock=getMockEndpoint("mock:intercepted");
  mock.expectedMessageCount(1);
  template.sendBody("direct:zipToFile",TEXT);
  assertMockEndpointsSatisfied();
  Exchange exchange=mock.getReceivedExchanges().get(0);
  File file=new File(TEST_DIR,exchange.getIn().getMessageId() + ".zip");
  assertTrue(file.exists());
  assertTrue(ObjectHelper.equalByteArray(getZippedText(exchange.getIn().getMessageId()),getBytes(file)));
}
