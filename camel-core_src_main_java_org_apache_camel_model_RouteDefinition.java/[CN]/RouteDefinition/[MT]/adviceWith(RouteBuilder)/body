{
  CamelContext context=getCamelContext();
  if (context == null) {
    throw new IllegalArgumentException("CamelContext has not been injected!");
  }
  RoutesDefinition routes=builder.configureRoutes(context);
  if (!routes.getRoutes().isEmpty()) {
    throw new IllegalArgumentException("You can only advice from a RouteBuilder which has no existing routes." + " Remove all routes from the route builder.");
  }
  List<RouteDefinition> list=new ArrayList<RouteDefinition>();
  list.add(this);
  context.removeRouteDefinitions(list);
  RouteDefinition merged=routes.route(this);
  context.getRouteDefinitions().add(0,merged);
  context.startRoute(merged);
  return merged;
}
