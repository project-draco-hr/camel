{
  ObjectHelper.notNull(camelContext,"CamelContext");
  ObjectHelper.notNull(builder,"RouteBuilder");
  RoutesDefinition routes=builder.configureRoutes(camelContext);
  if (!routes.getRoutes().isEmpty()) {
    throw new IllegalArgumentException("You can only advice from a RouteBuilder which has no existing routes." + " Remove all routes from the route builder.");
  }
  camelContext.removeRouteDefinition(this);
  RouteDefinition merged=routes.route(this);
  camelContext.getRouteDefinitions().add(0,merged);
  camelContext.startRoute(merged);
  return merged;
}
