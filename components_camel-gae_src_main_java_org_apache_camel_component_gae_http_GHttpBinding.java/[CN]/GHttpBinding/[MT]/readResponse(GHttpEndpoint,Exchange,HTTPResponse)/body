{
  int responseCode=response.getResponseCode();
  readResponseHeaders(endpoint,exchange,response);
  readResponseBody(endpoint,exchange,response);
  if (responseCode >= 400 && endpoint.isThrowExceptionOnFailure()) {
    throw new GHttpException(responseCode,exchange.getOut().getBody(InputStream.class),exchange.getOut().getHeaders());
  }
  return exchange;
}
