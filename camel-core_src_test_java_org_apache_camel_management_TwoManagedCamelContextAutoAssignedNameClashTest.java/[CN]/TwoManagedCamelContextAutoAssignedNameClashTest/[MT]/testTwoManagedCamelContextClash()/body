{
  camel1=createCamelContext();
  camel1.start();
  assertTrue("Should be started",camel1.getStatus().isStarted());
  MBeanServer mbeanServer=camel1.getManagementStrategy().getManagementAgent().getMBeanServer();
  ObjectName on=ObjectName.getInstance("org.apache.camel:context=localhost/camel-1,type=context,name=\"camel-1\"");
  assertTrue("Should be registered",mbeanServer.isRegistered(on));
  DefaultCamelContextNameStrategy.setCounter(0);
  camel2=createCamelContext();
  camel2.start();
  ObjectName on2=ObjectName.getInstance("org.apache.camel:context=localhost/camel-2,type=context,name=\"camel-2\"");
  assertTrue("Should be registered",mbeanServer.isRegistered(on2));
  assertTrue("Should still be registered after name clash",mbeanServer.isRegistered(on));
  assertTrue("Should still be registered after name clash",mbeanServer.isRegistered(on2));
}
