{
  new Expectations(){
{
      parser.getLine();
      result=new String[]{"1"};
      parser.getLine();
      result=new String[]{"2"};
      parser.getLine();
      result=null;
      reader.close();
    }
  }
;
  CsvIterator iterator=new CsvIterator(parser,reader);
  Assert.assertTrue(iterator.hasNext());
  Assert.assertEquals(Arrays.asList("1"),iterator.next());
  Assert.assertTrue(iterator.hasNext());
  Assert.assertEquals(Arrays.asList("2"),iterator.next());
  Assert.assertFalse(iterator.hasNext());
  try {
    iterator.next();
    Assert.fail("exception expected");
  }
 catch (  NoSuchElementException e) {
  }
  iterator.close();
}
