{
  final ExchangePattern expectedPattern=ExchangePattern.InOut;
  template.send("direct:start",expectedPattern,new Processor(){
    public void process(    Exchange exchange) throws Exception {
      assertEquals("MEP",expectedPattern,exchange.getPattern());
      exchange.getIn().setBody("<hello>world!</hello>");
    }
  }
);
  resultEndpoint.assertIsSatisfied();
  assertReceivedExpectedPattern(expectedPattern);
}
