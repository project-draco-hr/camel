{
  CircularBuffer buffer=new CircularBuffer(payload.length * 2);
  buffer.write(payload,0,payload.length);
  byte[] data=new byte[payload.length >> 1];
  assertEquals(data.length,buffer.read(data,0,data.length));
  assertEquals(data.length,buffer.read(data,0,data.length));
  assertEquals(0,buffer.read(data,0,data.length));
}
