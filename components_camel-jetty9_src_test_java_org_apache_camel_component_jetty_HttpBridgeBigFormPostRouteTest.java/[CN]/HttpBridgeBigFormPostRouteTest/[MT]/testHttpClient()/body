{
  MockEndpoint mock=getMockEndpoint("mock:input");
  mock.expectedMessageCount(1);
  List<NameValuePair> nvps=new ArrayList<NameValuePair>();
  nvps.add(new BasicNameValuePair("param1",LARGE_HEADER_VALUE));
  nvps.add(new BasicNameValuePair("param2",LARGE_HEADER_VALUE));
  nvps.add(new BasicNameValuePair("param3",LARGE_HEADER_VALUE));
  HttpEntity entity=new UrlEncodedFormEntity(nvps,Consts.UTF_8);
  HttpPost httpPost=new HttpPost("http://localhost:" + port2 + "/test/hello");
  httpPost.setEntity(entity);
  CloseableHttpClient httpClient=HttpClients.createDefault();
  try {
    CloseableHttpResponse response=httpClient.execute(httpPost);
    assertEquals(response.getStatusLine().getStatusCode(),200);
    response.close();
  }
  finally {
    httpClient.close();
  }
  mock.assertIsSatisfied();
}
