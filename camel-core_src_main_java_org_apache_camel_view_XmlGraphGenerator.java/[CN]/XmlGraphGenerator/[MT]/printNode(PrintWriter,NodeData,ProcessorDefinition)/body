{
  if (node instanceof MulticastDefinition) {
    List<ProcessorDefinition> outputs=node.getOutputs();
    for (    ProcessorDefinition output : outputs) {
      printNode(writer,fromData,output);
    }
    return fromData;
  }
  NodeData toData=getNodeData(node);
  printNode(writer,toData);
  if (fromData != null) {
    writer.print("<Edge fromID=\"");
    writer.print(encode(fromData.id));
    writer.print("\" toID=\"");
    writer.print(encode(toData.id));
    String association=toData.edgeLabel;
    if (isEmpty(association)) {
      writer.print("\" association=\"");
      writer.print(encode(association));
    }
    writer.println("\"/>");
  }
  List<ProcessorDefinition> outputs=toData.outputs;
  if (outputs != null) {
    for (    ProcessorDefinition output : outputs) {
      NodeData newData=printNode(writer,toData,output);
      if (!isMulticastNode(node)) {
        toData=newData;
      }
    }
  }
  return toData;
}
