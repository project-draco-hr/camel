{
  if (!canTest()) {
    return;
  }
  String preferredAuthentications="password,publickey";
  String uri="sftp://localhost:" + getPort() + "/"+ FTP_ROOT_DIR+ "?username=admin&password=admin&ciphers=blowfish-cbc"+ "&preferredAuthentications=password,publickey";
  template.sendBodyAndHeader(uri,"Hello World",Exchange.FILE_NAME,"hello.txt");
  File file=new File(FTP_ROOT_DIR + "/hello.txt");
  assertTrue("File should exist: " + file,file.exists());
  assertEquals("Hello World",context.getTypeConverter().convertTo(String.class,file));
  SftpEndpoint endpoint=context.getEndpoint(uri,SftpEndpoint.class);
  assertEquals(preferredAuthentications,endpoint.getConfiguration().getPreferredAuthentications());
}
