{
  getMockEndpoint("mock:foo").expectedBodiesReceived("Hello World");
  getMockEndpoint("mock:result").expectedBodiesReceived("Bye World");
  Exchange out=template.send("direct:start",new Processor(){
    public void process(    Exchange exchange) throws Exception {
      exchange.setPattern(ExchangePattern.InOnly);
      exchange.getIn().setBody("Hello");
    }
  }
);
  route+="A";
  assertIsInstanceOf(Exchange.class,out);
  Future future=out.getOut().getBody(Future.class);
  assertMockEndpointsSatisfied();
  future.get(1,TimeUnit.SECONDS);
  assertTrue("Should be done",future.isDone());
  assertEquals("AB",route);
}
