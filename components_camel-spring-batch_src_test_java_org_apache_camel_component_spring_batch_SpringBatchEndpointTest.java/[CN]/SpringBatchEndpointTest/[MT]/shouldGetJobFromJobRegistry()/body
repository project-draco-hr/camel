{
  Job mockJobFromJobRegistry=mock(Job.class);
  when(jobRegistry.getJob(eq("mockJobFromJobRegistry"))).thenReturn(mockJobFromJobRegistry);
  context().addRoutes(new RouteBuilder(){
    @Override public void configure() throws Exception {
      from("direct:jobRegistryTest").to("spring-batch:mockJobFromJobRegistry?jobRegistry=#jobRegistry");
    }
  }
);
  SpringBatchEndpoint batchEndpoint=context().getEndpoint("spring-batch:mockJobFromJobRegistry?jobRegistry=#jobRegistry",SpringBatchEndpoint.class);
  Job batchEndpointJob=(Job)FieldUtils.readField(batchEndpoint,"job",true);
  assertSame(mockJobFromJobRegistry,batchEndpointJob);
}
