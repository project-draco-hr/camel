{
  endpoint.setTopic("sometopic");
  Mockito.when(exchange.getIn()).thenReturn(in);
  in.setHeader(KafkaConstants.PARTITION_KEY,"4");
  in.setHeader(KafkaConstants.TOPIC,"anotherTopic");
  producer.process(exchange);
  ArgumentCaptor<KeyedMessage> captor=ArgumentCaptor.forClass(KeyedMessage.class);
  Mockito.verify(producer.producer).send(captor.capture());
  assertEquals("4",captor.getValue().key());
  assertEquals("anotherTopic",captor.getValue().topic());
}
