{
  endpoint.getConfiguration().setTopic("someTopic");
  endpoint.setBridgeEndpoint(true);
  Mockito.when(exchange.getIn()).thenReturn(in);
  Mockito.when(exchange.getOut()).thenReturn(out);
  in.setHeader(KafkaConstants.TOPIC,"anotherTopic");
  in.setHeader(KafkaConstants.KEY,"someKey");
  in.setHeader(KafkaConstants.PARTITION_KEY,"4");
  producer.process(exchange);
  verifySendMessage("4","someTopic","someKey");
  assertRecordMetadataExists();
}
