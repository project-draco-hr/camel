{
  if (this.version == -1) {
    if (version != VERSION_V1 && version != VERSION_V2) {
      throw new RuntimeException("Unsupported frame version=" + version);
    }
    LOG.debug("Lumberjack protocol version is {}",(char)version);
    this.version=version;
  }
 else   if (this.version != version) {
    throw new IllegalStateException("Protocol version changed during session from " + this.version + " to "+ version);
  }
}
