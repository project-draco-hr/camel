{
  client.getHostConfiguration().setProxy(host,port);
  if (username != null && password != null) {
    Credentials defaultcreds;
    if (domain != null) {
      defaultcreds=new NTCredentials(username,password,ntHost,domain);
    }
 else {
      defaultcreds=new UsernamePasswordCredentials(username,password);
    }
    client.getState().setProxyCredentials(AuthScope.ANY,defaultcreds);
  }
}
