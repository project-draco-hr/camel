{
  boolean existing=this == getEndpoint().getConsumer();
  if (!existing && getEndpoint().hasConsumer(this)) {
    throw new IllegalArgumentException("Cannot add a 2nd consumer to the same endpoint. Endpoint " + getEndpoint() + " only allows one consumer.");
  }
  if (!existing) {
    getEndpoint().addConsumer(this);
  }
  if (!isStartedInnerContext()) {
    doStartInnerContext();
  }
}
