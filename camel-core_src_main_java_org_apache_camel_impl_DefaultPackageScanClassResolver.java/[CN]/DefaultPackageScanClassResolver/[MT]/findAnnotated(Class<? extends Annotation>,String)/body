{
  if (packageNames == null) {
    return Collections.EMPTY_SET;
  }
  if (log.isDebugEnabled()) {
    log.debug("Searching for annotations of " + annotation.getName() + " in packages: "+ Arrays.asList(packageNames));
  }
  PackageScanFilter test=getCompositeFilter(new AnnotatedWithPackageScanFilter(annotation,true));
  Set<Class> classes=new LinkedHashSet<Class>();
  for (  String pkg : packageNames) {
    find(test,pkg,classes);
  }
  if (log.isDebugEnabled()) {
    log.debug("Found: " + classes);
  }
  return classes;
}
