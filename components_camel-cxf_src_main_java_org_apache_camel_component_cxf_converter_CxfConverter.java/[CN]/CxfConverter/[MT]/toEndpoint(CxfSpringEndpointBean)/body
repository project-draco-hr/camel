{
  if (endpointBean == null) {
    throw new IllegalArgumentException("The CxfEndpoint instance is null");
  }
  SpringCamelContext context=SpringCamelContext.springCamelContext(endpointBean.getApplicationContext());
  CxfEndpoint answer=new CxfSpringEndpoint(context,endpointBean);
  if (endpointBean.getProperties() != null) {
    Map<String,Object> copy=new HashMap<String,Object>();
    copy.putAll(endpointBean.getProperties());
    EndpointHelper.setReferenceProperties(context,answer,copy);
    EndpointHelper.setProperties(context,answer,copy);
    answer.setMtomEnabled(Boolean.valueOf((String)copy.get(Message.MTOM_ENABLED)));
  }
  return answer;
}
