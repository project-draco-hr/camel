{
  if (intercepts != null && !intercepts.isEmpty()) {
    for (    InterceptDefinition intercept : intercepts) {
      intercept.afterPropertiesSet();
      RouteDefinitionHelper.initParent(intercept);
      upper.add(0,intercept);
    }
  }
  if (interceptFromDefinitions != null && !interceptFromDefinitions.isEmpty()) {
    for (    InterceptFromDefinition intercept : interceptFromDefinitions) {
      boolean match=true;
      if (intercept.getUri() != null) {
        match=false;
        for (        FromDefinition input : route.getInputs()) {
          String uri=input.getUri();
          if (uri != null && uri.startsWith("ref:")) {
            uri=CamelContextHelper.getMandatoryEndpoint(context,uri).getEndpointUri();
          }
 else           if (input.getRef() != null) {
            uri=CamelContextHelper.getMandatoryEndpoint(context,"ref:" + input.getRef()).getEndpointUri();
          }
          if (EndpointHelper.matchEndpoint(uri,intercept.getUri())) {
            match=true;
            break;
          }
        }
      }
      if (match) {
        intercept.afterPropertiesSet();
        RouteDefinitionHelper.initParent(intercept);
        upper.add(0,intercept);
      }
    }
  }
  if (interceptSendToEndpointDefinitions != null && !interceptSendToEndpointDefinitions.isEmpty()) {
    for (    InterceptSendToEndpointDefinition intercept : interceptSendToEndpointDefinitions) {
      intercept.afterPropertiesSet();
      RouteDefinitionHelper.initParent(intercept);
      upper.add(0,intercept);
    }
  }
}
