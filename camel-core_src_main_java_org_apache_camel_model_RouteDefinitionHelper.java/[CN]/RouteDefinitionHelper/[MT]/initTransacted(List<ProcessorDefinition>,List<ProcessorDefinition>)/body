{
  TransactedDefinition transacted=null;
  for (  ProcessorDefinition type : abstracts) {
    if (type instanceof TransactedDefinition) {
      if (transacted == null) {
        transacted=(TransactedDefinition)type;
      }
 else {
        throw new IllegalArgumentException("The route can only have one transacted defined");
      }
    }
  }
  if (transacted != null) {
    transacted.getOutputs().addAll(lower);
    lower.clear();
    lower.add(transacted);
  }
}
