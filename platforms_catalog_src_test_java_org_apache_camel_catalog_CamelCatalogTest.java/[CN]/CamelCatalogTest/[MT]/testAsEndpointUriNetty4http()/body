{
  Map<String,String> map=new HashMap<String,String>();
  map.put("host","localhost");
  map.put("port","8080");
  map.put("path","foo/bar");
  map.put("disconnect","true");
  String uri=catalog.asEndpointUri("netty4-http",map,true);
  assertEquals("netty4-http:http:localhost:8080/foo/bar?disconnect=true",uri);
  map.put("protocol","https");
  uri=catalog.asEndpointUri("netty4-http",map,true);
  assertEquals("netty4-http:https:localhost:8080/foo/bar?disconnect=true",uri);
  map.put("path","foo/bar?verbose=true");
  map.put("disconnect","true");
  uri=catalog.asEndpointUri("netty4-http",map,true);
  assertEquals("netty4-http:https:localhost:8080/foo/bar?verbose=true&disconnect=true",uri);
}
