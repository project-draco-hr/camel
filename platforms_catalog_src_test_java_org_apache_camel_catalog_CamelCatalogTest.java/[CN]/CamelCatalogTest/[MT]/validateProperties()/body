{
  EndpointValidationResult result=catalog.validateEndpointProperties("log:mylog");
  assertTrue(result.isSuccess());
  result=catalog.validateEndpointProperties("log:mylog?level=WARN&foo=bar");
  assertFalse(result.isSuccess());
  assertTrue(result.getUnknown().contains("foo"));
  assertEquals(1,result.getNumberOfErrors());
  result=catalog.validateEndpointProperties("jms:unknown:myqueue");
  assertFalse(result.isSuccess());
  assertEquals("unknown",result.getInvalidEnum().get("destinationType"));
  assertEquals("queue",result.getDefaultValues().get("destinationType"));
  assertEquals(1,result.getNumberOfErrors());
  result=catalog.validateEndpointProperties("jms:queue:myqueue?jmsKeyFormatStrategy=#key");
  assertTrue(result.isSuccess());
  assertEquals(0,result.getNumberOfErrors());
  result=catalog.validateEndpointProperties("jms:queue:myqueue?jmsKeyFormatStrategy=key");
  assertFalse(result.isSuccess());
  assertEquals("key",result.getInvalidReference().get("jmsKeyFormatStrategy"));
  assertEquals(1,result.getNumberOfErrors());
  result=catalog.validateEndpointProperties("yammer:MESSAGES?accessToken=aaa&consumerKey=bbb&consumerSecret=ccc&useJson=true&initialDelay=500");
  assertTrue(result.isSuccess());
  result=catalog.validateEndpointProperties("yammer:MESSAGES?accessToken=aaa&consumerKey=&useJson=no&initialDelay=five");
  assertFalse(result.isSuccess());
  assertEquals(4,result.getNumberOfErrors());
  assertTrue(result.getRequired().contains("consumerKey"));
  assertTrue(result.getRequired().contains("consumerSecret"));
  assertEquals("no",result.getInvalidBoolean().get("useJson"));
  assertEquals("five",result.getInvalidInteger().get("initialDelay"));
  result=catalog.validateEndpointProperties("mqtt:myqtt?reconnectBackOffMultiplier=2.5");
  assertTrue(result.isSuccess());
  assertEquals(0,result.getNumberOfErrors());
  result=catalog.validateEndpointProperties("mqtt:myqtt?reconnectBackOffMultiplier=five");
  assertFalse(result.isSuccess());
  assertEquals("five",result.getInvalidNumber().get("reconnectBackOffMultiplier"));
  assertEquals(1,result.getNumberOfErrors());
  result=catalog.validateEndpointProperties("foo:bar?me=you");
  assertFalse(result.isSuccess());
  assertTrue(result.getUnknownComponent().equals("foo"));
  assertEquals(1,result.getNumberOfErrors());
  result=catalog.validateEndpointProperties("log:output?showAll=ggg");
  assertFalse(result.isSuccess());
  assertEquals("ggg",result.getInvalidBoolean().get("showAll"));
  assertEquals(1,result.getNumberOfErrors());
  result=catalog.validateEndpointProperties("dataset:foo?minRate=50");
  assertTrue(result.isSuccess());
  result=catalog.validateEndpointProperties("timer://foo?fixedRate=true&delay=0&period=2s");
  assertTrue(result.isSuccess());
  result=catalog.validateEndpointProperties("timer://foo?fixedRate=#fixed&delay=#myDelay");
  assertTrue(result.isSuccess());
  result=catalog.validateEndpointProperties("file:inbox?consumer.delay=5000&consumer.greedy=true");
  assertTrue(result.isSuccess());
  result=catalog.validateEndpointProperties("file:inbox?delay=5000&greedy=true");
  assertTrue(result.isSuccess());
  result=catalog.validateEndpointProperties("file:inbox?delay=5000&consumer.greedy=true");
  assertTrue(result.isSuccess());
  result=catalog.validateEndpointProperties("file:inbox?delay=5000&scheduler.foo=123&scheduler.bar=456");
  assertTrue(result.isSuccess());
  result=catalog.validateEndpointProperties("stub:foo?me=123&you=456");
  assertTrue(result.isSuccess());
  result=catalog.validateEndpointProperties("dataformat:string:marshal?foo=bar");
  assertTrue(result.isSuccess());
  result=catalog.validateEndpointProperties("dataformat:string:marshal?foo=bar",true);
  assertFalse(result.isSuccess());
  assertTrue(result.getUnknown().contains("foo"));
  result=catalog.validateEndpointProperties("dataformat:string:marshal?charset=utf-8",true);
  assertTrue(result.isSuccess());
  result=catalog.validateEndpointProperties("atmos://put?remotePath=/dummy.txt");
  assertTrue(result.isSuccess());
  result=catalog.validateEndpointProperties("ssh://karaf:karaf@localhost:8101");
  assertTrue(result.isSuccess());
  result=catalog.validateEndpointProperties("ssh://scott@localhost:8101?certResource=classpath:test_rsa&useFixedDelay=true&delay=5000&pollCommand=features:list%0A");
  assertTrue(result.isSuccess());
  result=catalog.validateEndpointProperties("aws-swf://activity?{{options}}");
  assertTrue(result.isSuccess());
}
