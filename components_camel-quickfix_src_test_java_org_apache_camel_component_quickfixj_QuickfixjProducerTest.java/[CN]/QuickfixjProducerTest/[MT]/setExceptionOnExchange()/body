{
  Exchange mockExchange=Mockito.mock(Exchange.class);
  QuickfixjEndpoint mockEndpoint=Mockito.mock(QuickfixjEndpoint.class);
  org.apache.camel.Message mockCamelMessage=Mockito.mock(org.apache.camel.Message.class);
  Mockito.when(mockExchange.getIn()).thenReturn(mockCamelMessage);
  Mockito.when(mockCamelMessage.getBody(Message.class)).thenReturn(new Message());
  SessionID sessionID=new SessionID(FixVersions.BEGINSTRING_FIX44,"SENDER","TARGET");
  Mockito.when(mockEndpoint.getSessionID()).thenReturn(sessionID);
  QuickfixjProducer producer=new QuickfixjProducer(mockEndpoint);
  producer.process(mockExchange);
  Mockito.verify(mockExchange).setException(Matchers.isA(IllegalStateException.class));
}
