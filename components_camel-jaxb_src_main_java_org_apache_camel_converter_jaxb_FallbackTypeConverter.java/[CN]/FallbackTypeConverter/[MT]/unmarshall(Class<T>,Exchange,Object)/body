{
  LOG.trace("Unmarshal to {} with value {}",type,value);
  if (value == null) {
    throw new IllegalArgumentException("Cannot convert from null value to JAXBSource");
  }
  Unmarshaller unmarshaller=getUnmarshaller(type);
  if (parentTypeConverter != null) {
    if (!needFiltering(exchange)) {
      XMLStreamReader xmlReader=parentTypeConverter.convertTo(XMLStreamReader.class,exchange,value);
      if (xmlReader != null) {
        try {
          Object unmarshalled=unmarshal(unmarshaller,exchange,xmlReader);
          return castJaxbType(unmarshalled,type);
        }
 catch (        Exception ex) {
          LOG.debug("Cannot use StaxStreamReader to unmarshal the message, due to {}",ex);
        }
      }
    }
    InputStream inputStream=parentTypeConverter.convertTo(InputStream.class,exchange,value);
    if (inputStream != null) {
      Object unmarshalled=unmarshal(unmarshaller,exchange,inputStream);
      return castJaxbType(unmarshalled,type);
    }
    Reader reader=parentTypeConverter.convertTo(Reader.class,exchange,value);
    if (reader != null) {
      Object unmarshalled=unmarshal(unmarshaller,exchange,reader);
      return castJaxbType(unmarshalled,type);
    }
    Source source=parentTypeConverter.convertTo(Source.class,exchange,value);
    if (source != null) {
      Object unmarshalled=unmarshal(unmarshaller,exchange,source);
      return castJaxbType(unmarshalled,type);
    }
  }
  if (value instanceof String) {
    value=new StringReader((String)value);
  }
  if (value instanceof InputStream || value instanceof Reader) {
    Object unmarshalled=unmarshal(unmarshaller,exchange,value);
    return castJaxbType(unmarshalled,type);
  }
  return null;
}
