{
  LOG.trace("Unmarshal to {} with value {}",type,value);
  if (value == null) {
    throw new IllegalArgumentException("Cannot convert from null value to JAXBSource");
  }
  Unmarshaller unmarshaller=getOrCreateUnmarshaller(type);
  if (parentTypeConverter != null) {
    if (!needFiltering(exchange)) {
      XMLStreamReader xmlReader=parentTypeConverter.convertTo(XMLStreamReader.class,value);
      if (xmlReader != null) {
        Object unmarshalled=unmarshal(unmarshaller,exchange,xmlReader);
        return type.cast(unmarshalled);
      }
    }
    InputStream inputStream=parentTypeConverter.convertTo(InputStream.class,value);
    if (inputStream != null) {
      Object unmarshalled=unmarshal(unmarshaller,exchange,inputStream);
      return type.cast(unmarshalled);
    }
    Reader reader=parentTypeConverter.convertTo(Reader.class,value);
    if (reader != null) {
      Object unmarshalled=unmarshal(unmarshaller,exchange,reader);
      return type.cast(unmarshalled);
    }
    Source source=parentTypeConverter.convertTo(Source.class,value);
    if (source != null) {
      Object unmarshalled=unmarshal(unmarshaller,exchange,source);
      return type.cast(unmarshalled);
    }
  }
  if (value instanceof String) {
    value=new StringReader((String)value);
  }
  if (value instanceof InputStream || value instanceof Reader) {
    Object unmarshalled=unmarshal(unmarshaller,exchange,value);
    return type.cast(unmarshalled);
  }
  return null;
}
