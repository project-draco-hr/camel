{
  if (getConfiguration().getXmlSignatureChecker() != null) {
    XmlSignatureChecker.Input checkerInput=new XmlSignatureChecker.Input(){
      @Override public SignedInfo getSignedInfo(){
        return signature.getSignedInfo();
      }
      @Override public SignatureValue getSignatureValue(){
        return signature.getSignatureValue();
      }
      @SuppressWarnings("unchecked") @Override public List<? extends XMLObject> getObjects(){
        return signature.getObjects();
      }
      @Override public Document getMessageBodyDocument(){
        return doc;
      }
      @Override public Message getMessage(){
        return out;
      }
      @Override public KeyInfo getKeyInfo(){
        return signature.getKeyInfo();
      }
    }
;
    getConfiguration().getXmlSignatureChecker().checkBeforeCoreValidation(checkerInput);
  }
}
