{
  if (camelMessage instanceof SpringIntegrationMessage) {
    SpringIntegrationMessage siMessage=(SpringIntegrationMessage)camelMessage;
    org.springframework.integration.message.Message message=siMessage.getMessage();
    if (message != null) {
      return message;
    }
  }
  DefaultMessageHeader messageHeader=new DefaultMessageHeader();
  Map<String,Object> headers=camelMessage.getHeaders();
  for (  String key : headers.keySet()) {
    Object value=headers.get(key);
    messageHeader.setAttribute(key,value);
  }
  return new GenericMessage(camelMessage.getBody(),messageHeader);
}
