{
  ObjectName on=ObjectName.getInstance("org.apache.camel:context=localhost/camel-1,type=eventnotifiers,name=JmxEventNotifier");
  MyNotificationListener listener=new MyNotificationListener();
  context.getManagementStrategy().getManagementAgent().getMBeanServer().addNotificationListener(on,listener,new NotificationFilter(){
    private static final long serialVersionUID=1L;
    public boolean isNotificationEnabled(    Notification notification){
      return notification.getSource().equals("MyCamel");
    }
  }
,null);
  getMockEndpoint("mock:result").expectedMessageCount(1);
  template.sendBody("direct:start","Hello World");
  assertMockEndpointsSatisfied();
  assertEquals("Get a wrong number of events",8,listener.getEventCounter());
  context.stop();
}
