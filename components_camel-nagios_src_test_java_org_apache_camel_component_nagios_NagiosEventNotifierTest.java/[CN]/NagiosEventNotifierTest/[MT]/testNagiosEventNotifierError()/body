{
  if (!canRun) {
    return;
  }
  try {
    template.sendBody("direct:fail","Bye World");
    fail("Should have thrown an exception");
  }
 catch (  Exception e) {
  }
  context.stop();
  Thread.sleep(2000);
  List<MessagePayload> events=nagios.getMessagePayloadList();
  assertTrue("Should be 9+ events, was: " + events.size(),events.size() >= 9);
}
