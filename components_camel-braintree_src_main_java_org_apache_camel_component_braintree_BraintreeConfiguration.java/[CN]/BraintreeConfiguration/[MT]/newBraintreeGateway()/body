{
  final BraintreeGateway gateway=new BraintreeGateway(getBraintreeEnvironment(),getMerchantId(),getPublicKey(),getPrivateKey());
  if (ObjectHelper.isNotEmpty(proxyHost) && ObjectHelper.isNotEmpty(proxyPort)) {
    gateway.setProxy(proxyHost,proxyPort);
  }
  if (httpReadTimeout != null) {
    gateway.getConfiguration().setTimeout(httpReadTimeout);
  }
  final Logger logger=ObjectHelper.isNotEmpty(httpLogName) ? Logger.getLogger(httpLogName) : gateway.getConfiguration().getLogger();
  for (  Handler handler : logger.getHandlers()) {
    logger.removeHandler(handler);
  }
  logger.addHandler(new BraintreeLogHandler());
  if (httpLogLevel != null) {
    logger.setLevel(httpLogLevel);
  }
  gateway.getConfiguration().setLogger(logger);
  return gateway;
}
