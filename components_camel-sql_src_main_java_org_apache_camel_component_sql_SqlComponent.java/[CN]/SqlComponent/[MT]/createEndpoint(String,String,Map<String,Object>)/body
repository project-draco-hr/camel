{
  String dataSourceRef=getAndRemoveParameter(parameters,"dataSourceRef",String.class);
  if (dataSourceRef != null) {
    dataSource=CamelContextHelper.mandatoryLookup(getCamelContext(),dataSourceRef,DataSource.class);
  }
  String parameterPlaceholderSubstitute=getAndRemoveParameter(parameters,"placeholder",String.class,"#");
  JdbcTemplate jdbcTemplate=new JdbcTemplate(dataSource);
  IntrospectionSupport.setProperties(jdbcTemplate,parameters,"template.");
  String query=remaining.replaceAll(parameterPlaceholderSubstitute,"?");
  return new SqlEndpoint(uri,this,jdbcTemplate,query);
}
