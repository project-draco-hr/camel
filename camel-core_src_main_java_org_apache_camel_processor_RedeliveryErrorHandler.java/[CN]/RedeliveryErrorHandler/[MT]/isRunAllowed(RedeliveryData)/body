{
  boolean forceShutdown=camelContext.getShutdownStrategy().forceShutdown(this);
  if (forceShutdown) {
    log.trace("isRunAllowed() -> false (Run not allowed as ShutdownStrategy is forcing shutting down)");
    return false;
  }
  if (data.redeliveryCounter > 0) {
    if (data.currentRedeliveryPolicy.allowRedeliveryWhileStopping) {
      log.trace("isRunAllowed() -> true (Run allowed as RedeliverWhileStopping is enabled)");
      return true;
    }
 else     if (preparingShutdown) {
      boolean answer=isRunAllowedOnPreparingShutdown();
      log.trace("isRunAllowed() -> {} (Run not allowed as we are preparing for shutdown)",answer);
      return answer;
    }
  }
  boolean answer=!isStoppingOrStopped();
  log.trace("isRunAllowed() -> {} (Run allowed if we are not stopped/stopping)",answer);
  return answer;
}
