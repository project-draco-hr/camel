{
  Exchange out=template.send("direct:start",new Processor(){
    public void process(    Exchange exchange) throws Exception {
      exchange.getIn().setBody("Hello World");
    }
  }
);
  Exception e=out.getException();
  assertNotNull("Should have thrown an exception",e);
  assertIsInstanceOf(IllegalArgumentException.class,e);
  assertEquals("Forced",e.getMessage());
  assertEquals(true,out.getIn().getHeader(Exchange.REDELIVERED));
  assertEquals(2,out.getIn().getHeader(Exchange.REDELIVERY_COUNTER));
  assertEquals(true,out.getProperty(Exchange.FAILURE_HANDLED));
  assertEquals(false,out.getProperty(Exchange.EXCEPTION_HANDLED));
  assertSame("Should be same exception",e,out.getProperty(Exchange.EXCEPTION_CAUGHT));
}
