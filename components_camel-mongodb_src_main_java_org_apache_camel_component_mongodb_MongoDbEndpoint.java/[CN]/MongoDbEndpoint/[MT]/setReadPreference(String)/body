{
  Class<?>[] innerClasses=ReadPreference.class.getDeclaredClasses();
  for (  Class<?> inClass : innerClasses) {
    if (inClass.getSuperclass() == ReadPreference.class && inClass.getName().equals(readPreference)) {
      try {
        this.readPreference=(ReadPreference)inClass.getConstructor().newInstance();
      }
 catch (      Exception e) {
        LOG.debug("Error setting the read preference. This exception will be ignored.",e);
        continue;
      }
      break;
    }
  }
  if (getReadPreference() == null) {
    String msg="Could not resolve specified ReadPreference of type " + readPreference + ". Read preferences are resolved from inner classes of com.mongodb.ReadPreference.";
    throw new IllegalArgumentException(msg);
  }
}
