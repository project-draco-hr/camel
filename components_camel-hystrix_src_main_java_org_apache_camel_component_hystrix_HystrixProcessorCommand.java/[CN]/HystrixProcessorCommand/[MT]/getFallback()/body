{
  if (fallback != null) {
    try {
      Exception e=exchange.getException();
      if (exchange.getProperty(Exchange.FAILURE_ENDPOINT) == null) {
        exchange.setProperty(Exchange.FAILURE_ENDPOINT,exchange.getProperty(Exchange.TO_ENDPOINT));
      }
      exchange.setProperty(Exchange.EXCEPTION_HANDLED,true);
      exchange.setProperty(Exchange.EXCEPTION_CAUGHT,e);
      exchange.setException(null);
      exchange.removeProperty(Exchange.REDELIVERY_EXHAUSTED);
      fallback.process(exchange,callback);
    }
 catch (    Exception e) {
      exchange.setException(e);
    }
 finally {
      callback.done(true);
    }
    return exchange;
  }
 else {
    return null;
  }
}
