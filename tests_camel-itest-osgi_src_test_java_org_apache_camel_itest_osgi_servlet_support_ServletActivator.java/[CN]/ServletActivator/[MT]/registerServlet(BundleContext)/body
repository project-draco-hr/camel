{
  httpServiceRef=bundleContext.getServiceReference(HttpService.class.getName());
  if (httpServiceRef != null && !registerService) {
    LOG.info("Regist the servlet service");
    final HttpService httpService=(HttpService)bundleContext.getService(httpServiceRef);
    if (httpService != null) {
      final HttpContext httpContext=httpService.createDefaultHttpContext();
      final Dictionary<String,String> initParams=new Hashtable<String,String>();
      initParams.put("matchOnUriPrefix","false");
      initParams.put("servlet-name","camelServlet");
      httpService.registerServlet("/camel/services",(Servlet)new CamelHttpTransportServlet(),initParams,httpContext);
      registerService=true;
    }
  }
}
