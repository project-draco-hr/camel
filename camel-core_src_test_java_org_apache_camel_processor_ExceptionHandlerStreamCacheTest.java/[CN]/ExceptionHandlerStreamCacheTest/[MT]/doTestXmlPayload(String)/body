{
  successEndpoint.expectedMessageCount(0);
  exceptionEndpoint.expectedMessageCount(1);
  template.sendBody("direct:start",new StreamSource(new ByteArrayInputStream(xml.getBytes())));
  successEndpoint.assertIsSatisfied();
  exceptionEndpoint.assertIsSatisfied();
  StreamSource body=(StreamSource)exceptionEndpoint.getExchanges().get(0).getIn().getBody();
  assertEquals("Ensure message re-readability in the exception handler",xml,new XmlConverter().toString(body,null));
}
