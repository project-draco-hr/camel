{
  RouteBuilder builder=new RouteBuilder(){
    public void configure(){
      from("queue:a").choice().when(header("foo").isEqualTo("bar")).to("queue:b").when(header("foo").isEqualTo("cheese")).to("queue:c").otherwise().to("queue:d");
    }
  }
;
  return builder.getRouteList();
}
