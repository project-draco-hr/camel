{
  RestDefinition rest=loadRest("rest1.xml");
  assertNotNull(rest);
  assertEquals("foo",rest.getId());
  assertEquals(0,context.getRestDefinitions().size());
  context.getRestDefinitions().add(rest);
  assertEquals(1,context.getRestDefinitions().size());
  final List<RouteDefinition> routeDefinitions=rest.asRouteDefinition(context);
  for (  final RouteDefinition routeDefinition : routeDefinitions) {
    context.addRouteDefinition(routeDefinition);
  }
  assertEquals(2,context.getRoutes().size());
  assertTrue("Route should be started",context.getRouteStatus("route1").isStarted());
  getMockEndpoint("mock:bar").expectedBodiesReceived("Hello World");
  template.sendBody("seda:get-say-hello-bar","Hello World");
  assertMockEndpointsSatisfied();
}
