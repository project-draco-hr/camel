{
  template.sendBody("disruptor:foo","A");
  template.sendBody("disruptor:foo","B");
  template.sendBody("disruptor:foo","C");
  final DisruptorEndpoint disruptorEndpoint=getMandatoryEndpoint("disruptor:foo",DisruptorEndpoint.class);
  assertEquals(5,disruptorEndpoint.getDisruptor().getRemainingCapacity());
  context.addRoutes(new RouteBuilder(){
    @Override public void configure() throws Exception {
      from("disruptor:foo").routeId("bar").to("mock:bar");
    }
  }
);
  final MockEndpoint mockEndpoint=getMockEndpoint("mock:bar");
  mockEndpoint.expectedMessageCount(3);
  mockEndpoint.assertIsSatisfied(200);
}
