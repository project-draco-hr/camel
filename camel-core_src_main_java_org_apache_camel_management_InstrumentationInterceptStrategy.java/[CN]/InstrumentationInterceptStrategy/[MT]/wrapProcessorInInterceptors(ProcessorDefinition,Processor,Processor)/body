{
  if (target instanceof InstrumentationProcessor) {
    return target;
  }
  PerformanceCounter counter=registeredCounters.get(processorDefinition);
  if (counter != null) {
    InstrumentationProcessor wrapper=new InstrumentationProcessor(counter);
    wrapper.setProcessor(target);
    wrapper.setType(processorDefinition.getShortName());
    registeredCounters.remove(processorDefinition);
    return wrapper;
  }
  return target;
}
