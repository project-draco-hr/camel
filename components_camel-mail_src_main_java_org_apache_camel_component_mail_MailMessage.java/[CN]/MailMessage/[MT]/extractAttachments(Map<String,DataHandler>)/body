{
  Multipart mp;
  Object content;
  try {
    content=this.mailMessage.getContent();
    if (content instanceof Multipart) {
      mp=(Multipart)content;
      int nbMP=mp.getCount();
      for (int i=0; i < nbMP; i++) {
        Part part=mp.getBodyPart(i);
        String disposition=part.getDisposition();
        if (disposition != null && (disposition.equalsIgnoreCase(Part.ATTACHMENT) || disposition.equalsIgnoreCase(Part.INLINE))) {
          if (part.getFileName() != null) {
            DataHandler att=part.getDataHandler();
            CollectionHelper.appendValue(map,part.getFileName(),att);
          }
        }
      }
    }
  }
 catch (  MessagingException e) {
    throw new javax.mail.MessagingException("Error while setting content on normalized message",e);
  }
catch (  IOException e) {
    throw new javax.mail.MessagingException("Error while fetching content",e);
  }
}
