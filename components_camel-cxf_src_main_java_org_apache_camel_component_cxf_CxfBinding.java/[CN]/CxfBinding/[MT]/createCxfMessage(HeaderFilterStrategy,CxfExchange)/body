{
  Message answer=exchange.getInMessage();
  CxfMessage in=exchange.getIn();
  try {
    List body=in.getBody(List.class);
    answer.setContent(List.class,body);
    CxfHeaderHelper.propagateCamelToCxf(strategy,in.getHeaders(),answer);
  }
 catch (  NoTypeConversionAvailableException ex) {
    try {
      InputStream body=in.getBody(InputStream.class);
      answer.setContent(InputStream.class,body);
    }
 catch (    NoTypeConversionAvailableException ex2) {
    }
  }
  Map<String,Object> requestContext=CastUtils.cast((Map)answer.get(Client.REQUEST_CONTEXT));
  if (requestContext == null) {
    requestContext=new HashMap<String,Object>();
  }
  if (exchange.getExchange() != null) {
    requestContext.putAll(exchange.getExchange());
  }
  if (exchange.getProperties() != null) {
    requestContext.putAll(exchange.getProperties());
  }
  answer.put(Client.REQUEST_CONTEXT,requestContext);
  return answer;
}
