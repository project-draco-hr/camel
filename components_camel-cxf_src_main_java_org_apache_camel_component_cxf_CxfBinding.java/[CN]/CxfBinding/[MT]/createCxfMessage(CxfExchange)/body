{
  Message answer=exchange.getInMessage();
  CxfMessage in=exchange.getIn();
  Object body=in.getBody(InputStream.class);
  if (body == null) {
    body=in.getBody();
  }
  if (body instanceof InputStream) {
    answer.setContent(InputStream.class,body);
  }
 else   if (body instanceof List) {
    answer.setContent(List.class,body);
    answer.put(CxfConstants.OPERATION_NAME,(String)in.getHeader(CxfConstants.OPERATION_NAME));
    answer.put(CxfConstants.OPERATION_NAMESPACE,(String)in.getHeader(CxfConstants.OPERATION_NAMESPACE));
  }
 else   if (body instanceof DOMSource) {
    DOMSource source=(DOMSource)body;
    try {
      ByteArrayInputStream bais=new ByteArrayInputStream(XMLUtils.toString(source).getBytes());
      answer.setContent(InputStream.class,bais);
    }
 catch (    Exception e) {
      throw new RuntimeCamelException(e);
    }
  }
  return answer;
}
