{
  return new RouteBuilder(){
    public void configure(){
      onException(CamelException.class).to("mock:failed");
      from("direct:seqential").split(body().tokenize(","),new UseLatestAggregationStrategy()).to("mock:result");
      from("direct:parallel").split(body().tokenize(","),new MyAggregationStrategy()).parallelProcessing().to("mock:result");
      from("direct:parallelAggregate").split(body().tokenize(","),new MyAggregationStrategy()).parallelProcessing().parallelAggregate().to("mock:result");
      from("direct:streaming").split(body().tokenize(",")).streaming().to("mock:result");
      from("direct:parallel-streaming").split(body().tokenize(","),new MyAggregationStrategy()).parallelProcessing().streaming().to("mock:result");
      from("direct:exception").split(body().tokenize(",")).aggregationStrategy(new MyAggregationStrategy()).parallelProcessing().process(new Processor(){
        public void process(        Exchange exchange) throws Exception {
          String string=exchange.getIn().getBody(String.class);
          if ("Exception".equals(string)) {
            throw new CamelException("Just want to throw exception here");
          }
        }
      }
).to("mock:result");
      from("direct:simple").split(body()).to("mock:result");
    }
  }
;
}
