{
  return new RouteBuilder(){
    public void configure(){
      errorHandler(deadLetterChannel("mock:failed").maximumRedeliveries(0).handled(false));
      from("direct:seqential").split(body().tokenize(","),new UseLatestAggregationStrategy()).to("mock:result");
      from("direct:parallel").split(body().tokenize(","),new MyAggregationStrategy()).parallelProcessing(true).to("mock:result");
      from("direct:streaming").split(body().tokenize(",")).streaming().to("mock:result");
      from("direct:parallel-streaming").split(body().tokenize(","),new MyAggregationStrategy()).parallelProcessing().streaming().to("mock:result");
      from("direct:exception").split(body().tokenize(",")).aggregationStrategy(new MyAggregationStrategy()).parallelProcessing(true).process(new Processor(){
        public void process(        Exchange exchange) throws Exception {
          String string=exchange.getIn().getBody(String.class);
          if ("Exception".equals(string)) {
            throw new CamelException("Just want to throw exception here");
          }
        }
      }
).to("mock:result");
    }
  }
;
}
