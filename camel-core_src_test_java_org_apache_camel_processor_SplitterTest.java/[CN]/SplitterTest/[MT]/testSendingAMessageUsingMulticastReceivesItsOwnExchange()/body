{
  resultEndpoint.expectedBodiesReceived("James","Guillaume","Hiram","Rob");
  client.send("direct:a",new Processor<Exchange>(){
    public void process(    Exchange exchange){
      Message in=exchange.getIn();
      in.setBody("James,Guillaume,Hiram,Rob");
      in.setHeader("foo","bar");
    }
  }
);
  resultEndpoint.assertIsSatisfied();
}
