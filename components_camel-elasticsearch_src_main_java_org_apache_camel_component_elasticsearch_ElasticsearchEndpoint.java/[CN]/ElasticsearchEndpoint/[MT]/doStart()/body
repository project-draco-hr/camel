{
  super.doStart();
  if (configuration.isLocal()) {
    LOG.info("Starting local ElasticSearch server");
  }
 else {
    LOG.info("Joining ElasticSearch cluster " + configuration.getClusterName());
  }
  if (configuration.getIp() != null) {
    LOG.info("REMOTE ELASTICSEARCH: {}",configuration.getIp());
    Settings settings=ImmutableSettings.settingsBuilder().put("cluster.name",configuration.getClusterName()).put("client.transport.ignore_cluster_name",false).put("node.client",true).put("client.transport.sniff",true).build();
    Client client=new TransportClient(settings).addTransportAddress(new InetSocketTransportAddress(configuration.getIp(),configuration.getPort()));
    this.client=client;
  }
 else {
    node=configuration.buildNode();
    client=node.client();
  }
}
