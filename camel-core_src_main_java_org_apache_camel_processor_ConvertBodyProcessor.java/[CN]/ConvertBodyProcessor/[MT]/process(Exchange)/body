{
  Message in=exchange.getIn();
  Object value=null;
  try {
    value=in.getBody(type);
  }
 catch (  NoTypeConversionAvailableException e) {
    LOG.warn("Could not convert body of IN message: " + in + " to type: "+ type.getName());
  }
  if (exchange.getPattern().isOutCapable()) {
    Message out=exchange.getOut();
    out.copyFrom(in);
    out.setBody(value);
  }
 else {
    in.setBody(value);
  }
}
