{
  basePath=FileUtil.stripLeadingSeparator(basePath);
  uriTemplate=FileUtil.stripLeadingSeparator(uriTemplate);
  if (uriTemplate.contains("{")) {
    String path=StringHelper.replaceAll(uriTemplate,"{name}","Donald Duck");
    String overrideUri=String.format("%s://%s/%s/%s",scheme,host,basePath,path);
    exchange.getIn().setHeader(Exchange.HTTP_URI,overrideUri);
  }
  String url="jetty:%s://%s/%s/%s";
  url=String.format(url,scheme,host,basePath,uriTemplate);
  if (queryParameters != null) {
    url=url + "&" + queryParameters;
  }
  JettyHttpEndpoint endpoint=camelContext.getEndpoint(url,JettyHttpEndpoint.class);
  if (parameters != null && !parameters.isEmpty()) {
    setProperties(camelContext,endpoint,parameters);
  }
  return endpoint.createProducer();
}
