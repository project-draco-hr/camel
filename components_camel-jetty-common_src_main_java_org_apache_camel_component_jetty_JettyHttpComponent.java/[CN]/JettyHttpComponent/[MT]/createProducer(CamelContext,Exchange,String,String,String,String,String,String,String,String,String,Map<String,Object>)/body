{
  basePath=FileUtil.stripLeadingSeparator(basePath);
  uriTemplate=FileUtil.stripLeadingSeparator(uriTemplate);
  resolvedUriTemplate=FileUtil.stripLeadingSeparator(resolvedUriTemplate);
  if (uriTemplate.contains("{") && resolvedUriTemplate != null) {
    String overrideUri=String.format("%s://%s/%s/%s",scheme,host,basePath,resolvedUriTemplate);
    exchange.getIn().setHeader(Exchange.HTTP_URI,overrideUri);
  }
  if (queryParameters != null) {
    exchange.getIn().setHeader(Exchange.HTTP_QUERY,queryParameters);
  }
  String url="jetty:%s://%s/%s/%s";
  url=String.format(url,scheme,host,basePath,uriTemplate);
  JettyHttpEndpoint endpoint=camelContext.getEndpoint(url,JettyHttpEndpoint.class);
  if (parameters != null && !parameters.isEmpty()) {
    setProperties(camelContext,endpoint,parameters);
  }
  return endpoint.createProducer();
}
