{
  MockEndpoint mock=getMockEndpoint("mock:servicenow");
  mock.expectedMessageCount(1);
  template().sendBodyAndHeaders("direct:servicenow",null,new KVBuilder().put(ServiceNowConstants.RESOURCE,"table").put(ServiceNowConstants.ACTION,ServiceNowConstants.ACTION_RETRIEVE).put(ServiceNowConstants.SYSPARM_LIMIT,"10").put(ServiceNowConstants.TABLE,"incident").build());
  mock.assertIsSatisfied();
  Exchange exchange=mock.getExchanges().get(0);
  List<Incident> items=exchange.getIn().getBody(List.class);
  assertNotNull(items);
  assertTrue(items.size() <= 10);
}
