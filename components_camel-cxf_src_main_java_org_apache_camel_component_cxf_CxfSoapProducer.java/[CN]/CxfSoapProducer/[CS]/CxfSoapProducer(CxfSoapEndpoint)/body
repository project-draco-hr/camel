{
  this.endpoint=endpoint;
  this.producer=endpoint.getInnerEndpoint().createProducer();
  this.processor=new AsyncProcessorDecorator(producer,new Processor(){
    public void process(    Exchange exchange) throws Exception {
      processSoapProviderIn(exchange);
    }
  }
,new Processor(){
    public void process(    Exchange exchange) throws Exception {
      processSoapProviderOut(exchange);
    }
  }
);
  Class sei=null;
  if (ObjectHelper.isNotEmpty(endpoint.getServiceClass())) {
    sei=ClassLoaderUtils.loadClass(endpoint.getServiceClass(),this.getClass());
  }
  ClientProxyFactoryBean cfb=CxfEndpointUtils.getClientFactoryBean(sei);
  if (sei == null) {
    cfb.setServiceClass(Dummy.class);
  }
 else {
    cfb.setServiceClass(sei);
  }
  cfb.setWsdlURL(endpoint.getWsdl().getURL().toString());
  if (endpoint.getServiceName() != null) {
    cfb.setServiceName(endpoint.getServiceName());
  }
  if (endpoint.getEndpointName() != null) {
    cfb.setEndpointName(endpoint.getEndpointName());
  }
  cfb.setConduitSelector(new NullConduitSelector());
  client=(ClientImpl)((ClientProxy)Proxy.getInvocationHandler(cfb.create())).getClient();
}
