{
  final Set<String> encodings=Charset.availableCharsets().keySet();
  final byte[] dataCodings={(byte)0x02,(byte)0x04,(byte)0xF6,(byte)0xF4};
  byte[] body="\u02C7AB\u0000\u02C7\u007F\u02C7".getBytes(Charset.forName("UTF-8"));
  DeliverSm command=new DeliverSm();
  SmppConfiguration config=new SmppConfiguration();
  for (  byte dataCoding : dataCodings) {
    command.setDataCoding(dataCoding);
    command.setShortMessage(body);
    for (    String encoding : encodings) {
      config.setEncoding(encoding);
      message=new SmppMessage(command,config);
      assertArrayEquals(String.format("data coding=0x%02X; encoding=%s",dataCoding,encoding),body,((String)message.createBody()).getBytes());
    }
  }
}
