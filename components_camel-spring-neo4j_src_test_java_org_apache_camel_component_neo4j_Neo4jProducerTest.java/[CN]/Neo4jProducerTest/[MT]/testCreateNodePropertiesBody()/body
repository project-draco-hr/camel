{
  when(msg.getHeader(Neo4jEndpoint.HEADER_OPERATION)).thenReturn(Neo4jOperation.CREATE_NODE);
  when(msg.getBody()).thenReturn(new HashMap<String,Object>());
  Node node=mock(Node.class);
  when(node.getId()).thenReturn(14L);
  when(template.createNode(anyMapOf(String.class,Object.class))).thenReturn(node);
  producer.process(exchange);
  verify(template).createNode(anyMapOf(String.class,Object.class));
  verify(msg).setHeader(Neo4jEndpoint.HEADER_NODE_ID,14L);
}
