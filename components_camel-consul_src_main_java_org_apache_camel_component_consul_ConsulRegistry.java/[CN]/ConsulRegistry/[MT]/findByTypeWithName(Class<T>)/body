{
  logger.debug("find by type with name: " + type);
  Object obj=null;
  Map<String,T> result=new HashMap<String,T>();
  String keyPrefix=type.getName().replaceAll("\\$","/");
  logger.debug("keyPrefix: " + keyPrefix);
  kvClient=consul.keyValueClient();
  List<String> keys=null;
  try {
    keys=kvClient.getKeys(keyPrefix);
  }
 catch (  ConsulException e) {
    return result;
  }
  if (keys != null) {
    for (    String key : keys) {
      key=key.substring((key.lastIndexOf('/') + 1));
      obj=lookupByName(key.replaceAll("\\$","/"));
      if (type.isInstance(obj)) {
        result.put(key,type.cast(obj));
      }
    }
  }
  return result;
}
