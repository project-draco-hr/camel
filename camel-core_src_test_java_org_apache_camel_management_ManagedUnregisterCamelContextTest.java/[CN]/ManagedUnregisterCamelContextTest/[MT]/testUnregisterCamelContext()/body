{
  CamelContext context=createCamelContext();
  context.start();
  MBeanServer mbeanServer=context.getManagementStrategy().getManagementAgent().getMBeanServer();
  ObjectName on=ObjectName.getInstance("org.apache.camel:context=localhost/camel-1,type=context,name=\"camel-1\"");
  assertTrue("Should be registered",mbeanServer.isRegistered(on));
  String name=(String)mbeanServer.getAttribute(on,"CamelId");
  assertEquals("camel-1",name);
  String state=(String)mbeanServer.getAttribute(on,"State");
  assertEquals(ServiceStatus.Started.name(),state);
  String version=(String)mbeanServer.getAttribute(on,"CamelVersion");
  assertNotNull(version);
  Map<String,String> properties=(Map)mbeanServer.getAttribute(on,"Properties");
  assertNull(properties);
  Integer num=(Integer)mbeanServer.getAttribute(on,"InflightExchanges");
  assertEquals(0,num.intValue());
  context.stop();
  assertFalse("Should no longer be registered",mbeanServer.isRegistered(on));
}
