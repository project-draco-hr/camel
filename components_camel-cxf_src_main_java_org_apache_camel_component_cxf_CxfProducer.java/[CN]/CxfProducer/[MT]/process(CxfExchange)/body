{
  CxfBinding cxfBinding=endpoint.getBinding();
  Message inMessage=cxfBinding.createCxfMessage(exchange);
  try {
    if (dataFormat.equals(DataFormat.POJO)) {
      List paraments=inMessage.getContent(List.class);
      String operation=inMessage.getContent(String.class);
      Message response=new MessageImpl();
      if (operation != null && paraments != null) {
        try {
          Object[] result=client.invoke(operation,paraments.toArray());
          response.setContent(Object[].class,result);
          cxfBinding.storeCxfResponse(exchange,response);
        }
 catch (        Exception ex) {
          response.setContent(Exception.class,ex);
          cxfBinding.storeCxfFault(exchange,response);
        }
      }
    }
 else {
      org.apache.cxf.message.Exchange ex=exchange.getExchange();
      InvokingContext invokingContext=ex.get(InvokingContext.class);
      Object params=invokingContext.getRequestContent(inMessage);
      CxfClient cxfClient=(CxfClient)client;
      Object result=cxfClient.dispatch(params,null,ex);
      BindingOperationInfo boi=ex.get(BindingOperationInfo.class);
      Message response=null;
      if (boi == null) {
        response=new MessageImpl();
      }
 else {
        Endpoint ep=ex.get(Endpoint.class);
        response=ep.getBinding().createMessage();
      }
      response.setExchange(ex);
      ex.setOutMessage(response);
      invokingContext.setResponseContent(response,result);
      cxfBinding.storeCxfResponse(exchange,response);
    }
  }
 catch (  Exception e) {
    throw new RuntimeCamelException(e);
  }
}
