{
  WrappedMessageContext requestContext=new WrappedMessageContext(new HashMap<String,Object>(),null,Scope.APPLICATION);
  camelExchange.setProperty(Message.MTOM_ENABLED,String.valueOf(endpoint.isMtomEnabled()));
  DataFormat dataFormat=endpoint.getDataFormat();
  camelExchange.setProperty(CxfConstants.DATA_FORMAT_PROPERTY,dataFormat);
  LOG.trace("Set Camel Exchange property: {}={}",DataFormat.class.getName(),dataFormat);
  requestContext.put(DataFormat.class.getName(),dataFormat);
  if (dataFormat.dealias() == DataFormat.RAW) {
    cxfExchange.put(Client.KEEP_CONDUIT_ALIVE,true);
    LOG.trace("Set CXF Exchange property: {}={}",Client.KEEP_CONDUIT_ALIVE,true);
  }
  endpoint.getCxfBinding().populateCxfRequestFromExchange(cxfExchange,camelExchange,requestContext);
  requestContext.getScopes().remove(Message.PROTOCOL_HEADERS);
  return requestContext.getWrappedMap();
}
