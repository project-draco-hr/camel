{
  String propertiesFile=getAndRemoveParameter(parameters,"propertiesFile",String.class);
  String encoding=getAndRemoveParameter(parameters,"encoding",String.class);
  boolean cache=getAndRemoveParameter(parameters,"contentCache",Boolean.class,Boolean.TRUE);
  VelocityEndpoint answer=new VelocityEndpoint(uri,this,remaining);
  answer.setContentCache(cache);
  answer.setPropertiesFile(propertiesFile);
  if (ObjectHelper.isNotEmpty(encoding)) {
    answer.setEncoding(encoding);
  }
  answer.setVelocityEngine(velocityEngine);
  return answer;
}
