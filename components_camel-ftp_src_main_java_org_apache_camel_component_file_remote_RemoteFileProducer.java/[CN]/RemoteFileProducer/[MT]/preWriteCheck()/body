{
  boolean noop=false;
  if (loggedIn) {
    if (getEndpoint().getConfiguration().isSendNoop()) {
      try {
        noop=getOperations().sendNoop();
      }
 catch (      Exception e) {
        noop=false;
        loggedIn=false;
      }
      log.trace("preWriteCheck send noop success: {}",noop);
    }
 else {
      noop=true;
      log.trace("preWriteCheck send noop disabled");
    }
  }
  if (!noop) {
    try {
      if (getEndpoint().getMaximumReconnectAttempts() > 0) {
        recoverableConnectIfNecessary();
      }
 else {
        connectIfNecessary();
      }
    }
 catch (    Exception e) {
      loggedIn=false;
      throw e;
    }
  }
}
