{
  final int requestCount=5;
  resultEndpoint.expectedMessageCount(3);
  errorEndpoint.expectedMessageCount(requestCount);
  resultEndpoint.whenAnyExchangeReceived(new Processor(){
    @Override public void process(    Exchange exchange) throws Exception {
      throw new RuntimeException("blow");
    }
  }
);
  for (int i=0; i < requestCount; i++) {
    try {
      template.sendBody("test" + i);
    }
 catch (    Exception e) {
    }
  }
  assertMockEndpointsSatisfied();
}
