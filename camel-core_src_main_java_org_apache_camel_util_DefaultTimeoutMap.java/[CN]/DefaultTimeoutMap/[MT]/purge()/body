{
  if (log.isTraceEnabled()) {
    log.debug("There are " + map.size() + " in the timeout map");
  }
  long now=currentTime();
  lock.lock();
  try {
    for (    Map.Entry<K,TimeoutMapEntry<K,V>> entry : map.entrySet()) {
      if (entry.getValue().getExpireTime() < now) {
        if (isValidForEviction(entry.getValue())) {
          if (log.isDebugEnabled()) {
            log.debug("Evicting inactive request for correlationID: " + entry);
          }
          map.remove(entry.getKey(),entry.getValue());
        }
      }
    }
  }
  finally {
    lock.unlock();
  }
}
