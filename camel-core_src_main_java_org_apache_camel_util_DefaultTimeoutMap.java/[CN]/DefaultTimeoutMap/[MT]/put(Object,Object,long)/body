{
  TimeoutMapEntry entry=new TimeoutMapEntry(key,value,timeoutMillis);
synchronized (map) {
    Object oldValue=map.put(key,entry);
    if (oldValue != null) {
      index.remove(oldValue);
    }
    updateExpireTime(entry);
    index.add(entry);
  }
}
