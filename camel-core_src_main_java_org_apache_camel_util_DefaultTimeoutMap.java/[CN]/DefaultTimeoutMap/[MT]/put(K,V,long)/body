{
  TimeoutMapEntry<K,V> entry=new TimeoutMapEntry<K,V>(key,value,timeoutMillis);
synchronized (map) {
    TimeoutMapEntry<K,V> oldValue=map.put(key,entry);
    if (oldValue != null) {
      index.remove(oldValue);
    }
    updateExpireTime(entry);
    index.add(entry);
  }
}
