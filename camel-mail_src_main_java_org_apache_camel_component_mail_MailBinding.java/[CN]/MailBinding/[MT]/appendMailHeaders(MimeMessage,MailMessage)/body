{
  Set<Map.Entry<String,Object>> entries=camelMessage.getHeaders().entrySet();
  for (  Map.Entry<String,Object> entry : entries) {
    String headerName=entry.getKey();
    Object headerValue=entry.getValue();
    if (headerValue != null) {
      if (shouldOutputHeader(camelMessage,headerName,headerValue)) {
        mimeMessage.setHeader(headerName,headerValue.toString());
      }
    }
  }
}
