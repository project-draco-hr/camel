{
  deleteDirectory("target/enrich");
  template.sendBodyAndHeader("file:target/enrich","Hello World",Exchange.FILE_NAME,"hello.txt");
  PollingConsumer consumer=context.getEndpoint("file:target/enrich").createPollingConsumer();
  consumer.start();
  Exchange exchange=consumer.receive(5000);
  assertNotNull(exchange);
  assertEquals("Hello World",exchange.getIn().getBody(String.class));
  Thread.sleep(500);
  template.sendBodyAndHeader("file:target/enrich","Bye World",Exchange.FILE_NAME,"bye.txt");
  Thread.sleep(1000);
  File file=new File("target/enrich/bye.txt").getAbsoluteFile();
  assertTrue("File should exist " + file,file.exists());
  consumer.stop();
}
