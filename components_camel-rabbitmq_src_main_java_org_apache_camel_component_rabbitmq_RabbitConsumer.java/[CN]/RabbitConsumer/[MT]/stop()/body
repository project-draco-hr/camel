{
  stopping=true;
  if (channel == null) {
    return;
  }
  if (tag != null) {
    channel.basicCancel(tag);
  }
  try {
    channel.close();
  }
 catch (  TimeoutException e) {
    log.error("Timeout occured");
    throw e;
  }
}
