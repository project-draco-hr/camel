{
  Message camelMessage=exchange.getOut();
  quickfix.Message quickfixjMessage=camelMessage.getBody(quickfix.Message.class);
  if (log.isDebugEnabled()) {
    log.debug("Sending FIX message reply: " + quickfixjMessage.toString());
  }
  SessionID messageSessionID=MessageUtils.getReverseSessionID(exchange.getIn().getBody(quickfix.Message.class));
  Session session=getSession(messageSessionID);
  if (session == null) {
    throw new IllegalStateException("Unknown session: " + messageSessionID);
  }
  if (!session.send(quickfixjMessage)) {
    throw new CannotSendException("Could not send FIX message reply: " + quickfixjMessage.toString());
  }
}
