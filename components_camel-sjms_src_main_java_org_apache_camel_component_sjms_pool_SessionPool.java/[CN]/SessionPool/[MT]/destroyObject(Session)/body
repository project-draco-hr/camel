{
  session.setMessageListener(null);
  if (transacted) {
    try {
      session.rollback();
    }
 catch (    JMSException e) {
      logger.warn("Caught exception trying rollback() when putting session back into the pool, will invalidate. " + e,e);
    }
  }
  if (session != null) {
    session.close();
    session=null;
  }
}
