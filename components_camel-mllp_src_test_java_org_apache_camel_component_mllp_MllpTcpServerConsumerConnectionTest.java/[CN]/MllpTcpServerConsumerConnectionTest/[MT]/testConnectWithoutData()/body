{
  result.setExpectedCount(0);
  int connectionCount=10;
  Socket dummyLoadBalancerSocket=null;
  SocketAddress address=new InetSocketAddress("localhost",mllpPort);
  int connectTimeout=5000;
  try {
    for (int i=1; i <= connectionCount; ++i) {
      log.debug("Creating connection #{}",i);
      dummyLoadBalancerSocket=new Socket();
      dummyLoadBalancerSocket.connect(address,connectTimeout);
      log.debug("Closing connection #{}",i);
      dummyLoadBalancerSocket.close();
      Thread.sleep(1000);
    }
  }
  finally {
    if (null != dummyLoadBalancerSocket) {
      try {
        dummyLoadBalancerSocket.close();
      }
 catch (      Exception ex) {
        log.warn("Exception encountered closing dummy load balancer socket",ex);
      }
    }
  }
  assertMockEndpointsSatisfied(15,TimeUnit.SECONDS);
}
