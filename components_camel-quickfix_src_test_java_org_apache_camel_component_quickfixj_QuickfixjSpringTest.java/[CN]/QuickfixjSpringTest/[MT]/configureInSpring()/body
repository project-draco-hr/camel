{
  SessionID sessionID=new SessionID("FIX.4.2:INITIATOR->ACCEPTOR");
  SessionSettings springSessionSettings=context.getRegistry().lookup("quickfixjSettings",SessionSettings.class);
  Properties sessionProperties=springSessionSettings.getSessionProperties(sessionID,true);
  Assert.assertThat(sessionProperties.get("ConnectionType").toString(),CoreMatchers.is("initiator"));
  Assert.assertThat(sessionProperties.get("SocketConnectProtocol").toString(),CoreMatchers.is("VM_PIPE"));
  QuickfixjComponent component=context.getComponent("quickfix",QuickfixjComponent.class);
  QuickfixjEngine engine=component.getEngines().values().iterator().next();
  Assert.assertThat(engine.getMessageFactory(),is(instanceOf(CustomMessageFactory.class)));
}
