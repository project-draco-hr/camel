{
  CamelContextFactoryBean factoryBean=new CamelContextFactoryBean();
  factoryBean.setBundleContext(getBundleContext());
  ApplicationContext applicationContext=new ClassPathXmlApplicationContext("org/apache/camel/osgi/camelContext.xml");
  factoryBean.setApplicationContext(applicationContext);
  DefaultCamelContext context=factoryBean.getContext();
  context.start();
  MyService myService=context.getRegistry().lookup(MyService.class.getName(),MyService.class);
  assertNotNull("MyService should not be null",myService);
  Object service=context.getRegistry().lookup(MyService.class.getName());
  assertNotNull("MyService should not be null",service);
  service=context.getRegistry().lookupByType(MyService.class);
  assertNotNull("MyService should not be null",service);
  context.stop();
}
