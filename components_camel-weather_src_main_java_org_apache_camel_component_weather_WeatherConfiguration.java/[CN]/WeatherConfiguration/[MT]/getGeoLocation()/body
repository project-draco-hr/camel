{
  String geoLocation=component.getCamelContext().getTypeConverter().mandatoryConvertTo(String.class,new URL("http://freegeoip.net/json/"));
  if (isEmpty(geoLocation)) {
    throw new IllegalStateException("Got the unexpected value '" + geoLocation + "' for the geolocation");
  }
  ObjectMapper mapper=new ObjectMapper();
  JsonNode node=mapper.readValue(geoLocation,JsonNode.class);
  JsonNode latitudeNode=notNull(node.get("latitude"),"latitude");
  JsonNode longitudeNode=notNull(node.get("longitude"),"longitude");
  return "lat=" + latitudeNode + "&lon="+ longitudeNode;
}
