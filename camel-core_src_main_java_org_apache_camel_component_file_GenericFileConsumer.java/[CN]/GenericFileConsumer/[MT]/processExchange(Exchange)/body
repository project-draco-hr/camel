{
  final GenericFile<T> target=(GenericFile<T>)exchange.getProperty(FileComponent.FILE_EXCHANGE_FILE);
  if (log.isTraceEnabled()) {
    log.trace("Processing remote file: " + target);
  }
  try {
    final GenericFileProcessStrategy<T> processStrategy=endpoint.getGenericFileProcessStrategy();
    boolean begin=processStrategy.begin(operations,endpoint,exchange,target);
    if (!begin) {
      log.debug(endpoint + " cannot begin processing file: " + target);
      endpoint.getInProgressRepository().remove(target.getFileName());
      return;
    }
    final String name=target.getAbsoluteFilePath();
    if (log.isTraceEnabled()) {
      log.trace("Retreiving file: " + name + " from: "+ endpoint);
    }
    operations.retrieveFile(name,exchange);
    if (log.isTraceEnabled()) {
      log.trace("Retrieved file: " + name + " from: "+ endpoint);
    }
    if (log.isDebugEnabled()) {
      log.debug("About to process file: " + target + " using exchange: "+ exchange);
    }
    exchange.addOnCompletion(new GenericFileOnCompletion<T>(endpoint,operations));
    getProcessor().process(exchange);
  }
 catch (  Exception e) {
    handleException(e);
  }
}
