{
  GenericFile<T> file=getExchangeFileProperty(exchange);
  if (log.isTraceEnabled()) {
    log.trace("Processing remote file: " + file);
  }
  try {
    final GenericFileProcessStrategy<T> processStrategy=endpoint.getGenericFileProcessStrategy();
    boolean begin=processStrategy.begin(operations,endpoint,exchange,file);
    if (!begin) {
      log.debug(endpoint + " cannot begin processing file: " + file);
      endpoint.getInProgressRepository().remove(file.getFileName());
      return;
    }
    final GenericFile<T> target=getExchangeFileProperty(exchange);
    final String name=target.getAbsoluteFilePath();
    if (log.isTraceEnabled()) {
      log.trace("Retreiving file: " + name + " from: "+ endpoint);
    }
    operations.retrieveFile(name,exchange);
    if (log.isTraceEnabled()) {
      log.trace("Retrieved file: " + name + " from: "+ endpoint);
    }
    if (log.isDebugEnabled()) {
      log.debug("About to process file: " + target + " using exchange: "+ exchange);
    }
    String originalFileName=file.getFileName();
    exchange.addOnCompletion(new GenericFileOnCompletion<T>(endpoint,operations,target,originalFileName));
    getProcessor().process(exchange);
  }
 catch (  Exception e) {
    handleException(e);
  }
}
