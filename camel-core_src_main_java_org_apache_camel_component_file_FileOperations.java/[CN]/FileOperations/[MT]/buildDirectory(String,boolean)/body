{
  ObjectHelper.notNull(endpoint,"endpoint");
  if (endpoint.isAutoCreate() && !endpoint.getFile().exists()) {
    endpoint.getFile().mkdirs();
  }
  if (ObjectHelper.isEmpty(directory)) {
    return true;
  }
  File path;
  if (absolute) {
    path=new File(directory);
  }
 else   if (endpoint.getFile().equals(new File(directory))) {
    path=endpoint.getFile();
  }
 else {
    String afterRoot=ObjectHelper.after(directory,endpoint.getFile().getPath());
    if (ObjectHelper.isNotEmpty(afterRoot)) {
      path=new File(endpoint.getFile(),afterRoot);
    }
 else {
      path=new File(endpoint.getFile(),directory);
    }
  }
  if (path.isDirectory() && path.exists()) {
    return true;
  }
 else {
    return path.mkdirs();
  }
}
