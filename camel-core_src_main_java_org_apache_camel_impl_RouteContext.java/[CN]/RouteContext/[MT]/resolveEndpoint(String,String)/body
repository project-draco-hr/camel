{
  Endpoint endpoint=null;
  if (uri != null) {
    endpoint=resolveEndpoint(uri);
    if (endpoint == null) {
      throw new NoSuchEndpointException(uri);
    }
  }
  if (ref != null) {
    endpoint=lookup(ref,Endpoint.class);
    if (endpoint == null) {
      throw new NoSuchEndpointException("ref:" + ref);
    }
  }
  if (endpoint == null) {
    throw new IllegalArgumentException("Either 'uri' or 'ref' must be specified on: " + this);
  }
 else {
    return endpoint;
  }
}
