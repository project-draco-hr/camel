{
  Endpoint endpoint=this.context.getEndpoint("netty:tcp://localhost:" + PORT + "?timeout=2000");
  try {
    template.sendBody(endpoint,"Hello World");
    fail("Should have thrown a exception");
  }
 catch (  Exception e) {
    ExchangeTimedOutException timeout=assertIsInstanceOf(ExchangeTimedOutException.class,e.getCause());
    assertEquals(2000,timeout.getTimeout());
  }
}
