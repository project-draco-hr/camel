{
  List<Processor> list=getProcessors();
  if (list.isEmpty()) {
    throw new IllegalStateException("No processors available to process " + exchange);
  }
  int index=0;
  Processor processor=list.get(index);
  processExchange(processor,exchange);
  while (shouldFailOver(exchange)) {
    index++;
    if (index < list.size()) {
      exchange.setException(null);
      processor=list.get(index);
      processExchange(processor,exchange);
    }
 else {
      break;
    }
  }
}
