{
  ++count;
  if (count == 1) {
    assertFalse("Should not be transacted redelivered",exchange.isTransactedRedelivered());
  }
 else {
    assertTrue("Should be transacted redelivered",exchange.isTransactedRedelivered());
  }
  if (count < 3) {
    throw new IllegalArgumentException("Forced exception");
  }
  exchange.getIn().setHeader("count",count);
}
