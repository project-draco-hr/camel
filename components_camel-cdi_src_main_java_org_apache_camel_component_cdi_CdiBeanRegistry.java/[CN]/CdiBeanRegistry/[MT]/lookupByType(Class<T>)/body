{
  ObjectHelper.notNull(type,"type");
  LOG.trace("Looking up all beans having expected type = [{}] in CDI registry.",type.getName());
  final Set<Bean<?>> beans=getDelegate().getBeans(type);
  if (beans.isEmpty()) {
    LOG.debug("Found no beans having expected type = [{}] in CDI registry.",type.getName());
    return Collections.emptyMap();
  }
  LOG.debug("Found [{}] beans having expected type = [{}] in CDI registry.",Integer.valueOf(beans.size()),type.getName());
  final Map<String,T> beansByName=new HashMap<String,T>(beans.size());
  final CreationalContext<?> context=getDelegate().createCreationalContext(null);
  for (  final Bean<?> bean : beans) {
    beansByName.put(bean.getName(),type.cast(getDelegate().getReference(bean,type,context)));
  }
  return beansByName;
}
