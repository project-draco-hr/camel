{
  final Endpoint endpoint=exchange.get(Endpoint.class);
  Message outMessage=null;
  if (result.isFailed()) {
    CxfMessage fault=result.getFault();
    outMessage=exchange.getInFaultMessage();
    if (outMessage == null) {
      outMessage=endpoint.getBinding().createMessage();
      outMessage.setExchange(exchange);
      exchange.setInFaultMessage(outMessage);
    }
    Throwable ex=(Throwable)fault.getBody();
    if (ex != null) {
      outMessage.setContent(Throwable.class,ex);
    }
 else {
      outMessage.setContent(Throwable.class,result.getException());
    }
  }
 else {
    outMessage=result.getOutMessage();
    if (LOG.isLoggable(Level.FINEST)) {
      LOG.finest("Get the response outMessage " + outMessage);
    }
    org.apache.camel.Message camelMessage=result.getOut();
    CxfBinding.copyMessage(camelMessage,outMessage);
  }
  exchange.setOutMessage(outMessage);
}
