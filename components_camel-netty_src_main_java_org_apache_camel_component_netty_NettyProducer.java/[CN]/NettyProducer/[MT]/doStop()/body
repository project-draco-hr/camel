{
  LOG.debug("Stopping producer at address: {}",configuration.getAddress());
  LOG.trace("Closing {} channels",ALL_CHANNELS.size());
  ChannelGroupFuture future=ALL_CHANNELS.close();
  future.awaitUninterruptibly();
  if (channelFactory != null) {
    channelFactory.releaseExternalResources();
  }
  if (bossExecutor != null) {
    context.getExecutorServiceManager().shutdown(bossExecutor);
    bossExecutor=null;
  }
  if (workerExecutor != null) {
    context.getExecutorServiceManager().shutdown(workerExecutor);
    workerExecutor=null;
  }
  super.doStop();
}
