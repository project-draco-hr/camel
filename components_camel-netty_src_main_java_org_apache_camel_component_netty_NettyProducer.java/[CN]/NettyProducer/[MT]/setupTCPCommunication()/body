{
  if (channelFactory == null) {
    bossExecutor=context.getExecutorServiceManager().newCachedThreadPool(this,"NettyTCPBoss");
    workerExecutor=context.getExecutorServiceManager().newCachedThreadPool(this,"NettyTCPWorker");
    if (configuration.getWorkerCount() <= 0) {
      channelFactory=new NioClientSocketChannelFactory(bossExecutor,workerExecutor);
    }
 else {
      channelFactory=new NioClientSocketChannelFactory(bossExecutor,workerExecutor,configuration.getWorkerCount());
    }
  }
}
