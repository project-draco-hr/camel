{
  if (channelFactory == null) {
    ThreadPoolProfile bossProfile=new ThreadPoolBuilder("NettyTCPBoss").poolSize(configuration.getCorePoolSize()).maxPoolSize(configuration.getMaxPoolSize()).build();
    ThreadPoolProfile workerProfile=new ThreadPoolBuilder("NettyTCPWorker").poolSize(configuration.getCorePoolSize()).maxPoolSize(configuration.getMaxPoolSize()).build();
    ExecutorService bossExecutor=context.getExecutorServiceManager().getExecutorService(bossProfile,this);
    ExecutorService workerExecutor=context.getExecutorServiceManager().getExecutorService(workerProfile,this);
    channelFactory=new NioClientSocketChannelFactory(bossExecutor,workerExecutor);
  }
}
