{
  consumerEndpoint=(MockEndpoint)context.getEndpoint("mock:out1");
  producerEndpoint=(MockEndpoint)context.getEndpoint("mock:out2");
  consumerEndpoint.expectedBodiesReceived(body1,body2);
  producerEndpoint.expectedBodiesReceived(body1,body2);
  template.sendBody("direct:toConsumer",body1);
  template.sendBody("direct:toConsumer",body2);
  template.sendBody("direct:toProducer",body1);
  template.sendBody("direct:toProducer",body2);
  consumerEndpoint.assertIsSatisfied();
  producerEndpoint.assertIsSatisfied();
}
