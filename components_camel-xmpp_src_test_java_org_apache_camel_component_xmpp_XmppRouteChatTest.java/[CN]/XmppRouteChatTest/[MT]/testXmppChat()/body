{
  consumerEndpoint=context.getEndpoint("mock:out1",MockEndpoint.class);
  producerEndpoint=context.getEndpoint("mock:out2",MockEndpoint.class);
  consumerEndpoint.expectedBodiesReceived(body1,body2);
  producerEndpoint.expectedBodiesReceived(body1,body2);
  template.sendBody("direct:toConsumer",body1);
  template.sendBody("direct:toConsumer",body2);
  template.sendBody("direct:toProducer",body1);
  template.sendBody("direct:toProducer",body2);
  consumerEndpoint.assertIsSatisfied();
  producerEndpoint.assertIsSatisfied();
}
