{
  Service service=context.getRoutes().get(0).getServices().get(0);
  JmsConsumer consumer=(JmsConsumer)service;
  assertEquals(false,consumer.getListenerContainer().isRunning());
  MockEndpoint mock=getMockEndpoint("mock:result");
  mock.expectedMessageCount(0);
  template.sendBody("activemq:queue:foo","Hello World");
  Thread.sleep(3000);
  assertMockEndpointsSatisfied();
  mock.reset();
  mock.expectedBodiesReceived("Hello World");
  consumer.startListenerContainer();
  assertMockEndpointsSatisfied();
}
