{
  OutputReportIncident ok=new OutputReportIncident();
  ok.setCode("0");
  String cxfEndpointAddress="cxf:/incident";
  if (!usingServletTransport) {
    cxfEndpointAddress="cxf://http://localhost:9080/camel-example-reportincident/webservices/incident";
  }
  String cxfEndpoint=cxfEndpointAddress + "?serviceClass=org.apache.camel.example.reportincident.ReportIncidentEndpoint" + "&wsdlURL=report_incident.wsdl";
  from(cxfEndpoint).convertBodyTo(InputReportIncident.class).setHeader(NewFileComponent.HEADER_FILE_NAME,BeanLanguage.bean(FilenameGenerator.class,"generateFilename")).to("velocity:MailBody.vm").to("newfile://target/subfolder").transform(constant(ok));
  from("newfile://target/subfolder").setHeader("subject",constant("new incident reported")).to("smtp://someone@localhost?password=secret&to=incident@mycompany.com");
}
