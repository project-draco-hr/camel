{
  MockEndpoint mock=getMockEndpoint("mock:result");
  mock.expectedBodiesReceived("Hello World");
  template.sendBodyAndHeader("direct:start","Hello World","foo","bar");
  assertMockEndpointsSatisfied();
  for (  RouteDefinition route : context.getRouteDefinitions()) {
    assertNull("StreamCache should be disabled",route.getStreamCaching());
    ErrorHandler error=ProcessorDefinitionHelper.findFirstTypeInOutputs(route.getOutputs(),DeadLetterChannel.class);
    assertNull("There should be no error handler",error);
  }
  for (  Route route : context.getRoutes()) {
    if (route instanceof EventDrivenConsumerRoute) {
      EventDrivenConsumerRoute consumer=(EventDrivenConsumerRoute)route;
      StreamCachingInterceptor cache=findProceesorInRoute(consumer.getProcessor(),StreamCachingInterceptor.class);
      assertNull("There should be no stream cache found: " + cache,cache);
      ErrorHandler error=findProceesorInRoute(consumer.getProcessor(),ErrorHandler.class);
      assertNull("There should be no error handler found: " + error,error);
    }
  }
}
