{
  getMockEndpoint("mock:result").expectedMessageCount(0);
  getMockEndpoint("mock:error").expectedMessageCount(1);
  String body="<person user='James'><firstName>James</firstName>" + "<lastName>Strachan</lastName><city>London</city></person";
  template.sendBodyAndHeader("file:target/xquery",body,Exchange.FILE_NAME,"hello2.xml");
  assertMockEndpointsSatisfied();
  Thread.sleep(500);
  File file=new File("target/xquery/hello2.xml");
  assertFalse("File should not exists " + file,file.exists());
  file=new File("target/xquery/error/hello2.xml");
  assertTrue("File should exists " + file,file.exists());
}
