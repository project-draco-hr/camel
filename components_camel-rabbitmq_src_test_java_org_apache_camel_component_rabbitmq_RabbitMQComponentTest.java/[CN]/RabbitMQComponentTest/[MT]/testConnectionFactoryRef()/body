{
  SimpleRegistry registry=new SimpleRegistry();
  ConnectionFactory connectionFactoryMock=Mockito.mock(ConnectionFactory.class);
  registry.put("connectionFactoryMock",connectionFactoryMock);
  CamelContext defaultContext=new DefaultCamelContext(registry);
  Map<String,Object> params=new HashMap<String,Object>();
  params.put("connectionFactory","#connectionFactoryMock");
  RabbitMQEndpoint endpoint=new RabbitMQComponent(defaultContext).createEndpoint("rabbitmq:localhost/exchange","localhost/exchange",params);
  assertSame(connectionFactoryMock,endpoint.getConnectionFactory());
}
