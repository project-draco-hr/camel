{
  FreemarkerEndpoint endpoint=new FreemarkerEndpoint(uri,this,remaining);
  Configuration config;
  String encoding=getAndRemoveParameter(parameters,"encoding",String.class);
  if (ObjectHelper.isNotEmpty(encoding)) {
    endpoint.setEncoding(encoding);
  }
  boolean cache=getAndRemoveParameter(parameters,"contentCache",Boolean.class,Boolean.TRUE);
  if (cache) {
    config=getConfiguraiton();
  }
 else {
    config=getNoCacheConfiguration();
  }
  endpoint.setConfiguration(config);
  return endpoint;
}
