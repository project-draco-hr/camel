{
  if (configuration == null) {
    configuration=new Configuration(Configuration.VERSION_2_3_21);
    configuration.setTemplateLoader(new URLTemplateLoader(){
      @Override protected URL getURL(      String name){
        try {
          return ResourceHelper.resolveMandatoryResourceAsUrl(getCamelContext().getClassResolver(),name);
        }
 catch (        Exception e) {
          return null;
        }
      }
    }
);
  }
  return (Configuration)configuration.clone();
}
