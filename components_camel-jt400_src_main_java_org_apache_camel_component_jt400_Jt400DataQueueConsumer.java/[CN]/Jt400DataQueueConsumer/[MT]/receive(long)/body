{
  DataQueue queue=endpoint.getDataQueue();
  try {
    DataQueueEntry entry;
    if (timeout >= 0) {
      entry=queue.read((int)timeout);
    }
 else {
      entry=queue.read();
    }
    Exchange exchange=new DefaultExchange(endpoint.getCamelContext());
    if (entry != null) {
      if (endpoint.getFormat() == Format.binary) {
        exchange.getIn().setBody(entry.getData());
      }
 else {
        exchange.getIn().setBody(entry.getString());
      }
      return exchange;
    }
  }
 catch (  AS400SecurityException e) {
    throw new RuntimeCamelException("Unable to read from data queue: " + e.getMessage(),e);
  }
catch (  ErrorCompletingRequestException e) {
    throw new RuntimeCamelException("Unable to read from data queue: " + e.getMessage(),e);
  }
catch (  IOException e) {
    throw new RuntimeCamelException("Unable to read from data queue: " + e.getMessage(),e);
  }
catch (  IllegalObjectTypeException e) {
    throw new RuntimeCamelException("Unable to read from data queue: " + e.getMessage(),e);
  }
catch (  InterruptedException e) {
    throw new RuntimeCamelException("Unable to read from data queue: " + e.getMessage(),e);
  }
catch (  ObjectDoesNotExistException e) {
    throw new RuntimeCamelException("Unable to read from data queue: " + e.getMessage(),e);
  }
  return null;
}
