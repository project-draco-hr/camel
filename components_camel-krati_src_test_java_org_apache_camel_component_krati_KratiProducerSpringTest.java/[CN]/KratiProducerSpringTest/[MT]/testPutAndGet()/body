{
  ProducerTemplate template=context.createProducerTemplate();
  template.sendBodyAndHeader("direct:put","TEST1",KratiConstants.KEY,"1");
  template.sendBodyAndHeader("direct:put","TEST2",KratiConstants.KEY,"2");
  template.sendBodyAndHeader("direct:put","TEST3",KratiConstants.KEY,"3");
  MockEndpoint endpoint=(MockEndpoint)context.getEndpoint("mock:results");
  endpoint.expectedMessageCount(3);
  endpoint.assertIsSatisfied();
  Object result=template.requestBodyAndHeader("direct:get",null,KratiConstants.KEY,"3");
  assertEquals("TEST3",result);
}
