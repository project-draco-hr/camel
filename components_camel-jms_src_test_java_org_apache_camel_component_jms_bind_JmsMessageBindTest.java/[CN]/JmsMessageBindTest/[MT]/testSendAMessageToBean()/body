{
  MockEndpoint endpoint=getMockEndpoint("mock:result");
  endpoint.expectedBodiesReceived("Completed");
  template.sendBodyAndHeader("activemq:Test.BindingQueue","SomeBody","foo","bar");
  assertMockEndpointsSatisfied();
  MyBean bean=getMandatoryBean(MyBean.class,"myBean");
  assertEquals("body","SomeBody",bean.getBody());
  Map headers=bean.getHeaders();
  assertNotNull("No headers!",headers);
  assertEquals("foo header","bar",headers.get("foo"));
}
