{
  FTPClient client=ftpClient;
  if (client == null) {
    client=createFtpClient();
  }
  if (ftpClientParameters != null) {
    Object timeout=ftpClientParameters.remove("soTimeout");
    if (timeout != null) {
      soTimeout=getCamelContext().getTypeConverter().convertTo(int.class,timeout);
    }
    IntrospectionSupport.setProperties(client,ftpClientParameters);
  }
  if (ftpClientConfigParameters != null) {
    if (ftpClientConfig == null) {
      ftpClientConfig=new FTPClientConfig();
    }
    IntrospectionSupport.setProperties(ftpClientConfig,ftpClientConfigParameters);
  }
  FtpOperations operations=new FtpOperations(client,getFtpClientConfig());
  operations.setEndpoint(this);
  return operations;
}
