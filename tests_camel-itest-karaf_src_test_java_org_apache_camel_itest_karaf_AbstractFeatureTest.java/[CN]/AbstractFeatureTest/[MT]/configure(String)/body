{
  switchPlatformEncodingToUTF8();
  String karafVersion=getKarafVersion();
  LOG.info("*** The karaf version is " + karafVersion + " ***");
  Option[] options=new Option[]{KarafDistributionOption.karafDistributionConfiguration().frameworkUrl(maven().groupId("org.apache.karaf").artifactId("apache-karaf").type("tar.gz").versionAsInProject()).karafVersion(karafVersion).name("Apache Karaf").useDeployFolder(false).unpackDirectory(new File("target/paxexam/unpack/")),vmOption("-Dfile.encoding=UTF-8"),KarafDistributionOption.replaceConfigurationFile("etc/custom.properties",new File("src/test/resources/org/apache/camel/itest/karaf/custom.properties")),KarafDistributionOption.replaceConfigurationFile("etc/org.ops4j.pax.url.mvn.cfg",new File("src/test/resources/org/apache/camel/itest/karaf/org.ops4j.pax.url.mvn.cfg")),new LogLevelOption(LogLevelOption.LogLevel.INFO),KarafDistributionOption.features(getCamelKarafFeatureUrl(),"cxf-jaxb","camel-core","camel-spring","camel-" + feature)};
  return options;
}
