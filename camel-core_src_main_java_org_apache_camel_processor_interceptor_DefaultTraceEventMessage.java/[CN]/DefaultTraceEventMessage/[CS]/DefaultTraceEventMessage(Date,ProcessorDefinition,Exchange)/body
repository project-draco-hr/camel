{
  Message in=exchange.getIn();
  Message out=exchange.getOut(false);
  this.timestamp=timestamp;
  this.fromEndpointUri=exchange.getFromEndpoint() != null ? exchange.getFromEndpoint().getEndpointUri() : null;
  this.previousNode=extractPreviousNode(exchange);
  this.toNode=extractNode(toNode);
  this.exchangeId=exchange.getExchangeId();
  this.shortExchangeId=extractShortExchangeId(exchange);
  this.exchangePattern=exchange.getPattern().toString();
  this.properties=exchange.getProperties().isEmpty() ? null : exchange.getProperties().toString();
  this.headers=in.getHeaders().isEmpty() ? null : in.getHeaders().toString();
  this.body=MessageHelper.extractBodyAsString(in);
  this.bodyType=MessageHelper.getBodyTypeName(in);
  if (out != null) {
    this.outHeaders=out.getHeaders().isEmpty() ? null : out.getHeaders().toString();
    this.outBody=MessageHelper.extractBodyAsString(out);
    this.outBodyType=MessageHelper.getBodyTypeName(out);
  }
  this.causedByException=exchange.getException() != null ? exchange.getException().toString() : null;
}
