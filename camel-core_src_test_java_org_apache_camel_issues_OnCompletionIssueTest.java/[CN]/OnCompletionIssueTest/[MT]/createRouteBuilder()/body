{
  return new RouteBuilder(){
    @Override public void configure() throws Exception {
      onCompletion().parallelProcessing().log("completing ${body}").to("mock:complete");
      from("direct:input").onException(Exception.class).handled(true).end().choice().when(simple("${body} == 'stop'")).log("stopping").stop().when(simple("${body} == 'fault'")).log("faulting").setFaultBody(constant("faulted")).when(simple("${body} == 'except'")).log("excepting").throwException(new Exception("Exception requested")).end().log("finishing").to("mock:end");
    }
  }
;
}
