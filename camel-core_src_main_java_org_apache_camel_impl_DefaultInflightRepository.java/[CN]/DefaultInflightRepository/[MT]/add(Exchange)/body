{
  int count=totalCount.incrementAndGet();
  if (LOG.isTraceEnabled()) {
    LOG.trace("Total " + count + " inflight exchanges. Last added: "+ exchange.getExchangeId());
  }
  if (exchange.getFromEndpoint() == null) {
    return;
  }
  String key=exchange.getFromEndpoint().getEndpointKey();
  AtomicInteger existing=endpointCount.putIfAbsent(key,new AtomicInteger(1));
  if (existing != null) {
    existing.addAndGet(1);
  }
}
