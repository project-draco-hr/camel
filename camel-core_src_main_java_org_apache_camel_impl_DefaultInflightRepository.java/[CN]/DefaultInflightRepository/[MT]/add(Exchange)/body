{
  int count=totalCount.incrementAndGet();
  LOG.trace("Total {} inflight exchanges. Last added: {}",count,exchange.getExchangeId());
  if (exchange.getFromEndpoint() == null) {
    return;
  }
  String key=exchange.getFromEndpoint().getEndpointKey();
synchronized (endpointCount) {
    AtomicInteger existing=endpointCount.get(key);
    if (existing != null) {
      existing.incrementAndGet();
    }
 else {
      endpointCount.put(key,new AtomicInteger(1));
    }
  }
}
