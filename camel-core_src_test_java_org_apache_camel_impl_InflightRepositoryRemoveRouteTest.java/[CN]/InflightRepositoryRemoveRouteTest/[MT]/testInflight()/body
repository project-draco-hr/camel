{
  context.setInflightRepository(repo);
  assertEquals(0,context.getInflightRepository().size());
  getMockEndpoint("mock:result").expectedMessageCount(1);
  template.sendBody("direct:start","Hello World");
  assertMockEndpointsSatisfied();
  context.stopRoute("foo");
  assertTrue("Should have removed route",context.removeRoute("foo"));
  assertEquals(0,context.getInflightRepository().size());
  assertTrue("Should have removed remote from inflight registry",repo.isRemoved());
}
