{
  if (operation == null) {
    operation=newOperation == EventOperation.or ? EventOperation.or : EventOperation.and;
  }
  if (!stack.isEmpty()) {
    CompoundEventPredicate compound=new CompoundEventPredicate(stack);
    stack.clear();
    predicates.add(new EventPredicateHolder(operation,compound));
  }
  operation=newOperation;
}
