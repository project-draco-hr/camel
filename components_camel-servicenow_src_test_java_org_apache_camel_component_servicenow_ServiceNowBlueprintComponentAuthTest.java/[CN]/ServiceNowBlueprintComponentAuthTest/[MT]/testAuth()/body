{
  MockEndpoint mock1=getMockEndpoint("mock:servicenow-1");
  mock1.expectedMessageCount(1);
  MockEndpoint mock2=getMockEndpoint("mock:servicenow-2");
  mock2.expectedMessageCount(1);
  template().sendBodyAndHeaders("direct:servicenow",null,new ServiceNowTestSupport.KVBuilder().put(ServiceNowConstants.RESOURCE,"table").put(ServiceNowConstants.ACTION,ServiceNowConstants.ACTION_RETRIEVE).put(ServiceNowParams.SYSPARM_LIMIT,10).put(ServiceNowParams.PARAM_TABLE_NAME,"incident").build());
  mock1.assertIsSatisfied();
  mock2.assertIsSatisfied();
  validate(mock1.getExchanges().get(0));
  validate(mock2.getExchanges().get(0));
}
