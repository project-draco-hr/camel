{
  if (LOG.isDebugEnabled()) {
    LOG.debug("Stopping connector: " + connector + " at address: "+ endpoint.getAddress());
  }
  if (connector instanceof SocketConnector) {
    if (LOG.isDebugEnabled()) {
      LOG.debug("Setting SocketConnector WorkerTimeout=0 to force MINA stopping its resources faster");
    }
    ((SocketConnector)connector).setWorkerTimeout(0);
  }
  if (session != null) {
    session.close();
  }
  super.doStop();
}
