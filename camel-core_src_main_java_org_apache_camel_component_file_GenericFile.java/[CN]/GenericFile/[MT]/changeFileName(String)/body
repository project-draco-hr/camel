{
  if (LOG.isDebugEnabled()) {
    LOG.debug("Changing name to: " + newName);
  }
  File file=new File(newName);
  boolean nameChangeOnly=newName.indexOf(getFileSeparator()) == -1;
  boolean absolute=file.isAbsolute();
  setFileNameOnly(file.getName());
  setFileName(file.getName());
  if (nameChangeOnly) {
    setRelativeFilePath(changeNameOnly(getRelativeFilePath(),file.getName()));
    setFileName(changeNameOnly(getFileName(),file.getName()));
  }
 else {
    if (file.getParent() != null) {
      setRelativeFilePath(file.getParent() + getFileSeparator() + file.getName());
    }
 else {
      setRelativeFilePath(file.getName());
    }
  }
  if (absolute) {
    setAbsolute(true);
    setAbsoluteFilePath(file.getAbsolutePath());
  }
 else {
    setAbsolute(false);
    setAbsoluteFilePath(endpointPath + getFileSeparator() + getRelativeFilePath());
  }
  if (LOG.isDebugEnabled()) {
    LOG.debug("Name changed: " + this);
  }
}
