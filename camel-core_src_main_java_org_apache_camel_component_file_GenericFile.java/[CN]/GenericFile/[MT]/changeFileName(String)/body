{
  newName=needToNormalize() ? FileUtil.normalizePath(newName) : newName;
  boolean absolute=isAbsolutePath(newName);
  boolean nameChangeOnly=newName.indexOf(getFileSeparator()) == -1;
  File file=new File(newName);
  if (absolute) {
    setAbsolute(true);
    setFileName(file.getName());
    try {
      setCanonicalFileName(file.getCanonicalPath());
    }
 catch (    IOException e) {
    }
    setRelativeFileName(null);
    setAbsoluteFileName(file.getAbsolutePath());
  }
 else {
    setAbsolute(false);
    setFileName(file.getName());
    try {
      setCanonicalFileName(file.getCanonicalPath());
    }
 catch (    IOException e) {
    }
    if (nameChangeOnly) {
      setRelativeFileName(changeNameOnly(getRelativeFileName(),file.getName()));
    }
 else {
      if (file.getParent() != null) {
        setRelativeFileName(file.getParent() + getFileSeparator() + file.getName());
      }
 else {
        setRelativeFileName(file.getName());
      }
    }
    setAbsoluteFileName(endpointPath + getFileSeparator() + getRelativeFileName());
  }
}
