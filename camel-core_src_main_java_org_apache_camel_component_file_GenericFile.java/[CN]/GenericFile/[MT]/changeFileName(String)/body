{
  newName=needToNormalize() ? FileUtil.normalizePath(newName) : newName;
  boolean absolute=isAbsolutePath(newName);
  boolean nameChangeOnly=newName.indexOf(getFileSeparator()) == -1;
  File file=new File(newName);
  setFileNameOnly(file.getName());
  setFileName(file.getName());
  if (nameChangeOnly) {
    setRelativeFilePath(changeNameOnly(getRelativeFilePath(),file.getName()));
    setFileName(changeNameOnly(getFileName(),file.getName()));
  }
 else {
    if (file.getParent() != null) {
      setRelativeFilePath(file.getParent() + getFileSeparator() + file.getName());
    }
 else {
      setRelativeFilePath(file.getName());
    }
  }
  if (absolute) {
    setAbsolute(true);
    setAbsoluteFilePath(file.getAbsolutePath());
  }
 else {
    setAbsolute(false);
    setAbsoluteFilePath(endpointPath + getFileSeparator() + getRelativeFilePath());
  }
}
