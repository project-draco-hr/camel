{
  Endpoint endpoint=context.getEndpoint("http://localhost:9080/myapp/myservice");
  Exchange exchange=endpoint.createExchange();
  exchange.getIn().setBody("<order>123</order>");
  exchange.getIn().setHeader("user","Claus");
  exchange.getIn().setHeader("Content-Type","text/xml");
  if (usingGZip) {
    GZIPHelper.setGZIPMessageHeader(exchange.getIn());
  }
  template.send(endpoint,exchange);
  String body=exchange.getOut().getBody(String.class);
  System.out.print("The out message header is " + exchange.getOut().getHeaders());
  assertEquals("<order>OK</order>",body);
  assertEquals("Get a wrong content-type ",MessageHelper.getContentType(exchange.getOut()),"text/xml");
}
