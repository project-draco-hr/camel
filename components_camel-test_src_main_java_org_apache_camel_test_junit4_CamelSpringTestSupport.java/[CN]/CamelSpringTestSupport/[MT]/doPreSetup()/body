{
  if (!"true".equalsIgnoreCase(System.getProperty("skipStartingCamelContext"))) {
synchronized (lock) {
      System.setProperty("maybeStartCamelContext","false");
      if (isCreateCamelContextPerClass()) {
        applicationContext=threadAppContext.get();
        if (applicationContext == null) {
          applicationContext=createApplicationContext();
          threadAppContext.set(applicationContext);
        }
      }
 else {
        applicationContext=createApplicationContext();
      }
      assertNotNull("Should have created a valid spring context",applicationContext);
      System.clearProperty("maybeStartCamelContext");
    }
  }
 else {
    log.info("Skipping starting CamelContext as system property skipStartingCamelContext is set to be true.");
  }
}
