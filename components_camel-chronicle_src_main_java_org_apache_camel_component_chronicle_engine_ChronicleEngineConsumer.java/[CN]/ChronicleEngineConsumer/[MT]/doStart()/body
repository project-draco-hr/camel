{
  if (client != null) {
    throw new IllegalStateException("AssetTree already configured");
  }
  ChronicleEngineEndpoint endpoint=(ChronicleEngineEndpoint)getEndpoint();
  ChronicleEngineConfiguration conf=endpoint.getConfiguration();
  client=endpoint.createRemoteAssetTree();
  if (conf.isSubscribeMapEvents()) {
    client.registerSubscriber(endpoint.getPath(),MapEvent.class,new EngineMapEventListener(conf.getFilteredMapEvents()));
  }
  if (conf.isSubscribeTopologicalEvents()) {
    client.registerSubscriber(endpoint.getPath(),TopologicalEvent.class,new EngineTopologicalEventListener());
  }
  if (conf.isSubscribeTopicEvents()) {
    client.registerTopicSubscriber(endpoint.getPath(),Object.class,Object.class,new EngineTopicEventListener());
  }
}
