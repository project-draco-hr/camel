{
  Processor answer=processor;
  if (processor == null) {
    ObjectHelper.notNull(ref,"ref",this);
    answer=routeContext.lookup(getRef(),Processor.class);
    ObjectHelper.notNull(answer,"registry entry called " + getRef(),this);
  }
  if (!(answer instanceof Service)) {
    answer=new WrapProcessor(answer,answer);
  }
  return answer;
}
