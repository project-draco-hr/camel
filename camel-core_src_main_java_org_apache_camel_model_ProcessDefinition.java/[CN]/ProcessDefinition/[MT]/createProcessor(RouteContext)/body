{
  if (processor == null) {
    ObjectHelper.notNull(ref,"ref",this);
    processor=routeContext.lookup(getRef(),Processor.class);
    ObjectHelper.notNull(processor,"registry entry called " + getRef(),this);
  }
  if (!(processor instanceof Service)) {
    processor=new WrapProcessor(processor,processor);
  }
  return processor;
}
