{
  Processor answer=processor;
  if (processor == null) {
    ObjectHelper.notNull(ref,"ref",this);
    answer=routeContext.mandatoryLookup(getRef(),Processor.class);
  }
  if (!(answer instanceof Service)) {
    answer=new WrapProcessor(answer,answer);
  }
  return answer;
}
