{
  System.setProperty("CxfEndpointTest.port1",Integer.toString(port1));
  System.setProperty("CxfEndpointTest.port2",Integer.toString(port2));
  ClassPathXmlApplicationContext ctx=new ClassPathXmlApplicationContext(new String[]{"org/apache/camel/component/cxf/CxfEndpointBeans.xml"});
  CxfComponent cxfComponent=new CxfComponent(new SpringCamelContext(ctx));
  CxfSpringEndpoint endpoint=(CxfSpringEndpoint)cxfComponent.createEndpoint("cxf://bean:serviceEndpoint");
  ServerFactoryBean svf=new ServerFactoryBean();
  endpoint.configure(svf);
  assertEquals("Got the wrong endpoint address",svf.getAddress(),"http://localhost:" + port2 + "/helloworld");
  assertEquals("Got the wrong endpont service class",svf.getServiceClass().getCanonicalName(),"org.apache.camel.component.cxf.HelloService");
}
