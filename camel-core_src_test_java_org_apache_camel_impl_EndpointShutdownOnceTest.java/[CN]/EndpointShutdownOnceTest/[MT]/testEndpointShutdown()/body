{
  CamelContext context=new DefaultCamelContext();
  context.addComponent("my",new MyComponent());
  context.start();
  MyEndpoint my=context.getEndpoint("my:foo",MyEndpoint.class);
  assertTrue("Should be started",my.getStatus().isStarted());
  context.stop();
  assertFalse("Should not be started",my.getStatus().isStarted());
  assertTrue("Should be stopped",my.getStatus().isStopped());
  assertEquals("Should only shutdown once",1,my.getInvoked());
}
