{
  String uri=endpoint.getEndpointUri();
  try {
    uri=exchange.getContext().resolvePropertyPlaceholders(uri);
  }
 catch (  Exception e) {
    throw new RuntimeExchangeException("Cannot resolve property placeholders with uri: " + uri,exchange,e);
  }
  uri=UnsafeUriCharactersEncoder.encode(uri);
  return uri;
}
