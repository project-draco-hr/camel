{
  for (  Map.Entry<String,Object> entry : response.getAttributes().entrySet()) {
    if (!headerFilterStrategy.applyFilterToExternalHeaders(entry.getKey(),entry.getValue(),exchange)) {
      exchange.getOut().setHeader(entry.getKey(),entry.getValue());
      LOG.debug("Populate exchange from Restlet response header: {} value: {}",entry.getKey(),entry.getValue());
    }
  }
  int responseCode=response.getStatus().getCode();
  exchange.getOut().setHeader(Exchange.HTTP_RESPONSE_CODE,responseCode);
  exchange.getOut().setHeader(RestletConstants.RESTLET_RESPONSE,response);
  if (response.getEntity() != null) {
    MediaType mediaType=response.getEntity().getMediaType();
    if (mediaType != null) {
      exchange.getOut().setHeader(Exchange.CONTENT_TYPE,mediaType.toString());
    }
    String text=response.getEntity().getText();
    LOG.debug("Populate exchange from Restlet response: {}",text);
    exchange.getOut().setBody(text);
  }
}
