{
  for (  Map.Entry<String,Object> entry : response.getAttributes().entrySet()) {
    if (!headerFilterStrategy.applyFilterToExternalHeaders(entry.getKey(),entry.getValue(),exchange)) {
      exchange.getOut().setHeader(entry.getKey(),entry.getValue());
      if (LOG.isDebugEnabled()) {
        LOG.debug("Populate exchange from Restlet response header: " + entry.getKey() + " value: "+ entry.getValue());
      }
    }
  }
  int responseCode=response.getStatus().getCode();
  exchange.getOut().setHeader(Exchange.HTTP_RESPONSE_CODE,responseCode);
  MediaType mediaType=response.getEntity().getMediaType();
  if (mediaType != null) {
    exchange.getOut().setHeader(Exchange.CONTENT_TYPE,mediaType.toString());
  }
  String text=response.getEntity().getText();
  if (LOG.isDebugEnabled()) {
    LOG.debug("Populate exchange from Restlet response: " + text);
  }
  exchange.getOut().setBody(text);
}
