{
  ObjectHelper.notNull(definition,"definition");
  Long id=definition.getId();
  if (id == null) {
    LOG.warn("No primary key is available!");
    return findOrCreateProcessDefinition(template,definition.getName());
  }
  EntityManager entityManager=null;
  try {
    entityManager=resolveEntityManager(template.getEntityManagerFactory());
    definition=entityManager.find(ProcessDefinition.class,id);
  }
  finally {
    closeNonTransactionalEntityManager(entityManager);
  }
  return definition;
}
