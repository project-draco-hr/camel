{
  final GenericFileEndpoint endpoint;
  endpoint=buildFileEndpoint(uri);
  String sortBy=getAndRemoveParameter(parameters,"sortBy",String.class);
  if (isNotEmpty(sortBy) && !isReferenceParameter(sortBy)) {
    String[] groups=sortBy.split(";");
    Iterator<String> it=ObjectHelper.createIterator(groups);
    Comparator<GenericFileExchange> comparator=createSortByComparator(it);
    endpoint.setSortBy(comparator);
  }
  setProperties(endpoint.getConfiguration(),parameters);
  setProperties(endpoint,parameters);
  return endpoint;
}
