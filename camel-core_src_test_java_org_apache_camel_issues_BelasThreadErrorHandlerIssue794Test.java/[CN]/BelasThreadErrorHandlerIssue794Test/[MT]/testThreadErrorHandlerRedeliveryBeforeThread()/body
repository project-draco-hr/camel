{
  counter=0;
  MockEndpoint mock=getMockEndpoint("mock:beforeThread");
  mock.expectedMessageCount(1);
  mock.message(0).header("org.apache.camel.Redelivered").isEqualTo(Boolean.TRUE);
  mock.message(0).header("org.apache.camel.RedeliveryCounter").isEqualTo(2);
  try {
    template.sendBody("direct:inBeforeThread","Hello World");
    fail("Should have thrown a RuntimeCamelException");
  }
 catch (  RuntimeCamelException e) {
    assertEquals("Forced exception by unit test",e.getCause().getMessage());
  }
  mock.assertIsSatisfied();
}
