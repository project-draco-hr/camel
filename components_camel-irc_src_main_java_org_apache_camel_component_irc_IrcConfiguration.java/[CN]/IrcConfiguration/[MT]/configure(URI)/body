{
  String fixedUri=uri.toString();
  if (fixedUri.startsWith("ircs")) {
    setUsingSSL(true);
    if (!fixedUri.startsWith("ircs://")) {
      fixedUri=fixedUri.replace("ircs:","ircs://");
    }
  }
 else   if (!fixedUri.startsWith("irc://")) {
    fixedUri=fixedUri.replace("irc:","irc://");
  }
  uri=uri.resolve(fixedUri);
  setNickname(uri.getUserInfo());
  setUsername(uri.getUserInfo());
  setRealname(uri.getUserInfo());
  setHostname(uri.getHost());
  if (uri.getFragment() == null || uri.getFragment().length() == 0) {
    throw new RuntimeCamelException("The IRC channel name is required but not configured");
  }
  String channel=uri.getFragment();
  if (channel.contains("?")) {
    channel=ObjectHelper.before(uri.getFragment(),"?");
  }
  setTarget("#" + channel);
}
