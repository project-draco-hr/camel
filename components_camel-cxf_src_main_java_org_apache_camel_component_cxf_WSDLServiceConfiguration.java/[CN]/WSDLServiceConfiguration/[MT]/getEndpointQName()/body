{
  if (endpointQName == null) {
    Service service=getDefinition().getService(serviceFactoryBean.getServiceQName());
    if (service == null) {
      throw new IllegalArgumentException("There is no service " + serviceFactoryBean.getServiceQName() + " in WSDL "+ serviceFactoryBean.getWsdlURL());
    }
    Map<String,?> ports=CastUtils.cast(service.getPorts());
    if (ports.size() == 0) {
      throw new IllegalArgumentException("There is no port/endpoint in the service " + serviceFactoryBean.getServiceQName() + "of WSDL"+ serviceFactoryBean.getWsdlURL());
    }
    if (ports.size() > 1) {
      throw new IllegalArgumentException("Port/endpoint name must be specified, There is more than one port in the service" + serviceFactoryBean.getServiceQName() + " of the WSDL"+ serviceFactoryBean.getWsdlURL());
    }
    endpointQName=new QName(service.getQName().getNamespaceURI(),ports.keySet().iterator().next());
  }
  return endpointQName;
}
