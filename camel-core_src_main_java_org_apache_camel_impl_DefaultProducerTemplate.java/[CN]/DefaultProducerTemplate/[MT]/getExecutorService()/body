{
  if (!isStarted()) {
    throw new IllegalStateException("ProducerTemplate has not been started");
  }
  if (executor != null) {
    return executor;
  }
synchronized (this) {
    if (executor != null) {
      return executor;
    }
    executor=context.getExecutorServiceStrategy().newDefaultThreadPool(this,"ProducerTemplate");
  }
  ObjectHelper.notNull(executor,"ExecutorService");
  return executor;
}
