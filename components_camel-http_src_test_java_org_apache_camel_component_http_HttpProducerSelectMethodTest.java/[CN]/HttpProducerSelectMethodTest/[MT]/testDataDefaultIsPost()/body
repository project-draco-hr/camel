{
  HttpComponent component=new HttpComponent();
  component.setCamelContext(context);
  HttpEndpoint endpoiont=(HttpEndpoint)component.createEndpoint("http://www.google.com","",Collections.EMPTY_MAP);
  MyHttpProducer producer=new MyHttpProducer(endpoiont,"POST",null);
  HttpExchange exchange=producer.createExchange();
  exchange.getIn().setBody("This is some data to post");
  try {
    producer.process(exchange);
    fail("Should have thrown HttpOperationFailedException");
  }
 catch (  HttpOperationFailedException e) {
    assertEquals(500,e.getStatusCode());
  }
  producer.stop();
}
