{
  Exchange exchange=new DefaultExchange(context);
  exchange.getIn().setBody("Hello World");
  exchange.getIn().setHeader("name","Olivier");
  exchange.getIn().setHeader("number",123);
  exchange.setProperty("quote","Camel rocks");
  Date now=new Date();
  exchange.getIn().setHeader("date",now);
  repo.add(context,"foo",exchange);
  Exchange actual=repo.get(context,"foo");
  assertEquals("Hello World",actual.getIn().getBody());
  assertEquals("Olivier",actual.getIn().getHeader("name"));
  assertEquals(123,actual.getIn().getHeader("number"));
  Date date=actual.getIn().getHeader("date",Date.class);
  assertNotNull(date);
  assertEquals(now.getTime(),date.getTime());
  assertNull(actual.getProperty("quote"));
  assertSame(context,actual.getContext());
  exchange.getIn().setBody("Bye World");
  exchange.getIn().setHeader("name","Thomas");
  exchange.getIn().removeHeader("date");
  repo.add(context,"foo",exchange);
  actual=repo.get(context,"foo");
  assertEquals("Bye World",actual.getIn().getBody());
  assertEquals("Thomas",actual.getIn().getHeader("name"));
  assertEquals(123,actual.getIn().getHeader("number"));
  date=actual.getIn().getHeader("date",Date.class);
  assertNull(date);
  assertSame(context,actual.getContext());
}
