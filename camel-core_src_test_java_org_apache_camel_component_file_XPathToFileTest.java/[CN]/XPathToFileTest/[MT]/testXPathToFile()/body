{
  MockEndpoint mock=getMockEndpoint("mock:result");
  mock.expectedMessageCount(2);
  String xml="<foo><person>Claus</person><person>Jonathan</person></foo>";
  Document doc=context.getTypeConverter().convertTo(Document.class,xml);
  template.sendBody("direct:start",doc);
  assertMockEndpointsSatisfied();
  File first=new File("target/xpath/xpath-0.xml").getAbsoluteFile();
  assertTrue("File xpath-0.xml should exists",first.exists());
  assertEquals("Claus",context.getTypeConverter().convertTo(String.class,first));
  File second=new File("target/xpath/xpath-1.xml").getAbsoluteFile();
  assertTrue("File xpath-1.xml should exists",second.exists());
  assertEquals("Jonathan",context.getTypeConverter().convertTo(String.class,second));
}
