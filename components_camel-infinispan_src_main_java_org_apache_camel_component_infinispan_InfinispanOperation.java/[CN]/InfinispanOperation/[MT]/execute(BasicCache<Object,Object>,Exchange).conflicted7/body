{
  Object result;
  if (!ObjectHelper.isEmpty(exchange.getIn().getHeader(InfinispanConstants.LIFESPAN_TIME)) && !ObjectHelper.isEmpty(exchange.getIn().getHeader(InfinispanConstants.LIFESPAN_TIME_UNIT))) {
    long lifespan=(long)exchange.getIn().getHeader(InfinispanConstants.LIFESPAN_TIME);
    String timeUnit=(String)exchange.getIn().getHeader(InfinispanConstants.LIFESPAN_TIME_UNIT);
    if (!ObjectHelper.isEmpty(exchange.getIn().getHeader(InfinispanConstants.MAX_IDLE_TIME)) && !ObjectHelper.isEmpty(exchange.getIn().getHeader(InfinispanConstants.MAX_IDLE_TIME_UNIT))) {
      long maxIdle=(long)exchange.getIn().getHeader(InfinispanConstants.MAX_IDLE_TIME);
      String maxIdleTimeUnit=(String)exchange.getIn().getHeader(InfinispanConstants.MAX_IDLE_TIME_UNIT);
      cache.putAll(getMap(exchange),lifespan,TimeUnit.valueOf(timeUnit),maxIdle,TimeUnit.valueOf(maxIdleTimeUnit));
    }
 else {
      cache.putAll(getMap(exchange),lifespan,TimeUnit.valueOf(timeUnit));
    }
  }
 else {
    cache.putAll(getMap(exchange));
  }
}
