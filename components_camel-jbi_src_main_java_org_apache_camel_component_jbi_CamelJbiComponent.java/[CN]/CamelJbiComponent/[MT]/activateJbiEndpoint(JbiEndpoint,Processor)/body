{
  CamelJbiEndpoint jbiEndpoint;
  String endpointUri=camelEndpoint.getEndpointUri();
  if (endpointUri.startsWith("endpoint:")) {
    String uri=endpointUri.substring("endpoint:".length());
    String[] parts=new String[0];
    try {
      parts=URIResolver.split3(uri);
    }
 catch (    IllegalArgumentException e) {
      throw new IllegalArgumentException("Expected syntax endpoint:[serviceNamespace]:[serviceName]:[endpointName] but was given: " + endpointUri + ". Cause: "+ e,e);
    }
    QName service=new QName(parts[0],parts[1]);
    String endpoint=parts[2];
    jbiEndpoint=new CamelJbiEndpoint(getServiceUnit(),service,endpoint,camelEndpoint,getBinding(),processor);
  }
 else {
    jbiEndpoint=new CamelJbiEndpoint(getServiceUnit(),camelEndpoint,getBinding(),processor);
  }
  addEndpoint(jbiEndpoint);
  return jbiEndpoint;
}
