{
  mapper=new DozerBeanMapper();
  InputStream mapStream=null;
  try {
    LOG.info("Loading Dozer mapping file {}.",configuration.getMappingFile());
    mapStream=ResourceHelper.resolveResourceAsInputStream(getCamelContext().getClassResolver(),configuration.getMappingFile());
    if (mapStream == null) {
      throw new Exception("Unable to resolve Dozer config: " + configuration.getMappingFile());
    }
    mapper.addMapping(mapStream);
    Map<String,CustomConverter> converters=new HashMap<String,CustomConverter>();
    converters.put(CUSTOM_MAPPING_ID,customMapper);
    converters.put(LITERAL_MAPPING_ID,literalMapper);
    converters.putAll(mapper.getCustomConvertersWithId());
    mapper.setCustomConvertersWithId(converters);
  }
  finally {
    if (mapStream != null) {
      mapStream.close();
    }
  }
}
