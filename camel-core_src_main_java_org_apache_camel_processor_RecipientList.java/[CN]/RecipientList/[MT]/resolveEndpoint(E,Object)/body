{
  Endpoint<E> endpoint;
  if (recipient instanceof Endpoint) {
    endpoint=(Endpoint<E>)recipient;
  }
 else {
    String uri=recipient.toString();
    endpoint=(Endpoint<E>)exchange.getContext().resolveEndpoint(uri);
    if (endpoint == null) {
      throw new NoSuchEndpointException(uri);
    }
  }
  return endpoint;
}
