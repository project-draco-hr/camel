{
  ExecutorService service=Executors.newFixedThreadPool(20);
  List<Callable<Object>> tasks=new ArrayList<Callable<Object>>();
  for (int i=0; i < size; i++) {
    final int id=i % 5;
    final int count=i;
    tasks.add(new Callable<Object>(){
      public Object call() throws Exception {
        template.sendBodyAndHeader(uri,"" + count,"id",id);
        return null;
      }
    }
);
  }
  MockEndpoint mock=getMockEndpoint("mock:result");
  mock.expectedMessageCount(5);
  service.invokeAll(tasks);
  assertMockEndpointsSatisfied();
  service.shutdownNow();
}
