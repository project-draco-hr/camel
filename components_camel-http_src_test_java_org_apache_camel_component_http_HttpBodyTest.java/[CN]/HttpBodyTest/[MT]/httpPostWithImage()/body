{
  Map<String,String> expectedHeaders=new HashMap<String,String>();
  expectedHeaders.put("Content-Type","image/jpeg");
  localServer.register("/",new HeaderValidationHandler("POST",null,null,getExpectedContent(),expectedHeaders));
  Exchange exchange=template.send("http://" + getHostName() + ":"+ getPort()+ "/",new Processor(){
    public void process(    Exchange exchange) throws Exception {
      exchange.getIn().setBody(new File("src/test/data/logo.jpeg"));
      exchange.getIn().setHeader("Content-Type","image/jpeg");
    }
  }
);
  assertExchange(exchange);
}
