{
  expectsMessageCount(2,result);
  result.whenAnyExchangeReceived(new Processor(){
    @Override public void process(    Exchange exchange) throws Exception {
      exchange.setException(new MyCustomException());
    }
  }
);
  Exchange exchangeOne=sendMessage("direct:start","message one");
  Exchange exchangeTwo=sendMessage("direct:start","message two");
  Exchange exchangeThree=sendMessage("direct:start","message three");
  assertMockEndpointsSatisfied();
  assertTrue(exchangeOne.getException() instanceof MyCustomException);
  assertTrue(exchangeTwo.getException() instanceof MyCustomException);
  assertTrue(exchangeThree.getException() instanceof RejectedExecutionException);
}
