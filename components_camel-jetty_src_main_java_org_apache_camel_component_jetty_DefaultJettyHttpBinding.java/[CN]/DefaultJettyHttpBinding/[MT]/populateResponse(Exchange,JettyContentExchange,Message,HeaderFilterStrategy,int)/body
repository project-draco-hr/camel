{
  Message answer=exchange.getOut();
  answer.setHeader(Exchange.HTTP_RESPONSE_CODE,responseCode);
  Enumeration<String> names=httpExchange.getResponseFields().getFieldNames();
  while (names.hasMoreElements()) {
    String name=names.nextElement();
    Enumeration<String> values=httpExchange.getResponseFields().getValues(name);
    while (values.hasMoreElements()) {
      String value=values.nextElement();
      if (name.toLowerCase().equals("content-type")) {
        name=Exchange.CONTENT_TYPE;
        exchange.setProperty(Exchange.CHARSET_NAME,IOHelper.getCharsetNameFromContentType(value));
      }
      if (strategy != null && !strategy.applyFilterToExternalHeaders(name,value,exchange)) {
        HttpHelper.appendHeader(answer.getHeaders(),name,value);
      }
    }
  }
  MessageHelper.copyHeaders(exchange.getIn(),answer,false);
  answer.setBody(extractResponseBody(exchange,httpExchange));
}
