{
  if (!this.initialized) {
    try {
      this.afterPropertiesSet();
    }
 catch (    Exception e) {
      throw new ConfigurationException("unable to initialize " + this.getClass().getName(),e);
    }
  }
  if (!isExpectReply()) {
    boolean sent=this.requestReplyTemplate.send(message);
    if (!sent && logger.isWarnEnabled()) {
      logger.warn("failed to send message to channel within timeout");
    }
    return null;
  }
  return this.requestReplyTemplate.request(message);
}
