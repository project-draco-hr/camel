{
  try {
    output.process(exchange);
  }
 catch (  Exception e) {
    exchange.setException(e);
  }
  boolean handle=true;
  if (exchange.isTransacted() && !supportTransacted()) {
    handle=false;
    if (log.isDebugEnabled()) {
      log.debug("This error handler does not support transacted exchanges." + " Bypassing this error handler: " + this + " for exchangeId: "+ exchange.getExchangeId());
    }
  }
  if (handle && exchange.getException() != null && !ExchangeHelper.isFailureHandled(exchange)) {
    handleException(exchange);
  }
}
