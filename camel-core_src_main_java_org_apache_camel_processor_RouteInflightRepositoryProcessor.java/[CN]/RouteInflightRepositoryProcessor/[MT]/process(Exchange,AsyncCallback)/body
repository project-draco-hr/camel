{
  inflightRepository.add(exchange,id);
  boolean sync=processor.process(exchange,new AsyncCallback(){
    public void done(    boolean doneSync){
      try {
        inflightRepository.remove(exchange,id);
      }
  finally {
        callback.done(doneSync);
      }
    }
  }
);
  return sync;
}
