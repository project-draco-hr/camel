{
  CamelContext context=new DefaultCamelContext();
  context.start();
  message=new DefaultExchange(context).getIn();
  Message source=message;
  Message target=message.getExchange().getOut();
  DefaultHeaderFilterStrategy headerFilterStrategy=new DefaultHeaderFilterStrategy();
  headerFilterStrategy.setOutFilterPattern("foo");
  source.setHeader("foo",123);
  source.setHeader("bar",456);
  target.setHeader("bar","yes");
  MessageHelper.copyHeaders(source,target,headerFilterStrategy,true);
  assertEquals(null,target.getHeader("foo"));
  assertEquals(456,target.getHeader("bar"));
  context.stop();
}
