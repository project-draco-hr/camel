{
  JAXBContext jaxb=JAXBContext.newInstance(MessageDump.class);
  Unmarshaller unmarshaller=jaxb.createUnmarshaller();
  CamelContext context=new DefaultCamelContext();
  context.start();
  message=new DefaultExchange(context).getIn();
  message.setBody("Hello World");
  message.setHeader("foo",123);
  String out=MessageHelper.dumpAsXml(message,true);
  MessageDump dump=(MessageDump)unmarshaller.unmarshal(new StringReader(out));
  assertNotNull(dump);
  assertEquals("java.lang.String",dump.getBody().getType());
  assertEquals("Hello World",dump.getBody().getValue());
  assertEquals(1,dump.getHeaders().size());
  assertEquals("foo",dump.getHeaders().get(0).getKey());
  assertEquals("java.lang.Integer",dump.getHeaders().get(0).getType());
  assertEquals("123",dump.getHeaders().get(0).getValue());
}
