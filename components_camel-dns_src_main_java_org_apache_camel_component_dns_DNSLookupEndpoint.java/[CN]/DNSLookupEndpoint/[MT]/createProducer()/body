{
  return new DefaultProducer(this){
    public void process(    Exchange exchange) throws Exception {
      Object name=exchange.getIn().getHeader(DNS_NAME);
      if (name == null || "".equals(name)) {
        throw new IllegalArgumentException("name is null or empty");
      }
      String dns_name=String.valueOf(name);
      Object type=exchange.getIn().getHeader(DNS_TYPE);
      Integer dns_type=null;
      if (type != null) {
        dns_type=Type.value(String.valueOf(type));
      }
      Object dclass=exchange.getIn().getHeader(DNS_CLASS);
      Integer dns_class=null;
      if (dclass != null) {
        dns_class=DClass.value(String.valueOf(dclass));
      }
      Lookup lookup=null;
      if (dns_type != null && dns_class != null) {
        lookup=new Lookup(dns_name,dns_type,dns_class);
      }
 else       if (dns_type != null) {
        lookup=new Lookup(dns_name,dns_type);
      }
 else {
        lookup=new Lookup(dns_name);
      }
      lookup.run();
      if (lookup.getAnswers() != null) {
        exchange.getOut().setBody(lookup.getAnswers());
      }
 else {
        exchange.getOut().setBody(lookup.getErrorString());
      }
    }
  }
;
}
