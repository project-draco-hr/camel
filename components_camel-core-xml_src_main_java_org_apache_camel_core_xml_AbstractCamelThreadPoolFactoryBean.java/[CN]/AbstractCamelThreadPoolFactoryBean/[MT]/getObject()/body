{
  int size=CamelContextHelper.parseInteger(getCamelContext(),poolSize);
  if (size <= 0) {
    throw new IllegalArgumentException("PoolSize must be a positive number");
  }
  int max=size;
  if (maxPoolSize != null) {
    max=CamelContextHelper.parseInteger(getCamelContext(),maxPoolSize);
  }
  long keepAlive=60;
  if (keepAliveTime != null) {
    keepAlive=CamelContextHelper.parseLong(getCamelContext(),keepAliveTime);
  }
  int queueSize=-1;
  if (maxQueueSize != null) {
    queueSize=CamelContextHelper.parseInteger(getCamelContext(),maxQueueSize);
  }
  ThreadPoolProfile profile=new ThreadPoolProfileBuilder(getId()).poolSize(size).maxPoolSize(max).keepAliveTime(keepAlive,timeUnit).maxQueueSize(queueSize).rejectedPolicy(rejectedPolicy).build();
  ExecutorService answer=getCamelContext().getExecutorServiceManager().newThreadPool(getId(),getThreadName(),profile);
  return answer;
}
