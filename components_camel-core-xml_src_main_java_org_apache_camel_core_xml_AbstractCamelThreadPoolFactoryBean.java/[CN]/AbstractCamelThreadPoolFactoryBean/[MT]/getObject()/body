{
  int size=CamelContextHelper.parseInteger(getCamelContext(),poolSize);
  if (size <= 0) {
    throw new IllegalArgumentException("PoolSize must be a positive number");
  }
  int max=size;
  if (maxPoolSize != null) {
    max=CamelContextHelper.parseInteger(getCamelContext(),maxPoolSize);
  }
  long keepAlive=60;
  if (keepAliveTime != null) {
    keepAlive=CamelContextHelper.parseLong(getCamelContext(),keepAliveTime);
  }
  int queueSize=-1;
  if (maxQueueSize != null) {
    queueSize=CamelContextHelper.parseInteger(getCamelContext(),maxQueueSize);
  }
  ExecutorService answer=new ThreadPoolBuilder(getCamelContext()).poolSize(size).maxPoolSize(max).keepAliveTime(keepAlive,getTimeUnit()).maxQueueSize(queueSize).rejectedPolicy(getRejectedPolicy()).build(getId(),getThreadName());
  return answer;
}
