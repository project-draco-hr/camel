{
  GoogleOAuthParameters params=binding.writeRequest(endpoint,exchange,null);
  params.setOAuthToken("testToken");
  params.setOAuthTokenSecret("testTokenSecret");
  binding.readResponse(endpoint,exchange,params);
  String redirectUrl="https://www.google.com/accounts/OAuthAuthorizeToken" + "?oauth_token=testToken" + "&oauth_callback=http%3A%2F%2Ftest.example.org%2Fhandler";
  String secretCookie="gauth-token-secret=testTokenSecret";
  assertEquals(302,exchange.getOut().getHeader(Exchange.HTTP_RESPONSE_CODE));
  assertEquals(redirectUrl,exchange.getOut().getHeader("Location"));
  assertEquals(secretCookie,exchange.getOut().getHeader("Set-Cookie"));
}
