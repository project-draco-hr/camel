{
  assertEquals(0,mMonitorSink.getReceivedCounter());
  mMonitorSink.setExpectedMessageCount(1);
  getMockEndpoint().setExpectedMessageCount(2);
  ISimpleMXBean simpleBean=getSimpleMXBean();
  simpleBean.setStringValue("foo");
  simpleBean.setStringValue("bar");
  waitForMessages();
  assertTrue("messages didn't arrive within timeout",mMonitorSink.await(10,TimeUnit.SECONDS));
  Document monitorBody=XmlFixture.toDoc(mMonitorSink.getReceivedExchanges().get(0).getIn().getBody(String.class));
  monitorBody=XmlFixture.stripTimestamp(monitorBody);
  XmlFixture.assertXMLIgnorePrefix("failed to match",XmlFixture.toDoc(new File("src/test/resources/consumer-test/monitorNotification.xml")),monitorBody);
}
