{
  NotifyBuilder notify=new NotifyBuilder(context).whenDone(2).wereSentTo("log:beer").create();
  log.info("================ direct:bar =============");
  template.sendBody("direct:bar","A");
  assertEquals(false,notify.matches());
  log.info("================ direct:beer =============");
  template.sendBody("direct:beer","B");
  assertEquals(false,notify.matches());
  log.info("================ direct:bar =============");
  template.sendBody("direct:bar","C");
  assertEquals(false,notify.matches());
  log.info("================ direct:bar =============");
  template.sendBody("direct:bar","D");
  assertEquals(false,notify.matches());
  log.info("================ direct:cake =============");
  template.sendBody("direct:cake","E");
  assertEquals(false,notify.matches());
  log.info("================ direct:beer =============");
  template.sendBody("direct:beer","F");
  assertEquals(true,notify.matches());
}
