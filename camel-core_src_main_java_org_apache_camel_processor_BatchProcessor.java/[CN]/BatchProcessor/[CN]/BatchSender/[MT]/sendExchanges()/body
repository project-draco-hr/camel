{
  queue.drainTo(collection,batchSize);
  Iterator<Exchange> iter=collection.iterator();
  while (iter.hasNext()) {
    Exchange exchange=iter.next();
    iter.remove();
    processExchange(exchange);
  }
}
