{
  CamelContext container=new DefaultCamelContext<Exchange>();
  PojoComponent component=new PojoComponent();
  component.registerPojo("hello",new SayService("Hello!"));
  component.registerPojo("bye",new SayService("Good Bye!"));
  container.addComponent("default",component);
  final AtomicInteger hitCount=new AtomicInteger();
  final InterceptorProcessor<PojoExchange> tracingInterceptor=new InterceptorProcessor<PojoExchange>(){
    @Override public void onExchange(    PojoExchange exchange){
      super.onExchange(exchange);
      hitCount.incrementAndGet();
    }
  }
;
  container.setRoutes(new RouteBuilder(){
    public void configure(){
      from("pojo:default:hello").intercept(tracingInterceptor).target().to("pojo:default:bye");
    }
  }
);
  container.activateEndpoints();
  PojoEndpoint endpoint=(PojoEndpoint)container.resolveEndpoint("pojo:default:hello");
  ISay proxy=(ISay)endpoint.createInboundProxy(new Class[]{ISay.class});
  String rc=proxy.say();
  assertEquals("Good Bye!",rc);
  try {
    endpoint=(PojoEndpoint)container.resolveEndpoint("pojo:default:bye");
    proxy=(ISay)endpoint.createInboundProxy(new Class[]{ISay.class});
    rc=proxy.say();
    assertEquals("Hello!",rc);
  }
 catch (  IllegalArgumentException expected) {
  }
  container.deactivateEndpoints();
}
