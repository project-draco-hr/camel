{
  CamelContext container=new DefaultCamelContext();
  PojoComponent component=new PojoComponent();
  component.registerPojo("hello",new SayService("Hello!"));
  component.registerPojo("bye",new SayService("Good Bye!"));
  container.addComponent("default",component);
  final AtomicInteger hitCount=new AtomicInteger();
  final InterceptorProcessor<PojoExchange> tracingInterceptor=new InterceptorProcessor<PojoExchange>(){
    @Override public void onExchange(    PojoExchange exchange){
      super.onExchange(exchange);
      hitCount.incrementAndGet();
    }
  }
;
  container.addRoutes(new RouteBuilder(){
    public void configure(){
      from("pojo:default:hello").intercept(tracingInterceptor).target().to("pojo:default:bye");
    }
  }
);
  container.activateEndpoints();
  container.deactivateEndpoints();
}
