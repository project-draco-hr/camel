{
  final String xml="<Person><firstName>FOO</firstName><lastName>BAR</lastName></Person>";
  PersonType expected=new PersonType();
  expected.setFirstName("FOO");
  expected.setLastName("BAR");
  MockEndpoint resultEndpoint=resolveMandatoryEndpoint("mock:result",MockEndpoint.class);
  resultEndpoint.expectedBodiesReceived(expected);
  resultEndpoint.expectedHeaderReceived("foo","bar");
  template.sendBodyAndHeader("direct:getJAXBElementValue",xml,"foo","bar");
  resultEndpoint.assertIsSatisfied();
  resultEndpoint.reset();
  resultEndpoint.expectedMessageCount(1);
  template.sendBody("direct:getJAXBElement",xml);
  resultEndpoint.assertIsSatisfied();
  assertTrue("We should get the JAXBElement here",resultEndpoint.getExchanges().get(0).getIn().getBody() instanceof JAXBElement);
  resultEndpoint.reset();
  resultEndpoint.expectedMessageCount(1);
  resultEndpoint.expectedBodiesReceived(expected);
  template.sendBody("direct:unmarshall",xml);
  resultEndpoint.assertIsSatisfied();
}
