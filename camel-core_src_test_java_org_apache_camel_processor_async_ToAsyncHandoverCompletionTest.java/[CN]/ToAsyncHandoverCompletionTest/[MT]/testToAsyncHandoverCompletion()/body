{
  deleteDirectory("target/toasync");
  MockEndpoint mock=getMockEndpoint("mock:result");
  mock.expectedBodiesReceived("Bye World");
  mock.expectedFileExists("target/toasync/done/hello.txt");
  template.sendBodyAndHeader("file://target/toasync","World",Exchange.FILE_NAME,"hello.txt");
  Thread.sleep(1000);
  File target=new File("target/toasync/hello.txt").getAbsoluteFile();
  assertEquals(true,target.exists());
  assertMockEndpointsSatisfied();
}
