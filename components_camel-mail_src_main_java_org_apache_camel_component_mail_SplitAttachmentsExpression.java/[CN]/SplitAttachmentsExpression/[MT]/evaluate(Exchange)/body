{
  if (exchange.getIn().getAttachments().isEmpty()) {
    return null;
  }
  List<Message> answer=new ArrayList<Message>();
  for (  Map.Entry<String,DataHandler> entry : exchange.getIn().getAttachments().entrySet()) {
    final Message copy=exchange.getIn().copy();
    final String key=entry.getKey();
    Map<String,DataHandler> attachments=copy.getAttachments();
    attachments.clear();
    attachments.put(key,entry.getValue());
    copy.setHeader("CamelSplitAttachmentId",key);
    answer.add(copy);
  }
  return answer;
}
