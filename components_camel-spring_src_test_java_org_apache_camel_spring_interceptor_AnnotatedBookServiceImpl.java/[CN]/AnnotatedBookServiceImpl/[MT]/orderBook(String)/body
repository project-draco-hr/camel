{
  Transactional tx=this.getClass().getAnnotation(Transactional.class);
  if (tx == null) {
    throw new IllegalArgumentException("Spring annotation-driven should have instrumented this class as @Transactional");
  }
  if (!"REQUIRED".equals(tx.propagation().name())) {
    throw new IllegalArgumentException("Should be REQUIRED propagation");
  }
  if (title.startsWith("Donkey")) {
    throw new IllegalArgumentException("We don't have Donkeys, only Camels");
  }
  new SimpleJdbcTemplate(dataSource).update("insert into books (title) values (?)",title);
  template.sendBody(title);
}
