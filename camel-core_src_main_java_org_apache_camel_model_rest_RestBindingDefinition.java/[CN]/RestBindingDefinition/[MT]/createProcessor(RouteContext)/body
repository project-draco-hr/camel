{
  if (ObjectHelper.isEmpty(type) && ObjectHelper.isEmpty(classType)) {
    throw new IllegalArgumentException("Type must be configured on " + this);
  }
  CamelContext context=routeContext.getCamelContext();
  String name=jsonDataFormat;
  if (name == null) {
    name="json-jackson";
  }
  DataFormat json=context.resolveDataFormat(name);
  if (json == null) {
    throw new IllegalArgumentException("DataFormat " + name + " not found.");
  }
  if (classType == null && type != null) {
    classType=context.getClassResolver().resolveMandatoryClass(type);
  }
  if (classType != null) {
    IntrospectionSupport.setProperty(context.getTypeConverter(),json,"unmarshalType",classType);
  }
  context.addService(json);
  name=xmlDataFormat;
  if (name == null) {
    name="jaxb";
  }
  DataFormat jaxb=context.resolveDataFormat(name);
  if (jaxb == null) {
    throw new IllegalArgumentException("DataFormat " + name + " not found.");
  }
  if (classType == null && type != null) {
    classType=context.getClassResolver().resolveMandatoryClass(type);
  }
  if (classType != null) {
    JAXBContext jc=JAXBContext.newInstance(classType);
    IntrospectionSupport.setProperty(context.getTypeConverter(),jaxb,"context",jc);
  }
  context.addService(jaxb);
  return new RestBindingProcessor(json,jaxb);
}
