{
  if (predicate instanceof SimpleBuilder) {
    SimpleBuilder builder=(SimpleBuilder)predicate;
    SimpleExpression answer=new SimpleExpression(builder);
    answer.setExpression(builder.getText());
    return answer;
  }
 else   if (predicate instanceof XPathBuilder) {
    XPathBuilder builder=(XPathBuilder)predicate;
    XPathExpression answer=new XPathExpression(builder);
    answer.setExpression(builder.getText());
    return answer;
  }
 else   if (predicate instanceof ValueBuilder) {
    ValueBuilder builder=(ValueBuilder)predicate;
    Expression expression=builder.getExpression();
    if (expression instanceof Predicate) {
      predicate=(Predicate)expression;
    }
  }
  if (predicate instanceof ExpressionDefinition) {
    return (ExpressionDefinition)predicate;
  }
  return new ExpressionDefinition(predicate);
}
