{
  getMockEndpoint("mock:result").expectedMessageCount(0);
  template.sendBodyAndHeader(getFtpUrl(),"Hello World",Exchange.FILE_NAME,"hello.txt");
  Thread.sleep(1000);
  assertMockEndpointsSatisfied();
  resetMocks();
  getMockEndpoint("mock:result").expectedBodiesReceived("Hello World");
  template.sendBodyAndHeader(getFtpUrl(),"",Exchange.FILE_NAME,"done");
  assertMockEndpointsSatisfied();
  Thread.sleep(1000);
  File file=new File(FTP_ROOT_DIR + "done/done").getAbsoluteFile();
  assertFalse("Done file should be deleted: " + file,file.exists());
}
