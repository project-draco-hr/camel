{
  Map<String,Object> headers=new HashMap<String,Object>();
  headers.put(SAMPLE_MESSAGE_HEADER_NAME_1,SAMPLE_MESSAGE_HEADER_VALUE_1);
  headers.put(SAMPLE_MESSAGE_HEADER_NAME_2,SAMPLE_MESSAGE_HEADER_VALUE_2);
  headers.put(SAMPLE_MESSAGE_HEADER_NAME_3,SAMPLE_MESSAGE_HEADER_VALUE_3);
  when(inMessage.getHeaders()).thenReturn(headers);
  underTest.process(exchange);
  ArgumentCaptor<SendMessageRequest> capture=ArgumentCaptor.forClass(SendMessageRequest.class);
  verify(amazonSQSClient).sendMessage(capture.capture());
  assertEquals(SAMPLE_MESSAGE_HEADER_VALUE_1,capture.getValue().getMessageAttributes().get(SAMPLE_MESSAGE_HEADER_NAME_1).getStringValue());
  assertEquals(SAMPLE_MESSAGE_HEADER_VALUE_2,capture.getValue().getMessageAttributes().get(SAMPLE_MESSAGE_HEADER_NAME_2).getBinaryValue());
  assertEquals(SAMPLE_MESSAGE_HEADER_VALUE_3,capture.getValue().getMessageAttributes().get(SAMPLE_MESSAGE_HEADER_NAME_3).getStringValue());
  assertEquals(3,capture.getValue().getMessageAttributes().size());
}
