{
  MetricRegistry mockRegistry=endpoint.getCamelContext().getRegistry().lookupByNameAndType(MetricsComponent.METRIC_REGISTRY_NAME,MetricRegistry.class);
  Timer mockTimer=Mockito.mock(Timer.class);
  InOrder inOrder=Mockito.inOrder(mockRegistry,mockTimer);
  when(mockRegistry.timer("B")).thenReturn(mockTimer);
  endpoint.expectedMessageCount(1);
  producer.sendBodyAndHeader(new Object(),MetricsComponent.HEADER_METRIC_NAME,"B");
  endpoint.assertIsSatisfied();
  inOrder.verify(mockRegistry,times(1)).timer("B");
  inOrder.verify(mockTimer,times(1)).time();
  inOrder.verifyNoMoreInteractions();
}
