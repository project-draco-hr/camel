{
  String headerOutputFormat=exchange.getIn().getHeader(FopConstants.CAMEL_FOP_OUTPUT_FORMAT,this.outputFormat,String.class);
  if (headerOutputFormat == null) {
    throw new RuntimeExchangeException("Missing output format",exchange);
  }
  if (!isOutputFormatDefined(headerOutputFormat)) {
    throw new RuntimeExchangeException("The output format is not valid",exchange);
  }
  String outputFormat=OutputFormatEnum.valueOf(headerOutputFormat).getFormatExtended();
  return outputFormat;
}
