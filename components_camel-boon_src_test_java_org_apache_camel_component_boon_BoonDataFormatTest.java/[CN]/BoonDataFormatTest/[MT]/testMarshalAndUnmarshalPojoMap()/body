{
  TestPojo in=new TestPojo();
  in.setName("Camel");
  Map<String,TestPojo> map=new LinkedHashMap<String,TestPojo>();
  map.put("test1",in);
  map.put("test2",in);
  MockEndpoint mock=getMockEndpoint("mock:reversePojosMap");
  mock.expectedMessageCount(1);
  mock.message(0).body().isInstanceOf(Map.class);
  mock.message(0).body().matches().simple("${body[test1].name} == 'Camel'");
  mock.message(0).body().matches().simple("${body[test2].name} == 'Camel'");
  Object marshalled=template.requestBody("direct:inPojosMap",map);
  String marshalledAsString=context.getTypeConverter().convertTo(String.class,marshalled);
  assertEquals("{\"test1\":{\"name\":\"Camel\"},\"test2\":{\"name\":\"Camel\"}}",marshalledAsString);
  template.sendBody("direct:backPojosMap",marshalled);
  mock.assertIsSatisfied();
}
