{
  SimpleRegistry registry=new SimpleRegistry();
  registry.put("eventBus",new EventBus());
  CamelContext context=new DefaultCamelContext(registry);
  context.addRoutes(new RouteBuilder(){
    @Override public void configure() throws Exception {
      from("guava-eventbus:eventBus?listenerInterface=org.apache.camel.component.guava.eventbus.CustomListener&eventClass=org.apache.camel.component.guava.eventbus.MessageWrapper").to("mock:customListenerEvents");
    }
  }
);
  try {
    context.start();
    fail("Should throw exception");
  }
 catch (  FailedToCreateRouteException e) {
    IllegalStateException ise=assertIsInstanceOf(IllegalStateException.class,e.getCause());
    assertEquals("You cannot set both 'eventClass' and 'listenerInterface' parameters.",ise.getMessage());
  }
}
