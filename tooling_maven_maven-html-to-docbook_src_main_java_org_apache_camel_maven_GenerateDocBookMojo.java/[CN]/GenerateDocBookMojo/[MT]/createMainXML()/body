{
  try {
    PrintWriter out=new PrintWriter(new FileWriter(outputPath + File.separator + title+ ".xml"));
    out.println("<!DOCTYPE book PUBLIC \"-//OASIS//DTD DocBook XML V4.4//EN\" \"http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd\" ");
    out.println("[");
    for (int i=0; i < resources.length; ++i) {
      out.println("<!ENTITY " + removeExtension(resources[i]) + " SYSTEM \""+ removeExtension(resources[i])+ ".xml\">");
    }
    out.println("]>");
    out.println("<book>");
    out.println("<bookinfo>");
    out.println("<title>" + title + "</title>");
    out.println("<subtitle>" + subtitle + "</subtitle>");
    out.println("<releaseinfo>" + version + "</releaseinfo>");
    out.println(" <authorgroup>");
    if (authors != null) {
      for (int i=0; i < authors.length; ++i) {
        StringTokenizer name=new StringTokenizer(authors[i]);
        String fname=name.nextToken();
        String lname="";
        if (name.hasMoreTokens()) {
          lname=name.nextToken();
        }
        out.println("<author>");
        out.println("<firstname>" + fname + "</firstname>");
        out.println("<surname>" + lname + "</surname>");
        out.println("</author>");
      }
    }
    out.println("</authorgroup>");
    out.println("<legalnotice>");
    if (legalNotice != null && legalNotice.length() > 0) {
      out.println("<para>");
      out.println(legalNotice);
      out.println("</para>");
    }
 else {
      out.println("<para>Licensed to the Apache Software Foundation (ASF) under one or more");
      out.println("contributor license agreements. See the NOTICE file distributed with");
      out.println("this work for additional information regarding copyright ownership. The");
      out.println("ASF licenses this file to You under the Apache License, Version 2.0 (the");
      out.println("\"License\"); you may not use this file except in compliance with the");
      out.println("License. You may obtain a copy of the License at</para>");
      out.println("<para>http://www.apache.org/licenses/LICENSE-2.0</para>");
      out.println("<para>Unless required by applicable law or agreed to in writing,");
      out.println(" software distributed under the License is distributed on an \"AS IS\"");
      out.println("BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or");
      out.println("implied. See the License for the specific language governing permissions");
      out.println("and limitations under the License.</para>");
    }
    out.println("</legalnotice>");
    out.println("</bookinfo>");
    out.println("<toc></toc>");
    for (int i=0; i < resources.length; ++i) {
      out.println("&" + removeExtension(resources[i]) + ";");
    }
    out.println("</book>");
    out.flush();
    out.close();
  }
 catch (  IOException e) {
    e.printStackTrace();
  }
}
