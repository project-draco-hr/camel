{
  DefaultExecutor executor=new DefaultExecutor();
  executor.setExitValues(null);
  if (execCommand.getWorkingDir() != null) {
    executor.setWorkingDirectory(new File(execCommand.getWorkingDir()).getAbsoluteFile());
  }
  if (execCommand.getTimeout() != ExecEndpoint.NO_TIMEOUT) {
    executor.setWatchdog(new ExecuteWatchdog(execCommand.getTimeout()));
  }
  executor.setProcessDestroyer(new ShutdownHookProcessDestroyer());
  return executor;
}
