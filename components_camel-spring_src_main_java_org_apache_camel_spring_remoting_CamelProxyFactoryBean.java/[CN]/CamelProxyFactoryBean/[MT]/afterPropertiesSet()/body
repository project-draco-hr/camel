{
  super.afterPropertiesSet();
  try {
    if (endpoint == null) {
      if (camelContext == null && camelContextId != null) {
        camelContext=CamelContextResolverHelper.getCamelContextWithId(applicationContext,camelContextId);
      }
      if (getServiceUrl() == null || camelContext == null) {
        throw new IllegalArgumentException("If endpoint is not specified, the serviceUrl and camelContext must be specified.");
      }
      endpoint=camelContext.getEndpoint(getServiceUrl());
      if (endpoint == null) {
        throw new IllegalArgumentException("Could not resolve endpoint: " + getServiceUrl());
      }
    }
    this.producer=endpoint.createProducer();
    this.producer.start();
    this.serviceProxy=ProxyHelper.createProxy(endpoint,producer,getServiceInterface());
  }
 catch (  Exception e) {
    throw new IllegalArgumentException(e);
  }
}
