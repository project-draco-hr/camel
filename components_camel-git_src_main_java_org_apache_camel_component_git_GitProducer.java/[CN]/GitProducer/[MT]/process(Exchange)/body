{
  String operation;
  Repository repo;
  if (ObjectHelper.isEmpty(endpoint.getOperation())) {
    operation=exchange.getIn().getHeader(GitConstants.GIT_OPERATION,String.class);
  }
 else {
    operation=endpoint.getOperation();
  }
  if (ObjectHelper.isEmpty(endpoint.getLocalPath())) {
    throw new IllegalArgumentException("Local path must specified to execute " + operation);
  }
  repo=getLocalRepository();
switch (operation) {
case GitOperation.CLONE_OPERATION:
    doClone(exchange,operation);
  break;
case GitOperation.INIT_OPERATION:
doInit(exchange,operation);
break;
case GitOperation.ADD_OPERATION:
doAdd(exchange,operation,repo);
break;
case GitOperation.COMMIT_OPERATION:
doCommit(exchange,operation,repo);
break;
}
repo.close();
}
