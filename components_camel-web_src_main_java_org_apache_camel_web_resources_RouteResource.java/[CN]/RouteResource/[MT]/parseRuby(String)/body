{
  try {
    route+="\n RubyCamel.addRouteBuilder(RubyRoute.new)";
    File file=storeRoute(route,LANGUAGE_RUBY);
    String[] args={file.getAbsolutePath()};
    Main.main(args);
    List<RouteBuilder> list=RubyCamel.getRoutes();
    for (    RouteBuilder builder : list) {
      postRoutes(builder);
    }
    return Response.seeOther(new URI("/routes")).build();
  }
 catch (  IOException e) {
    error="Failed to store the route: " + e.getMessage();
  }
catch (  Exception e) {
    error="Failed to edit the route: " + e.getMessage();
  }
  return Response.ok(new Viewable("edit",this)).build();
}
