{
  if (velocityEngine == null) {
    velocityEngine=component.getVelocityEngine();
    velocityEngine.setProperty(Velocity.FILE_RESOURCE_LOADER_CACHE,isLoaderCache() ? Boolean.TRUE : Boolean.FALSE);
    velocityEngine.setProperty(Velocity.RUNTIME_LOG_LOGSYSTEM_CLASS,SimpleLog4JLogSystem.class.getName());
    velocityEngine.setProperty("runtime.log.logsystem.log4j.category",VelocityEndpoint.class.getName());
    velocityEngine.init();
  }
  return velocityEngine;
}
