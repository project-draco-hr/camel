{
  if (LOG.isTraceEnabled()) {
    LOG.trace("Waiting for exclusive read lock to file: " + file);
  }
  String newName=file.getFileName() + ".camelExclusiveReadLock";
  GenericFile<T> newFile=file.clone();
  newFile.changeFileName(newName);
  long start=System.currentTimeMillis();
  boolean exclusive=false;
  while (!exclusive) {
    if (timeout > 0) {
      long delta=System.currentTimeMillis() - start;
      if (delta > timeout) {
        LOG.debug("Cannot acquire read lock within " + timeout + " millis. Will skip the file: "+ file);
        return false;
      }
    }
    exclusive=operations.renameFile(file.getAbsoluteFileName(),newFile.getAbsoluteFileName());
    if (exclusive) {
      if (LOG.isDebugEnabled()) {
        LOG.debug("Acquired exclusive read lock to file: " + file);
      }
      operations.renameFile(newFile.getAbsoluteFileName(),file.getAbsoluteFileName());
    }
 else {
      sleep();
    }
  }
  return true;
}
