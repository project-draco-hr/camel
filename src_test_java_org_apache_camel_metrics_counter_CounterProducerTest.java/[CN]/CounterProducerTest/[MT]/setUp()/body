{
  producer=new CounterProducer(endpoint);
  inOrder=Mockito.inOrder(endpoint,exchange,registry,counter);
  when(endpoint.getMetricsName()).thenReturn(ENDPOINT_NAME);
  when(endpoint.getRegistry()).thenReturn(registry);
  when(registry.counter(ENDPOINT_NAME)).thenReturn(counter);
}
