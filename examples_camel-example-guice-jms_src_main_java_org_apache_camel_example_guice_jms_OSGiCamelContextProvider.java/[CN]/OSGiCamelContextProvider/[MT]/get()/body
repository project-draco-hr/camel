{
  DefaultCamelContext camelContext;
  if (factory != null) {
    camelContext=factory.createContext();
  }
 else {
    camelContext=new DefaultCamelContext();
  }
  if (routeBuilders != null) {
    for (    RoutesBuilder builder : routeBuilders) {
      try {
        camelContext.addRoutes(builder);
      }
 catch (      Exception e) {
        throw new ProvisionException("Failed to add the router. Reason: " + e,e);
      }
    }
  }
  updateRegistry(camelContext);
  return camelContext;
}
