{
  BeanManager manager=this.beanManager != null ? this.beanManager : beanManager;
  if (camelContextMap == null && manager != null) {
    Set<Bean<?>> beans=manager.getBeans(CamelContextMap.class);
    if (!beans.isEmpty()) {
      Bean<?> bean=manager.resolve(beans);
      CreationalContext<?> creationalContext=manager.createCreationalContext(bean);
      camelContextMap=(CamelContextMap)manager.getReference(bean,CamelContextMap.class,creationalContext);
    }
  }
  ObjectHelper.notNull(camelContextMap,"Could not resolve CamelContextMap");
  return camelContextMap.getCamelContext(context);
}
