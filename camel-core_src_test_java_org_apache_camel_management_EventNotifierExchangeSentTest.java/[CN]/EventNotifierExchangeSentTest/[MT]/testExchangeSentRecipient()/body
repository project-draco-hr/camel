{
  getMockEndpoint("mock:result").expectedMessageCount(1);
  template.sendBodyAndHeader("direct:foo","Hello World","foo","direct:cool,direct:start");
  assertMockEndpointsSatisfied();
  Thread.sleep(200);
  assertEquals(12,events.size());
  ExchangeSendingEvent e0=assertIsInstanceOf(ExchangeSendingEvent.class,events.get(0));
  ExchangeSendingEvent e1=assertIsInstanceOf(ExchangeSendingEvent.class,events.get(1));
  ExchangeSentEvent e2=assertIsInstanceOf(ExchangeSentEvent.class,events.get(2));
  ExchangeSendingEvent e3=assertIsInstanceOf(ExchangeSendingEvent.class,events.get(3));
  ExchangeSendingEvent e4=assertIsInstanceOf(ExchangeSendingEvent.class,events.get(4));
  ExchangeSentEvent e5=assertIsInstanceOf(ExchangeSentEvent.class,events.get(5));
  ExchangeSendingEvent e6=assertIsInstanceOf(ExchangeSendingEvent.class,events.get(6));
  ExchangeSentEvent e7=assertIsInstanceOf(ExchangeSentEvent.class,events.get(7));
  ExchangeSendingEvent e8=assertIsInstanceOf(ExchangeSendingEvent.class,events.get(8));
  ExchangeSentEvent e9=assertIsInstanceOf(ExchangeSentEvent.class,events.get(9));
  ExchangeSentEvent e10=assertIsInstanceOf(ExchangeSentEvent.class,events.get(10));
  ExchangeSentEvent e11=assertIsInstanceOf(ExchangeSentEvent.class,events.get(11));
  assertEquals("direct://foo",e0.getEndpoint().getEndpointUri());
  assertEquals("direct://cool",e1.getEndpoint().getEndpointUri());
  assertEquals("direct://cool",e2.getEndpoint().getEndpointUri());
  assertEquals("direct://start",e3.getEndpoint().getEndpointUri());
  assertEquals("log://foo",e4.getEndpoint().getEndpointUri());
  assertEquals("log://foo",e5.getEndpoint().getEndpointUri());
  assertEquals("direct://bar",e6.getEndpoint().getEndpointUri());
  assertEquals("direct://bar",e7.getEndpoint().getEndpointUri());
  assertEquals("mock://result",e8.getEndpoint().getEndpointUri());
  assertEquals("mock://result",e9.getEndpoint().getEndpointUri());
  assertEquals("direct://start",e10.getEndpoint().getEndpointUri());
  assertEquals("direct://foo",e11.getEndpoint().getEndpointUri());
}
