{
  ObjectHelper.notNull(dataFormat,"dataFormat");
  InputStream stream=ExchangeHelper.getMandatoryInBody(exchange,InputStream.class);
  try {
    Message out=exchange.getOut();
    out.copyFrom(exchange.getIn());
    Object result=dataFormat.unmarshal(exchange,stream);
    out.setBody(result);
  }
  finally {
    if (stream != null) {
      stream.close();
    }
  }
}
