{
  String cxfEndpointURI=JAXWS_ENDPOINT_URI;
  if (sync) {
    cxfEndpointURI=cxfEndpointURI + "&synchronous=true";
  }
  Exchange exchange=sendJaxWsMessage(cxfEndpointURI,"BadRecordLitFault","testDocLitFault");
  Exception exception=exchange.getException();
  assertNotNull("except to get the exception",exception);
  assertTrue("Get a wrong soap fault",exception instanceof BadRecordLitFault);
  String fileName=exchange.getOut().getHeader(Exchange.FILE_NAME,String.class);
  assertEquals("Should get the file name from out message header","testFile",fileName);
}
