{
  BeanHolder holder=getBeanHolder();
  if (holder == null) {
    RegistryBean registryBean=new RegistryBean(getCamelContext(),beanName);
    if (cache) {
      holder=registryBean.createCacheHolder();
    }
 else {
      holder=registryBean;
    }
  }
  BeanProcessor processor=new BeanProcessor(holder);
  if (method != null) {
    processor.setMethod(method);
  }
  processor.setMultiParameterArray(isMultiParameterArray());
  return processor;
}
