{
  MockEndpoint handled=getMockEndpoint("mock:handled");
  handled.expectedBodiesReceived(msg3);
  try {
    template.sendBody("direct:errorTest",msg1);
    fail("Should have thrown a MyBelaException");
  }
 catch (  RuntimeCamelException e) {
    assertTrue(e.getCause() instanceof MyBelaException);
  }
  assertMockEndpointsSatisfied();
  assertEquals(1,callCounter1);
  assertEquals(1,callCounter2);
  assertEquals(1 + redelivery,callCounter3);
}
