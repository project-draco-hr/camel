{
  if (LOG.isTraceEnabled()) {
    LOG.trace("existsFile(" + name + ")");
  }
  String directory=FileUtil.onlyPath(name);
  if (directory == null) {
    directory=".";
  }
  String onlyName=FileUtil.stripPath(name);
  try {
    Vector files=channel.ls(directory);
    if (files == null) {
      return false;
    }
    for (    Object file : files) {
      ChannelSftp.LsEntry entry=(ChannelSftp.LsEntry)file;
      String existing=entry.getFilename();
      if (LOG.isTraceEnabled()) {
        LOG.trace("Existing file: " + existing + ", target file: "+ name);
      }
      existing=FileUtil.stripPath(existing);
      if (existing != null && existing.equals(onlyName)) {
        return true;
      }
    }
    return false;
  }
 catch (  SftpException e) {
    if (ChannelSftp.SSH_FX_NO_SUCH_FILE == e.id) {
      return false;
    }
    throw new GenericFileOperationFailedException(e.getMessage(),e);
  }
}
