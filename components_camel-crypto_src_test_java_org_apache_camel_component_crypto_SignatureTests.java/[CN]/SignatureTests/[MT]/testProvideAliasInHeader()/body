{
  MockEndpoint mock=setupMock();
  Exchange unsigned=getMandatoryEndpoint("direct:alias-sign").createExchange();
  unsigned.getIn().setBody(payload);
  unsigned.getIn().setHeader(DigitalSignatureConstants.KEYSTORE_ALIAS,"bob");
  unsigned.getIn().setHeader(DigitalSignatureConstants.KEYSTORE_PASSWORD,"letmein".toCharArray());
  template.send("direct:alias-sign",unsigned);
  Exchange signed=getMandatoryEndpoint("direct:alias-sign").createExchange();
  signed.getIn().copyFrom(unsigned.getOut());
  signed.getIn().setHeader(KEYSTORE_ALIAS,"bob");
  template.send("direct:alias-verify",signed);
  verify(mock);
}
