{
  final Iterator iterator=ObjectHelper.createIterator(value);
  return new Iterable(){
    public Iterator iterator(){
      return new Iterator(){
        private int index;
        public boolean hasNext(){
          return iterator.hasNext();
        }
        public Object next(){
          Object part=iterator.next();
          Exchange newExchange=exchange.copy();
          if (part instanceof Message) {
            newExchange.setIn((Message)part);
          }
 else {
            Message in=newExchange.getIn();
            in.setBody(part);
          }
          return createProcessorExchangePair(index++,getProcessors().iterator().next(),newExchange);
        }
        public void remove(){
          throw new UnsupportedOperationException("Remove is not supported by this iterator");
        }
      }
;
    }
  }
;
}
