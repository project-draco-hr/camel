{
  Object value=expression.evaluate(exchange);
  Integer collectionSize=CollectionHelper.size(value);
  List<ProcessorExchangePair> result;
  if (collectionSize != null) {
    result=new ArrayList<ProcessorExchangePair>(collectionSize);
  }
 else {
    result=new ArrayList<ProcessorExchangePair>();
  }
  for (Iterator<Object> iter=ObjectConverter.iterator(value); iter.hasNext(); ) {
    Object part=iter.next();
    Exchange newExchange=exchange.copy();
    Message in=newExchange.getIn();
    in.setBody(part);
    result.add(new ProcessorExchangePair(getProcessors().iterator().next(),newExchange));
  }
  return result;
}
