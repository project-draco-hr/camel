{
  try {
    final String msg=exchange.getIn().getBody(String.class);
    if (isMessageACommand(msg)) {
      connection.send(msg);
    }
 else {
      final String target=endpoint.getConfiguration().getTarget();
      if (LOG.isDebugEnabled()) {
        LOG.debug("sending to: " + target + " message: "+ msg);
      }
      connection.doPrivmsg(target,msg);
    }
  }
 catch (  Exception e) {
    throw new RuntimeCamelException(e);
  }
}
