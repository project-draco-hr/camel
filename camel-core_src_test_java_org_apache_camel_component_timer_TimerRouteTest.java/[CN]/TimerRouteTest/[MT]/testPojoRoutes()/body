{
  final AtomicInteger hitCount=new AtomicInteger();
  JndiContext context=new JndiContext();
  context.bind("bar",new Runnable(){
    public void run(){
      LOG.debug("hit");
      hitCount.incrementAndGet();
    }
  }
);
  CamelContext camelContext=new DefaultCamelContext(context);
  camelContext.addRoutes(new RouteBuilder(){
    public void configure(){
      from("timer://foo?fixedRate=true&delay=0&period=500").to("pojo:bar");
    }
  }
);
  camelContext.start();
  Thread.sleep(1000 * 2);
  assertTrue("",hitCount.get() >= 3);
  camelContext.stop();
}
