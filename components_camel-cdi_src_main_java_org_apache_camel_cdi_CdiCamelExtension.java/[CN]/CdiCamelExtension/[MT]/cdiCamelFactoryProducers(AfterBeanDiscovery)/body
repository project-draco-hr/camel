{
  for (  Map.Entry<Method,Bean<?>> producer : producerBeans.entrySet()) {
    Bean<?> bean=producer.getValue();
    Set<Annotation> qualifiers=new HashSet<>(producerQualifiers.get(producer.getKey()));
    Class<?> type=producer.getKey().getReturnType();
    if (CdiEventEndpoint.class.equals(type)) {
      for (      InjectionPoint ip : cdiEventEndpoints.keySet()) {
        qualifiers.addAll(ip.getQualifiers());
      }
    }
 else {
      if (Endpoint.class.isAssignableFrom(type) || ProducerTemplate.class.isAssignableFrom(type)) {
        qualifiers.addAll(CdiSpiHelper.excludeElementOfTypes(contextQualifiers,Any.class,Default.class,Named.class));
      }
    }
    abd.addBean(new BeanDelegate<>(bean,qualifiers));
  }
}
