{
  HeaderService s=new HeaderService(getClass().getClassLoader().getResource("soap_header.wsdl"),HeaderService.SERVICE);
  HeaderTester proxy=s.getSoapPortRelay();
  ((BindingProvider)proxy).getRequestContext().put(BindingProvider.ENDPOINT_ADDRESS_PROPERTY,"http://localhost:" + portE1 + "/CxfMessageHeadersRelayTest/HeaderService/");
  OutHeader me=new OutHeader();
  me.setRequestType("CXF user");
  Holder<OutHeaderResponse> result=new Holder<OutHeaderResponse>(new OutHeaderResponse());
  Holder<SOAPHeaderData> header=new Holder<SOAPHeaderData>(new SOAPHeaderData());
  proxy.outHeader(me,result,header);
  assertTrue("Expected in band header to propagate but it didn't",result.value.getResponseType().equals("pass"));
  assertTrue("Expected in band response header to propagate but it either didn't " + " or its contents do not match",Constants.equals(Constants.OUT_HEADER_DATA,header.value));
}
