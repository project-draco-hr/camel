{
  ObjectHelper.notNull(getContext(),"container");
  boolean pubSubDomain=false;
  if (path.startsWith(QUEUE_PREFIX)) {
    pubSubDomain=false;
    path=path.substring(QUEUE_PREFIX.length());
  }
 else   if (path.startsWith(TOPIC_PREFIX)) {
    pubSubDomain=true;
    path=path.substring(TOPIC_PREFIX.length());
  }
  final String subject=convertPathToActualDestination(path);
  JmsEndpoint endpoint=new JmsEndpoint(uri,getContext(),subject,pubSubDomain,getConfiguration().copy());
  URI u=new URI(uri);
  Map options=URISupport.parseParamters(u);
  String selector=(String)options.remove("selector");
  if (selector != null) {
    endpoint.setSelector(selector);
  }
  IntrospectionSupport.setProperties(endpoint.getConfiguration(),options);
  return endpoint;
}
