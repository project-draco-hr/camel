{
  return new RouteBuilder(){
    @Override public void configure(){
      from("direct:start").process(new Processor(){
        public void process(        Exchange exchange) throws Exception {
          if (shouldWork) {
            exchange.getOut().setBody("out");
          }
 else {
            exchange.getFault().setBody("fault");
          }
        }
      }
).to("mock:a").choice().when(faultBody().isNull()).to("mock:b").otherwise().setBody(faultBody()).to("mock:c");
    }
  }
;
}
