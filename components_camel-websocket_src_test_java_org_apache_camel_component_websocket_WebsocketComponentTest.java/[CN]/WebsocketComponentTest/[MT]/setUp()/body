{
  component=new WebsocketComponent();
  component.setCamelContext(new DefaultCamelContext());
  System.out.println("Server : " + server.isStarted());
  server=component.createServer();
  System.out.println("Server : " + server.isStarted());
  ServerConnector connector=new ServerConnector(server);
  connector.setHost("localhost");
  connector.setPort(1988);
  server.addConnector(connector);
  WebsocketEndpoint endpoint=(WebsocketEndpoint)component.createEndpoint("websocket://x");
  producer=(WebsocketProducer)endpoint.createProducer();
  component.connect(producer);
  when(consumer.getEndpoint()).thenReturn(endpoint);
}
