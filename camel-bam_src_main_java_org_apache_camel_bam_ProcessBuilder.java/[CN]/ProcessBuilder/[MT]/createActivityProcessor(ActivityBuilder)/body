{
  notNull(jpaTemplate,"jpaTemplate");
  transactionTemplate.execute(new TransactionCallbackWithoutResult(){
    protected void doInTransactionWithoutResult(    TransactionStatus status){
      processRules.setProcessDefinition(getProcessDefinition());
    }
  }
);
  return new JpaBamProcessor(getTransactionTemplate(),getJpaTemplate(),activityBuilder.getCorrelationExpression(),activityBuilder.getActivityRules(),getEntityType());
}
