{
  if (bundleContext != null) {
    if (LOG.isDebugEnabled()) {
      LOG.debug("Using OSGi resolvers");
    }
    updateRegistry(camelContext,bundleContext);
    LOG.debug("Using the OsgiClassResolver");
    camelContext.setClassResolver(new OsgiClassResolver(bundleContext));
    LOG.debug("Using OsgiFactoryFinderResolver");
    camelContext.setFactoryFinderResolver(new OsgiFactoryFinderResolver());
    LOG.debug("Using OsgiPackageScanClassResolver");
    camelContext.setPackageScanClassResolver(new OsgiPackageScanClassResolver(bundleContext));
    LOG.debug("Using OsgiComponentResolver");
    camelContext.setComponentResolver(new OsgiComponentResolver());
    LOG.debug("Using OsgiLanguageResolver");
    camelContext.setLanguageResolver(new OsgiLanguageResolver());
  }
 else {
    LOG.warn("BundleContext not set, cannot run in OSGI container");
  }
}
