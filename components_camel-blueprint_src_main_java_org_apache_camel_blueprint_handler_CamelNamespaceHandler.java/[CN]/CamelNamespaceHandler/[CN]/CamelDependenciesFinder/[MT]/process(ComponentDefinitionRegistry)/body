{
  CamelContextFactoryBean ccfb=(CamelContextFactoryBean)blueprintContainer.getComponentInstance(".camelBlueprint.factory." + camelContextName);
  CamelContext camelContext=ccfb.getContext();
  Set<String> components=new HashSet<String>();
  Set<String> languages=new HashSet<String>();
  Set<String> dataformats=new HashSet<String>();
  for (  RouteDefinition rd : camelContext.getRouteDefinitions()) {
    findInputComponents(rd.getInputs(),components,languages,dataformats);
    findOutputComponents(rd.getOutputs(),components,languages,dataformats);
  }
  try {
    for (    String component : components) {
      getComponentResolverReference(context,component);
    }
    for (    String language : languages) {
      getLanguageResolverReference(context,language);
    }
    for (    String dataformat : dataformats) {
      getDataformatResolverReference(context,dataformat);
    }
  }
 catch (  UnsupportedOperationException e) {
    LOG.warn("Unable to add dependencies on to camel components OSGi services.  " + "The Apache Aries blueprint implementation used it too old and the blueprint bundle can not see the org.apache.camel.spi package.");
    components.clear();
    languages.clear();
    dataformats.clear();
  }
}
