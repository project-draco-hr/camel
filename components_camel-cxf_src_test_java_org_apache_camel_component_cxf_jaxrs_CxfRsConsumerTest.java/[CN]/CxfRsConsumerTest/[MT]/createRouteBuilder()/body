{
  return new RouteBuilder(){
    public void configure(){
      errorHandler(new NoErrorHandlerBuilder());
      from(CXF_RS_ENDPOINT_URI).process(new Processor(){
        public void process(        Exchange exchange) throws Exception {
          Message inMessage=exchange.getIn();
          String operationName=inMessage.getHeader(CxfConstants.OPERATION_NAME,String.class);
          String id=(String)inMessage.getBody(Object[].class)[0];
          if ("getCustomer".equals(operationName)) {
            String httpMethod=inMessage.getHeader(Exchange.HTTP_METHOD,String.class);
            assertEquals("Get a wrong http method","GET",httpMethod);
            String uri=inMessage.getHeader(Exchange.HTTP_URI,String.class);
            if ("/customerservice/customers/126".equals(uri)) {
              Customer customer=new Customer();
              customer.setId(Long.parseLong(id));
              customer.setName("Willem");
              exchange.getOut().setBody(customer);
            }
 else {
              Response r=Response.status(404).entity("Can't found the customer with uri " + uri).build();
              throw new WebApplicationException(r);
            }
          }
        }
      }
);
    }
  }
;
}
