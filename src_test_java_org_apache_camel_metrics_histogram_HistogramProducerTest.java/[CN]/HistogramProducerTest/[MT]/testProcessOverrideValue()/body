{
  when(endpoint.getValue()).thenReturn(VALUE);
  when(endpoint.getLongHeader(exchange,HEADER_HISTOGRAM_VALUE,VALUE)).thenReturn(VALUE + 3);
  producer.process(exchange);
  inOrder.verify(endpoint,times(1)).getRegistry();
  inOrder.verify(endpoint,times(1)).getMetricsName(exchange);
  inOrder.verify(registry,times(1)).histogram(METRICS_NAME);
  inOrder.verify(endpoint,times(1)).getValue();
  inOrder.verify(endpoint,times(1)).getLongHeader(exchange,HEADER_HISTOGRAM_VALUE,VALUE);
  inOrder.verify(histogram,times(1)).update(VALUE + 3);
  inOrder.verifyNoMoreInteractions();
}
