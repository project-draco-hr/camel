{
  DefaultCamelContext context=new DefaultCamelContext();
  if (bundleContext != null) {
    context.setPackageScanClassResolver(new OsgiPackageScanClassResolver(bundleContext));
    context.setComponentResolver(new OsgiComponentResolver());
    context.setLanguageResolver(new OsgiLanguageResolver());
    addOsgiAnnotationTypeConverterLoader(context,bundleContext);
    context.setFactoryFinderClass(OsgiFactoryFinder.class);
  }
  return context;
}
