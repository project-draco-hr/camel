{
  settings.setString(SleepycatStoreFactory.SETTING_SLEEPYCAT_DATABASE_DIR,tempdir.toString());
  settings.setString(sessionID,SessionFactory.SETTING_CONNECTION_TYPE,SessionFactory.INITIATOR_CONNECTION_TYPE);
  writeSettings();
  quickfixjEngine=new QuickfixjEngine(settingsFile.getName(),false);
  assertThat(quickfixjEngine.getInitiator(),notNullValue());
  assertThat(quickfixjEngine.getAcceptor(),nullValue());
  assertThat(quickfixjEngine.getSettingsResourceName(),is(settingsFile.getName()));
  assertThat(quickfixjEngine.getMessageStoreFactory(),instanceOf(SleepycatStoreFactory.class));
  assertThat(quickfixjEngine.getLogFactory(),instanceOf(ScreenLogFactory.class));
  assertThat(quickfixjEngine.getMessageFactory(),instanceOf(DefaultMessageFactory.class));
}
