{
  CamelContext camelContext=super.createCamelContext();
  ConnectionFactory connectionFactory=new ActiveMQConnectionFactory("vm://localhost?broker.persistent=false");
  JmsComponent jms=jmsComponentClientAcknowledge(connectionFactory);
  ThreadPoolTaskExecutor executor=new ThreadPoolTaskExecutor();
  executor.setCorePoolSize(4);
  executor.setMaxPoolSize(16);
  executor.setThreadNamePrefix("foo");
  executor.afterPropertiesSet();
  jms.setTaskExecutorSpring2(executor);
  camelContext.addComponent("activemq",jms);
  return camelContext;
}
