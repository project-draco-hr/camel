{
  super.doStart();
  listener=new FilteredIRCEventAdapter();
  connection.addIRCEventListener(listener);
  List<String> channels=endpoint.getConfiguration().getChannels();
  for (  String channel : channels) {
    int ndx=channels.indexOf(channel);
    String key=null;
    if (ndx >= 0) {
      List<String> keys=endpoint.getConfiguration().getKeys();
      if (keys.size() > 0 && ndx < keys.size()) {
        key=keys.get(ndx);
      }
    }
    if (ObjectHelper.isNotEmpty(key)) {
      if (LOG.isDebugEnabled()) {
        LOG.debug("Joining: " + channel + " using "+ connection.getClass().getName()+ " with key "+ key);
      }
      connection.doJoin(channel,key);
    }
 else {
      if (LOG.isDebugEnabled()) {
        LOG.debug("Joining: " + channel + " using "+ connection.getClass().getName());
      }
      connection.doJoin(channel);
    }
  }
}
