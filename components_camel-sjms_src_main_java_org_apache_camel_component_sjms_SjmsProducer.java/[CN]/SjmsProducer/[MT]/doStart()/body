{
  super.doStart();
  this.executor=getEndpoint().getCamelContext().getExecutorServiceManager().newDefaultThreadPool(this,"SjmsProducer");
  if (getProducers() == null) {
    setProducers(new GenericObjectPool<MessageProducerResources>(new MessageProducerResourcesFactory()));
    getProducers().setMaxActive(getProducerCount());
    getProducers().setMaxIdle(getProducerCount());
    getProducers().setLifo(false);
    if (getEndpoint().isPrefillPool()) {
      if (getEndpoint().isAsyncStartListener()) {
        asyncStart=getEndpoint().getComponent().getAsyncStartStopExecutorService().submit(new Runnable(){
          @Override public void run(){
            try {
              fillProducersPool();
            }
 catch (            Throwable e) {
              log.warn("Error filling producer pool for destination: " + getDestinationName() + ". This exception will be ignored.",e);
            }
          }
          @Override public String toString(){
            return "AsyncStartListenerTask[" + getDestinationName() + "]";
          }
        }
);
      }
 else {
        fillProducersPool();
      }
    }
  }
}
