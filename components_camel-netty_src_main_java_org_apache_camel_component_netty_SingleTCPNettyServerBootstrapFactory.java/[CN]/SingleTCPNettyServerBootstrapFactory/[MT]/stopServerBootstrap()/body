{
  LOG.info("ServerBootstrap unbinding from {}:{}",configuration.getHost(),configuration.getPort());
  LOG.trace("Closing {} channels",allChannels.size());
  ChannelGroupFuture future=allChannels.close();
  future.awaitUninterruptibly();
  if (channelFactory != null) {
    channelFactory.releaseExternalResources();
    channelFactory=null;
  }
  if (bossExecutor != null) {
    if (camelContext != null) {
      camelContext.getExecutorServiceManager().shutdown(bossExecutor);
    }
 else {
      bossExecutor.shutdownNow();
    }
    bossExecutor=null;
  }
  if (workerExecutor != null) {
    if (camelContext != null) {
      camelContext.getExecutorServiceManager().shutdown(workerExecutor);
    }
 else {
      workerExecutor.shutdownNow();
    }
    workerExecutor=null;
  }
}
