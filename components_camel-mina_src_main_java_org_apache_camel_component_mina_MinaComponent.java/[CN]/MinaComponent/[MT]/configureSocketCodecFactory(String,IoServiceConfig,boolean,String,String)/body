{
  ProtocolCodecFactory codecFactory=getCodecFactory(type,codec);
  if (codecFactory == null) {
    if (textline) {
      Charset charset=getEncodingParameter(type,encoding);
      LineDelimiter delimiter=getLineDelimiterParameter();
      codecFactory=new TextLineCodecFactory(charset,delimiter);
      if (LOG.isDebugEnabled()) {
        LOG.debug(type + ": Using TextLineCodecFactory: " + codecFactory+ " using encoding: "+ charset+ " and line delimiter: "+ textlineDelimiter+ "("+ delimiter+ ")");
      }
    }
 else {
      codecFactory=new ObjectSerializationCodecFactory();
      if (LOG.isDebugEnabled()) {
        LOG.debug(type + ": Using ObjectSerializationCodecFactory: " + codecFactory);
      }
    }
  }
  addCodecFactory(config,codecFactory);
}
