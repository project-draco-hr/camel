{
  ProtocolCodecFactory codecFactory=null;
  if (codec != null) {
    codecFactory=getCamelContext().getRegistry().lookup(codec,ProtocolCodecFactory.class);
    if (codecFactory == null) {
      throw new IllegalArgumentException("Codec " + codec + " not found in registry.");
    }
    if (LOG.isDebugEnabled()) {
      LOG.debug(type + ": Using custom CodecFactory: " + codecFactory);
    }
  }
  return codecFactory;
}
