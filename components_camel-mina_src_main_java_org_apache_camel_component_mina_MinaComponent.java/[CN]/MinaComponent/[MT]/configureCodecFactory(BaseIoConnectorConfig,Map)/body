{
  boolean textline=false;
  if (parameters != null) {
    if (parameters.containsKey("codec")) {
      String value=(String)parameters.get("codec");
      if (value.equals("textline")) {
        textline=true;
      }
    }
 else {
      textline=false;
    }
  }
  if (textline) {
    config.getFilterChain().addLast("codec",new ProtocolCodecFilter(new TextLineCodecFactory()));
  }
 else {
    config.getFilterChain().addLast("codec",new ProtocolCodecFilter(new ObjectSerializationCodecFactory()));
  }
}
