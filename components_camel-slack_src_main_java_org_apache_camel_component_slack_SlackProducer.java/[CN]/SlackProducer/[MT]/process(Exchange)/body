{
  HttpClient client=HttpClientBuilder.create().build();
  HttpPost httpPost=new HttpPost(slackEndpoint.getWebhookUrl());
  SlackMessage slackMessage=new SlackMessage();
  slackMessage.setText(exchange.getIn().getBody(String.class));
  slackMessage.setChannel(slackEndpoint.getChannel());
  slackMessage.setUsername(slackEndpoint.getUsername());
  slackMessage.setIconUrl(slackEndpoint.getIconUrl());
  slackMessage.setIconEmoji(slackEndpoint.getIconEmoji());
  StringEntity body=new StringEntity(slackMessage.toString());
  httpPost.setEntity(body);
  HttpResponse response=client.execute(httpPost);
  if (response.getStatusLine().getStatusCode() != 200) {
    LOG.error("Error POSTing to Slack API: " + response.toString());
    throw new CamelException("Error POSTing to Slack API: " + response.toString());
  }
}
