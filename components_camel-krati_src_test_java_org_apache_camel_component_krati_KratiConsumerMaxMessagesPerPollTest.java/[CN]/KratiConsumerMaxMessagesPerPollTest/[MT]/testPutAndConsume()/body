{
  MockEndpoint endpoint=context.getEndpoint("mock:results",MockEndpoint.class);
  endpoint.message(0).property(Exchange.BATCH_SIZE).isEqualTo(2);
  endpoint.message(0).property(Exchange.BATCH_INDEX).isEqualTo(0);
  endpoint.message(0).property(Exchange.BATCH_COMPLETE).isEqualTo(false);
  endpoint.message(1).property(Exchange.BATCH_SIZE).isEqualTo(2);
  endpoint.message(1).property(Exchange.BATCH_INDEX).isEqualTo(1);
  endpoint.message(1).property(Exchange.BATCH_COMPLETE).isEqualTo(true);
  endpoint.message(2).property(Exchange.BATCH_SIZE).isEqualTo(1);
  endpoint.message(2).property(Exchange.BATCH_INDEX).isEqualTo(0);
  endpoint.message(2).property(Exchange.BATCH_COMPLETE).isEqualTo(true);
  endpoint.expectedMessageCount(3);
  template.sendBodyAndHeader("direct:put","TEST1",KratiConstants.KEY,"1");
  template.sendBodyAndHeader("direct:put","TEST2",KratiConstants.KEY,"2");
  template.sendBodyAndHeader("direct:put","TEST3",KratiConstants.KEY,"3");
  endpoint.assertIsSatisfied();
}
