{
  ByteBuf buf=Unpooled.buffer();
  buf.writeBytes(VALUE.getBytes());
  AddressedEnvelope<Object,InetSocketAddress> addressedEnvelop=new DefaultAddressedEnvelope<Object,InetSocketAddress>(VALUE.getBytes(),new InetSocketAddress(8888));
  EmbeddedChannel channel=new EmbeddedChannel(ChannelHandlerFactories.newByteArrayEncoder("udp").newChannelHandler());
  Assert.assertTrue(channel.writeOutbound(addressedEnvelop));
  Assert.assertTrue(channel.finish());
  AddressedEnvelope output=(AddressedEnvelope)channel.readOutbound();
  Assert.assertTrue(output.content() instanceof ByteBuf);
  ByteBuf resultContent=(ByteBuf)output.content();
  Assert.assertEquals(VALUE,new String(resultContent.array()));
  Assert.assertNull(channel.readOutbound());
}
