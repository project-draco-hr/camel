{
  return new RouteBuilder(){
    public void configure() throws Exception {
      context.setTracing(true);
      DataFormat syslogDataFormat=new SyslogDataFormat();
      from("netty:udp://127.0.0.1:" + serverPort + "?sync=false&allowDefaultCodec=false").unmarshal(syslogDataFormat).process(new Processor(){
        public void process(        Exchange ex){
          assertTrue(ex.getIn().getBody() instanceof SyslogMessage);
          SyslogMessage message=ex.getIn().getBody(SyslogMessage.class);
        }
      }
).to("mock:syslogReceiver").marshal(syslogDataFormat).to("mock:syslogReceiver2");
    }
  }
;
}
