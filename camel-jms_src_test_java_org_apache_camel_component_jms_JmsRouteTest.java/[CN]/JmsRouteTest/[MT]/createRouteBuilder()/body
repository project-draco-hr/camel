{
  return new RouteBuilder(){
    public void configure() throws Exception {
      from("activemq:queue:test.a").to("activemq:queue:test.b");
      from("activemq:queue:test.b").to("mock:result");
      JmsEndpoint endpoint1=(JmsEndpoint)endpoint("activemq:topic:quote.IONA");
      endpoint1.getConfiguration().setTransacted(true);
      from(endpoint1).to("mock:transactedClient");
      JmsEndpoint endpoint2=(JmsEndpoint)endpoint("activemq:topic:quote.IONA");
      endpoint1.getConfiguration().setTransacted(true);
      from(endpoint2).to("mock:nonTrasnactedClient");
    }
  }
;
}
