{
  if (!started.get()) {
synchronized (this) {
      if (started.get()) {
        return;
      }
      try {
        String replyTo=camelMessage.getHeader(JmsConstants.JMS_REPLY_TO_NAME,String.class);
        if (replyTo == null) {
          replyTo=endpoint.getReplyTo();
        }
        if (replyTo != null) {
          replyManager=endpoint.getReplyManager(replyTo);
          LOG.info("Using JmsReplyManager: " + replyManager + " to process replies from: "+ replyTo);
        }
 else {
          replyManager=endpoint.getReplyManager();
          LOG.info("Using JmsReplyManager: " + replyManager + " to process replies from temporary queue");
        }
      }
 catch (      Exception e) {
        throw new FailedToCreateProducerException(endpoint,e);
      }
      started.set(true);
    }
  }
}
