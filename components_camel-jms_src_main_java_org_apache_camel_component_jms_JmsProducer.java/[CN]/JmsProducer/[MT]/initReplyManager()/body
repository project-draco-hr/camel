{
  if (!started.get()) {
synchronized (this) {
      if (started.get()) {
        return;
      }
      try {
        if (endpoint.getReplyToType() != null) {
          if (endpoint.getReplyTo() != null && endpoint.getReplyToType().equals(ReplyToType.Temporary.name())) {
            throw new IllegalArgumentException("ReplyToType " + ReplyToType.Temporary + " is not supported when replyTo "+ endpoint.getReplyTo()+ " is also configured.");
          }
        }
        if (endpoint.getReplyTo() != null) {
          replyManager=endpoint.getReplyManager(endpoint.getReplyTo());
          LOG.info("Using JmsReplyManager: " + replyManager + " to process replies from: "+ endpoint.getReplyTo());
        }
 else {
          replyManager=endpoint.getReplyManager();
          LOG.info("Using JmsReplyManager: " + replyManager + " to process replies from temporary queue");
        }
      }
 catch (      Exception e) {
        throw new FailedToCreateProducerException(endpoint,e);
      }
      started.set(true);
    }
  }
}
