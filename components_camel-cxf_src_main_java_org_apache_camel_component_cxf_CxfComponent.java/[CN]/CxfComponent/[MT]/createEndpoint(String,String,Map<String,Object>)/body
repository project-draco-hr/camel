{
  CxfEndpoint result=null;
  if (remaining.startsWith(CxfConstants.SPRING_CONTEXT_ENDPOINT)) {
    String beanId=remaining.substring(CxfConstants.SPRING_CONTEXT_ENDPOINT.length());
    if (beanId.startsWith("//")) {
      beanId=beanId.substring(2);
    }
    Object bean=CamelContextHelper.mandatoryLookup(getCamelContext(),beanId,Object.class);
    if (bean instanceof CxfEndpointBean) {
      CxfEndpointBean configBean=(CxfEndpointBean)bean;
      result=new CxfSpringEndpoint(this,configBean);
      if (configBean.getProperties() != null) {
        Map<String,Object> copy=new HashMap<String,Object>();
        copy.putAll(configBean.getProperties());
        setProperties(result,copy);
        result.setMtomEnabled(Boolean.valueOf((String)copy.get(Message.MTOM_ENABLED)));
      }
    }
 else     if (bean instanceof CxfBlueprintEndpoint) {
      result=(CxfBlueprintEndpoint)bean;
    }
  }
 else {
    result=new CxfEndpoint(remaining,this);
  }
  setEndpointHeaderFilterStrategy(result);
  setProperties(result,parameters);
  Map<String,Object> properties=IntrospectionSupport.extractProperties(parameters,"properties.");
  if (properties != null) {
    result.setProperties(properties);
    result.setMtomEnabled(Boolean.valueOf((String)properties.get(Message.MTOM_ENABLED)));
  }
  return result;
}
