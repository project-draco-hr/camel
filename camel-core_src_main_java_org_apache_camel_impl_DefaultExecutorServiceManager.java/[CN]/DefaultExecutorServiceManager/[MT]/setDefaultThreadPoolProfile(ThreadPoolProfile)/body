{
  ThreadPoolProfile oldProfile=threadPoolProfiles.remove(defaultThreadPoolProfileId);
  if (oldProfile != null) {
    oldProfile.setDefaultProfile(false);
    if (defaultThreadPoolProfile.getKeepAliveTime() == null) {
      defaultThreadPoolProfile.setKeepAliveTime(oldProfile.getKeepAliveTime());
    }
    if (defaultThreadPoolProfile.getMaxPoolSize() == null) {
      defaultThreadPoolProfile.setMaxPoolSize(oldProfile.getMaxPoolSize());
    }
    if (defaultThreadPoolProfile.getRejectedPolicy() == null) {
      defaultThreadPoolProfile.setRejectedPolicy(oldProfile.getRejectedPolicy());
    }
    if (defaultThreadPoolProfile.getMaxQueueSize() == null) {
      defaultThreadPoolProfile.setMaxQueueSize(oldProfile.getMaxQueueSize());
    }
    if (defaultThreadPoolProfile.getPoolSize() == null) {
      defaultThreadPoolProfile.setPoolSize(oldProfile.getPoolSize());
    }
    if (defaultThreadPoolProfile.getTimeUnit() == null) {
      defaultThreadPoolProfile.setTimeUnit(oldProfile.getTimeUnit());
    }
  }
  ObjectHelper.notEmpty(defaultThreadPoolProfile.getId(),"id",defaultThreadPoolProfile);
  ObjectHelper.notNull(defaultThreadPoolProfile.getKeepAliveTime(),"keepAliveTime",defaultThreadPoolProfile);
  ObjectHelper.notNull(defaultThreadPoolProfile.getMaxPoolSize(),"maxPoolSize",defaultThreadPoolProfile);
  ObjectHelper.notNull(defaultThreadPoolProfile.getMaxQueueSize(),"maxQueueSize",defaultThreadPoolProfile);
  ObjectHelper.notNull(defaultThreadPoolProfile.getPoolSize(),"poolSize",defaultThreadPoolProfile);
  ObjectHelper.notNull(defaultThreadPoolProfile.getTimeUnit(),"timeUnit",defaultThreadPoolProfile);
  LOG.info("Using custom DefaultThreadPoolProfile: " + defaultThreadPoolProfile);
  this.defaultThreadPoolProfileId=defaultThreadPoolProfile.getId();
  defaultThreadPoolProfile.setDefaultProfile(true);
  registerThreadPoolProfile(defaultThreadPoolProfile);
}
