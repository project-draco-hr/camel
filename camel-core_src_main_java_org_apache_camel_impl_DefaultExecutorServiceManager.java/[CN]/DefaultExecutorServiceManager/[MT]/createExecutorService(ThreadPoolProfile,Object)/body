{
  ThreadPoolProfile namedProfile=threadPoolProfiles.get(profile.getId());
  if (namedProfile != null) {
    profile.addDefaults(namedProfile);
  }
  profile.addDefaults(this.defaultProfile);
  ThreadFactory threadFactory=createThreadFactory(profile);
  ExecutorService executorService=threadPoolFactory.newThreadPool(profile,threadFactory);
  onThreadPoolCreated(executorService,source,profile.getId());
  return executorService;
}
