{
  entityManagerFactory=applicationContext.getBean("entityManagerFactory",EntityManagerFactory.class);
  final EntityManager entityManager=entityManagerFactory.createEntityManager();
  TransactionTemplate transactionTemplate=new TransactionTemplate();
  transactionTemplate.setTransactionManager(new JpaTransactionManager(entityManagerFactory));
  transactionTemplate.setPropagationBehavior(TransactionDefinition.PROPAGATION_REQUIRED);
  transactionTemplate.execute(new TransactionCallback<Object>(){
    public Object doInTransaction(    TransactionStatus arg0){
      List<?> list=entityManager.createQuery(SELECT_ALL_STRING).getResultList();
      for (      Object item : list) {
        entityManager.remove(item);
      }
      entityManager.flush();
      return Boolean.TRUE;
    }
  }
);
  entityManager.close();
}
