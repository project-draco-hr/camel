{
  org.apache.camel.Message in=exchange.getIn();
  Set<Map.Entry<String,Object>> entries=in.getHeaders().entrySet();
  for (  Map.Entry<String,Object> entry : entries) {
    String headerName=entry.getKey();
    Object headerValue=entry.getValue();
    if (headerName.startsWith("JMS") && !headerName.startsWith("JMSX")) {
      if (headerName.equals("JMSCorrelationID")) {
        jmsMessage.setJMSCorrelationID(ExchangeHelper.convertToType(exchange,String.class,headerValue));
      }
 else       if (headerName.equals("JMSCorrelationID")) {
        jmsMessage.setJMSCorrelationID(ExchangeHelper.convertToType(exchange,String.class,headerValue));
      }
 else       if (headerName.equals("JMSReplyTo")) {
        jmsMessage.setJMSReplyTo(ExchangeHelper.convertToType(exchange,Destination.class,headerValue));
      }
 else       if (headerName.equals("JMSType")) {
        jmsMessage.setJMSType(ExchangeHelper.convertToType(exchange,String.class,headerValue));
      }
 else       if (LOG.isDebugEnabled()) {
        LOG.debug("Ignoring JMS header: " + headerName + " with value: "+ headerValue);
      }
    }
 else     if (shouldOutputHeader(in,headerName,headerValue)) {
      jmsMessage.setObjectProperty(headerName,headerValue);
    }
  }
}
