{
  if (body instanceof Node) {
    try {
      body=xmlConverter.toString((Node)body);
    }
 catch (    TransformerException e) {
      JMSException jmsException=new JMSException(e.getMessage());
      jmsException.setLinkedException(e);
      throw jmsException;
    }
  }
  if (body instanceof String) {
    return session.createTextMessage((String)body);
  }
 else   if (body instanceof Serializable) {
    return session.createObjectMessage((Serializable)body);
  }
 else {
    return session.createMessage();
  }
}
