{
  Message answer=null;
  boolean alwaysCopy=(endpoint != null) ? endpoint.getConfiguration().isAlwaysCopyMessage() : false;
  if (!alwaysCopy && camelMessage instanceof JmsMessage) {
    JmsMessage jmsMessage=(JmsMessage)camelMessage;
    answer=jmsMessage.getJmsMessage();
  }
  if (answer == null) {
    answer=createJmsMessage(camelMessage.getBody(),session,exchange.getContext());
    appendJmsProperties(answer,exchange,camelMessage);
  }
  return answer;
}
