{
  ProducerTemplate answer;
  CamelContext context=getCamelContext();
  if (defaultEndpoint != null) {
    Endpoint endpoint=context.getEndpoint(defaultEndpoint);
    if (endpoint == null) {
      throw new IllegalArgumentException("No endpoint found for URI: " + defaultEndpoint);
    }
 else {
      answer=new DefaultProducerTemplate(context,endpoint);
    }
  }
 else {
    answer=new DefaultProducerTemplate(context);
  }
  if (maximumCacheSize != null) {
    answer.setMaximumCacheSize(maximumCacheSize);
  }
  answer.start();
  return answer;
}
