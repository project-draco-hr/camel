{
  if (cs != null) {
    try {
      cs.stop();
    }
 catch (    IOException e) {
      LOG.debug("Error occurred during stopping JMXConnectorService: " + cs + ". This exception will be ignored.");
    }
    cs=null;
  }
  if (mbeansRegistered.isEmpty()) {
    return;
  }
  ObjectName[] mBeans=mbeansRegistered.toArray(new ObjectName[mbeansRegistered.size()]);
  int caught=0;
  for (  ObjectName name : mBeans) {
    try {
      mbeansRegistered.remove(name);
      unregister(name);
    }
 catch (    Exception e) {
      LOG.info("Exception unregistering MBean with name " + name,e);
      caught++;
    }
  }
  if (caught > 0) {
    LOG.warn("A number of " + caught + " exceptions caught while unregistering MBeans during stop operation."+ " See INFO log for details.");
  }
}
