{
  if (cs != null) {
    try {
      cs.stop();
    }
 catch (    IOException e) {
    }
    cs=null;
  }
  if (mbeansRegistered.isEmpty()) {
    return;
  }
  ObjectName[] mBeans=mbeansRegistered.toArray(new ObjectName[mbeansRegistered.size()]);
  int caught=0;
  for (  ObjectName name : mBeans) {
    mbeansRegistered.remove(name);
    try {
      unregister(name);
    }
 catch (    JMException jmex) {
      LOG.info("Exception unregistering MBean",jmex);
      caught++;
    }
  }
  if (caught > 0) {
    LOG.warn("A number of " + caught + " exceptions caught while unregistering MBeans during stop operation."+ " See INFO log for details.");
  }
}
