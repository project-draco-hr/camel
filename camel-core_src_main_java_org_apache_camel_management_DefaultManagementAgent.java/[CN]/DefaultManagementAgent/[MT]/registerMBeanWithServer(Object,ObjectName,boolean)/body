{
  boolean exists=server.isRegistered(name);
  if (exists) {
    if (forceRegistration) {
      LOG.info("ForceRegistration enabled, unregistering existing MBean");
      server.unregisterMBean(name);
    }
 else {
      if (LOG.isDebugEnabled()) {
        LOG.debug("MBean already registered with objectname: " + name);
      }
    }
  }
  ObjectInstance instance=null;
  if (forceRegistration || !exists) {
    if (LOG.isTraceEnabled()) {
      LOG.trace("Registering MBean with objectname: " + name);
    }
    instance=server.registerMBean(obj,name);
  }
  if (instance != null) {
    ObjectName registeredName=instance.getObjectName();
    if (LOG.isDebugEnabled()) {
      LOG.debug("Registered MBean with objectname: " + registeredName);
    }
    mbeansRegistered.add(registeredName);
  }
}
