{
  boolean exists=server.isRegistered(name);
  if (exists) {
    if (forceRegistration) {
      LOG.info("ForceRegistration enabled, unregistering existing MBean");
      server.unregisterMBean(name);
    }
 else {
      LOG.debug("MBean already registered with objectname: {}",name);
    }
  }
  ObjectInstance instance=null;
  if (forceRegistration || !exists) {
    LOG.trace("Registering MBean with objectname: {}",name);
    instance=server.registerMBean(obj,name);
  }
  if (instance != null) {
    ObjectName registeredName=instance.getObjectName();
    LOG.debug("Registered MBean with objectname: {}",registeredName);
    mbeansRegistered.add(registeredName);
  }
}
