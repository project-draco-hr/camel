{
  MockEndpoint mock=getMockEndpoint("mock:exception");
  mock.expectedMessageCount(1);
  XmlSignerEndpoint endpoint=getSignerEndpoint();
  XAdESSignatureProperties props=(XAdESSignatureProperties)endpoint.getProperties();
  props.setSignaturePolicyDigestAlgorithm(value);
  sendBody("direct:enveloping",payload,Collections.<String,Object>emptyMap());
  assertMockEndpointsSatisfied();
  checkThrownException(mock,XmlSignatureException.class,"The XAdES-EPES confguration is invalid. The digest algorithm for the signature policy is missing.",null);
}
