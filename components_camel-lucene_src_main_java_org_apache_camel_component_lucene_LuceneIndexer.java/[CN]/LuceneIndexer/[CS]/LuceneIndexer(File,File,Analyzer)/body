{
  if (indexDirectory != null) {
    if (!indexDirectory.exists()) {
      indexDirectory.mkdir();
    }
    this.setNiofsDirectory(new NIOFSDirectory(indexDirectory));
  }
 else {
    this.setNiofsDirectory(new NIOFSDirectory(new File("./indexDirectory")));
  }
  fieldTypeAnalyzed=new FieldType();
  fieldTypeAnalyzed.setIndexed(true);
  fieldTypeAnalyzed.setStored(true);
  fieldTypeAnalyzed.setTokenized(true);
  fieldTypeAnalyzed.freeze();
  fieldTypeUnanalyzed=new FieldType();
  fieldTypeUnanalyzed.setIndexed(true);
  fieldTypeUnanalyzed.setStored(true);
  fieldTypeUnanalyzed.setTokenized(false);
  fieldTypeUnanalyzed.freeze();
  this.setAnalyzer(analyzer);
  if ((sourceDirectory != null) && (!sourceDirectoryIndexed)) {
    this.setSourceDirectory(sourceDirectory);
    add(getSourceDirectory());
    sourceDirectoryIndexed=true;
  }
}
