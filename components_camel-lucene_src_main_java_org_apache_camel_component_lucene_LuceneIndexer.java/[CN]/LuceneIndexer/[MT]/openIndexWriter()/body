{
  IndexWriterConfig indexWriterConfig;
  if (!indexCreated) {
    indexWriterConfig=new IndexWriterConfig(Version.LUCENE_35,getAnalyzer()).setOpenMode(OpenMode.CREATE);
    indexWriter=new IndexWriter(niofsDirectory,indexWriterConfig);
    indexCreated=true;
    return;
  }
  indexWriterConfig=new IndexWriterConfig(Version.LUCENE_35,getAnalyzer()).setOpenMode(OpenMode.APPEND);
  indexWriter=new IndexWriter(niofsDirectory,indexWriterConfig);
}
