{
  if (ObjectHelper.isNotEmpty(comparatorRef)) {
    comparator=routeContext.getCamelContext().getRegistry().lookup(comparatorRef,Comparator.class);
  }
  if (comparator == null) {
    comparator=new Comparator<Object>(){
      public int compare(      Object o1,      Object o2){
        return ObjectHelper.compare(o1,o2);
      }
    }
;
  }
  Expression exp;
  if (getExpression() == null) {
    exp=bodyExpression();
  }
 else {
    exp=getExpression().createExpression(routeContext);
  }
  return new SortProcessor(exp,getComparator());
}
