{
  PropertiesComponent pc=new PropertiesComponent();
  if (context.getComponentNames().contains("properties")) {
    pc=context.getComponent("properties",PropertiesComponent.class);
  }
 else {
    context.addComponent("properties",pc);
  }
  if (null != System.getProperty(PROPERTY_PREFIX)) {
    pc.setPropertyPrefix(System.getProperty(PROPERTY_PREFIX) + ".");
  }
  if (null != props) {
    Properties initialProps=new Properties();
    initialProps.putAll(props);
    log.debug(String.format("Added %d initial properties",props.size()));
    try {
      pc.setInitialProperties(initialProps);
    }
 catch (    NoSuchMethodError e) {
      pc.setOverrideProperties(initialProps);
      pc.setLocation("default.properties");
    }
  }
}
