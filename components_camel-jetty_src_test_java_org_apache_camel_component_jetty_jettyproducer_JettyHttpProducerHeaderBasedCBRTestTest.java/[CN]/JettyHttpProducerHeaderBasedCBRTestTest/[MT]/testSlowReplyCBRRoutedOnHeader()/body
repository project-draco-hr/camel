{
  step="";
  MockEndpoint gold=getMockEndpoint("mock:gold");
  gold.expectedMessageCount(1);
  gold.whenAnyExchangeReceived(new Processor(){
    public void process(    Exchange exchange) throws Exception {
      step+="C";
    }
  }
);
  template.sendBody("direct:start","Hello World");
  assertMockEndpointsSatisfied();
  Future<String> future=(Future<String>)gold.getReceivedExchanges().get(0).getIn().getBody();
  assertEquals("Bye World",future.get());
  assertEquals("ACB",step);
}
