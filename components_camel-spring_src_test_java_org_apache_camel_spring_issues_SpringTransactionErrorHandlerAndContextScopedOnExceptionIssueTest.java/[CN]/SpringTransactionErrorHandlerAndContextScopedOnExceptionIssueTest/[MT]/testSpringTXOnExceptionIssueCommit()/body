{
  int count=jdbc.queryForInt("select count(*) from books");
  assertEquals("Number of books",0,count);
  getMockEndpoint("mock:onException").expectedMessageCount(0);
  getMockEndpoint("mock:result").expectedMessageCount(1);
  template.sendBody("direct:start","Camel in Action");
  assertMockEndpointsSatisfied();
  count=jdbc.queryForInt("select count(*) from books");
  assertEquals("Number of books",1,count);
}
