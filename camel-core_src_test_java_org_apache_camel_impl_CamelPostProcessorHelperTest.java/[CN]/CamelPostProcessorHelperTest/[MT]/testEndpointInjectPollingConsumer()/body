{
  CamelPostProcessorHelper helper=new CamelPostProcessorHelper(context);
  MyEndpointBeanPollingConsumer bean=new MyEndpointBeanPollingConsumer();
  Method method=bean.getClass().getMethod("setConsumer",PollingConsumer.class);
  EndpointInject endpointInject=method.getAnnotation(EndpointInject.class);
  Class<?>[] parameterTypes=method.getParameterTypes();
  for (  Class type : parameterTypes) {
    String propertyName=ObjectHelper.getPropertyName(method);
    Object value=helper.getInjectionValue(type,endpointInject.uri(),endpointInject.name(),propertyName);
    ObjectHelper.invokeMethod(method,bean,value);
  }
  template.sendBody("seda:foo","Hello World");
  MockEndpoint mock=getMockEndpoint("mock:result");
  mock.expectedBodiesReceived("Hello World");
  assertNotNull(bean.getConsumer());
  Exchange exchange=bean.consume();
  template.send("mock:result",exchange);
  assertMockEndpointsSatisfied();
}
