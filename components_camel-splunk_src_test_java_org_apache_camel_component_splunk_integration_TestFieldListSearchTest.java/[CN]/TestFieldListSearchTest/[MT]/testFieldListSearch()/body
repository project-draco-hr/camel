{
  MockEndpoint searchMock=getMockEndpoint("mock:search-result2");
  searchMock.expectedMessageCount(1);
  getMockEndpoint("mock:submit-result").expectedMessageCount(1);
  assertMockEndpointsSatisfied(20,TimeUnit.SECONDS);
  SplunkEvent recieved=searchMock.getReceivedExchanges().get(0).getIn().getBody(SplunkEvent.class);
  assertNotNull(recieved);
  Map<String,String> data=recieved.getEventData();
  assertEquals("value1",data.get("key1"));
}
