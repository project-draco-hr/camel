{
  try {
    start();
  }
 catch (  Exception e) {
    throw new RuntimeExpressionException("Error starting XPathBuilder",e);
  }
  XPath xPath=getXPathFactory().newXPath();
  if (!logNamespaces && LOG.isTraceEnabled()) {
    LOG.trace("Creating new XPath expression in pool. Namespaces on XPath expression: {}",getNamespaceContext().toString());
  }
 else   if (logNamespaces && LOG.isInfoEnabled()) {
    LOG.info("Creating new XPath expression in pool. Namespaces on XPath expression: {}",getNamespaceContext().toString());
  }
  xPath.setNamespaceContext(getNamespaceContext());
  xPath.setXPathVariableResolver(getVariableResolver());
  XPathFunctionResolver parentResolver=getFunctionResolver();
  if (parentResolver == null) {
    parentResolver=xPath.getXPathFunctionResolver();
  }
  xPath.setXPathFunctionResolver(createDefaultFunctionResolver(parentResolver));
  return xPath.compile(text);
}
