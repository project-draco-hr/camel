{
  XPath xPath=getXPathFactory().newXPath();
  if (LOG.isTraceEnabled()) {
    LOG.trace("Creating new XPath expression in pool. Namespaces on XPath expression: {}",getNamespaceContext().toString());
  }
  xPath.setNamespaceContext(getNamespaceContext());
  xPath.setXPathVariableResolver(getVariableResolver());
  XPathFunctionResolver parentResolver=getFunctionResolver();
  if (parentResolver == null) {
    parentResolver=xPath.getXPathFunctionResolver();
  }
  xPath.setXPathFunctionResolver(createDefaultFunctionResolver(parentResolver));
  return xPath.compile(text);
}
