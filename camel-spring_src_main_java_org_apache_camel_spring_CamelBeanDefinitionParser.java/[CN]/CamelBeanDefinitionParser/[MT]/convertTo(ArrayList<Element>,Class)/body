{
  if (clazz.isArray() || elements.size() > 1) {
    throw new IllegalStateException("We don't support injecting array values.");
  }
 else {
    Element element=elements.get(0);
    String ref=element.getAttribute("ref");
    if (StringUtils.hasText(ref)) {
      return new RuntimeBeanReference(ref);
    }
    BuilderStatement statement=parseRouteElement(element);
    if (!clazz.isAssignableFrom(statement.getReturnType())) {
      throw new IllegalStateException("Builder does not produce object of expected type: " + clazz.getName());
    }
    return statement;
  }
}
