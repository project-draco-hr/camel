{
  super();
  name=NAME_PREFIX + ++nameSuffix;
  if (Boolean.getBoolean(JmxSystemPropertyKeys.DISABLED)) {
    LOG.info("JMX is disabled. Using DefaultManagementStrategy.");
    managementStrategy=new DefaultManagementStrategy();
  }
 else {
    boolean registered=false;
    try {
      LOG.info("JMX enabled. Using DefaultManagedLifecycleStrategy.");
      managementStrategy=new ManagedManagementStrategy(new DefaultInstrumentationAgent());
      lifecycleStrategies.add(new DefaultManagedLifecycleStrategy(this));
      registered=true;
    }
 catch (    NoClassDefFoundError e) {
      LOG.warn("Could not find needed classes for JMX lifecycle strategy." + " Needed class is in spring-context.jar using Spring 2.5 or newer (" + " spring-jmx.jar using Spring 2.0.x)."+ " NoClassDefFoundError: "+ e.getMessage());
    }
catch (    Exception e) {
      LOG.warn("Could not create JMX lifecycle strategy, caused by: " + e.getMessage());
    }
    if (!registered) {
      LOG.warn("Cannot use JMX. Fallback to using DefaultManagementStrategy.");
      managementStrategy=new DefaultManagementStrategy();
    }
  }
  if (WebSpherePackageScanClassResolver.isWebSphereClassLoader(this.getClass().getClassLoader())) {
    LOG.info("Using WebSphere specific PackageScanClassResolver");
    packageScanClassResolver=new WebSpherePackageScanClassResolver("META-INF/services/org/apache/camel/TypeConverter");
  }
 else {
    packageScanClassResolver=new DefaultPackageScanClassResolver();
  }
}
