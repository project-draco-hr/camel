{
  if (endpoint.isSingleton()) {
    return uri;
  }
 else {
    for (int counter=0; true; counter++) {
      String key=(counter > 0) ? uri + ":" + counter : uri;
      if (!endpoints.containsKey(key)) {
        return key;
      }
    }
  }
}
