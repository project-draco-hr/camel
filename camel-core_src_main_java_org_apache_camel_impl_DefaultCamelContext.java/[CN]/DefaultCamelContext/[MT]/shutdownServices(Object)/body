{
  try {
    if (service instanceof Service) {
      ServiceHelper.stopAndShutdownService((Service)service);
    }
 else     if (service instanceof Collection) {
      ServiceHelper.stopAndShutdownServices((Collection<?>)service);
    }
  }
 catch (  Throwable e) {
    log.warn("Error occurred while shutting down service: " + service + ". This exception will be ignored.",e);
    EventHelper.notifyServiceStopFailure(this,service,e);
  }
}
