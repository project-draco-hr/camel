{
  isStartingRoutes.set(true);
  try {
    Map<String,RouteService> filtered=new LinkedHashMap<String,RouteService>();
    for (    Map.Entry<String,RouteService> entry : routeServices.entrySet()) {
      boolean startable=false;
      Consumer consumer=entry.getValue().getRoutes().iterator().next().getConsumer();
      if (consumer instanceof SuspendableService) {
        startable=((SuspendableService)consumer).isSuspended();
      }
      if (!startable && consumer instanceof StatefulService) {
        startable=((StatefulService)consumer).getStatus().isStartable();
      }
 else       if (!startable) {
        startable=entry.getValue().getStatus().isStartable();
      }
      if (startable) {
        filtered.put(entry.getKey(),entry.getValue());
      }
    }
    safelyStartRouteServices(checkClash,startConsumer,resumeConsumer,addingRoutes,filtered.values());
  }
  finally {
    isStartingRoutes.remove();
  }
}
