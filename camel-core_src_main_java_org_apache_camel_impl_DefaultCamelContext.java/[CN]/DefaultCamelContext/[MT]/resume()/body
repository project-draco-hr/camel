{
  if (suspended.get()) {
    if (resuming.compareAndSet(false,true)) {
      try {
        EventHelper.notifyCamelContextResuming(this);
        LOG.info("Apache Camel " + getVersion() + " (CamelContext: "+ getName()+ ") is resuming");
        StopWatch watch=new StopWatch();
        doStartRoutes(suspendedRouteServices,false,true);
        watch.stop();
        if (LOG.isInfoEnabled()) {
          LOG.info("Resumed " + suspendedRouteServices.size() + " routes");
          LOG.info("Apache Camel " + getVersion() + " (CamelContext: "+ getName()+ ") resumed in "+ TimeUtils.printDuration(watch.taken()));
        }
        suspendedRouteServices.clear();
        EventHelper.notifyCamelContextResumed(this);
      }
 catch (      Exception e) {
        EventHelper.notifyCamelContextResumeFailed(this,e);
        throw e;
      }
 finally {
        suspended.set(false);
        suspending.set(false);
        resuming.set(false);
      }
    }
  }
}
