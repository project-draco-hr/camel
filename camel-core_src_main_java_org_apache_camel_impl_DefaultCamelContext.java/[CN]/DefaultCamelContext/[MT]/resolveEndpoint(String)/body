{
  Endpoint answer;
synchronized (endpoints) {
    answer=endpoints.get(uri);
  }
  if (answer == null) {
    EndpointResolver er=getEndpointResolver();
    try {
      answer=er.resolveEndpoint(this,uri);
    }
 catch (    Exception e) {
      throw new ResolveEndpointFailedException(uri,e);
    }
  }
  return answer;
}
