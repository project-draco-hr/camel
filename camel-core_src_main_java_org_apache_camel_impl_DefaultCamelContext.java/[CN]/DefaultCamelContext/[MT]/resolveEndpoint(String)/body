{
  Endpoint answer;
synchronized (endpoints) {
    answer=endpoints.get(uri);
    if (answer == null) {
      try {
        for (        EndpointResolver resolver : resolvers) {
          answer=resolver.resolveEndpoint(this,uri);
          if (answer != null) {
            break;
          }
        }
        if (answer == null) {
          EndpointResolver er=getEndpointResolver();
          answer=er.resolveEndpoint(this,uri);
        }
        if (answer != null) {
          endpoints.put(uri,answer);
        }
      }
 catch (      Exception e) {
        throw new ResolveEndpointFailedException(uri,e);
      }
    }
  }
  return answer;
}
