{
  if (testClass.isAnnotationPresent(MockEndpoints.class)) {
    final String mockEndpoints=testClass.getAnnotation(MockEndpoints.class).value();
    CamelSpringTestHelper.doToSpringCamelContexts(context,new CamelSpringTestHelper.DoToSpringCamelContextsStrategy(){
      public void execute(      String contextName,      SpringCamelContext camelContext) throws Exception {
        LOGGER.info("Enabling auto mocking of endpoints matching pattern [{}] on CamelContext with name [{}].",mockEndpoints,contextName);
        camelContext.addRegisterEndpointCallback(new InterceptSendToMockEndpointStrategy(mockEndpoints));
      }
    }
);
  }
}
