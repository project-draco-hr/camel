{
  ByteBuffer answer;
  try {
    answer=context.getTypeConverter().convertTo(ByteBuffer.class,message);
  }
 catch (  NoTypeConversionAvailableException e) {
    String value=context.getTypeConverter().convertTo(String.class,message);
    answer=ByteBuffer.allocate(value.length()).setAutoExpand(true);
    answer.putString(value,encoder);
  }
  return answer;
}
