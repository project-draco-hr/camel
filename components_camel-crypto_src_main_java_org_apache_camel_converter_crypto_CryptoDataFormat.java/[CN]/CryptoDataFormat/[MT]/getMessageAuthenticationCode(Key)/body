{
  return shouldAppendHMAC ? new HMACAccumulator(key,macAlgorithm,cryptoProvider,bufferSize) : new HMACAccumulator(){
    byte[] empty=new byte[0];
    public void encryptUpdate(    byte[] buffer,    int read){
    }
    public void decryptUpdate(    byte[] buffer,    int read) throws IOException {
      outputStream.write(buffer,0,read);
    }
    public void validate(){
    }
    public byte[] getCalculatedMac(){
      return empty;
    }
  }
;
}
