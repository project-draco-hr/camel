{
  if (closeConnectionResource) {
    if (connectionResource instanceof ConnectionFactoryResource) {
      ((ConnectionFactoryResource)getConnectionResource()).drainPool();
    }
    closeConnectionResource=false;
    connectionResource=null;
  }
  super.doStop();
}
