{
  Response response=exchange.get(Response.class);
  if (response != null) {
    return new MessageContentsList(response);
  }
  ResourceProvider provider=getResourceProvider(exchange);
  Object serviceObject=getServiceObject(exchange);
  try {
    return invoke(exchange,request,serviceObject);
  }
  finally {
    if (Boolean.TRUE.equals(exchange.get(SUSPENED))) {
      exchange.put(JAXRSUtils.ROOT_INSTANCE,serviceObject);
      exchange.put(JAXRSUtils.ROOT_PROVIDER,provider);
    }
 else {
      if (exchange.isOneWay()) {
        ProviderFactory.getInstance(exchange.getInMessage()).clearThreadLocalProxies();
      }
      if (!isServiceObjectRequestScope(exchange.getInMessage())) {
        provider.releaseInstance(exchange.getInMessage(),serviceObject);
      }
      exchange.remove(JAXRSUtils.ROOT_INSTANCE);
      exchange.remove(JAXRSUtils.ROOT_PROVIDER);
    }
  }
}
