{
  getMockEndpoint("mock:a").expectedBodiesReceived("Hello World");
  getMockEndpoint("mock:b").expectedBodiesReceived("Hello World");
  getMockEndpoint("mock:result").expectedMessageCount(1);
  getMockEndpoint("mock:result").message(0).outBody(String.class).isEqualTo("Bye World");
  template.sendBody("direct:start","Hello World");
  assertMockEndpointsSatisfied();
  String ida=getMockEndpoint("mock:a").getReceivedExchanges().get(0).getExchangeId();
  String idb=getMockEndpoint("mock:b").getReceivedExchanges().get(0).getExchangeId();
  String idresult=getMockEndpoint("mock:result").getReceivedExchanges().get(0).getExchangeId();
  assertNotSame(ida,idb);
  assertNotSame(ida,idresult);
  assertSame(idb,idresult);
}
