{
  Properties props=endpoint.getConfiguration().createProducerProperties();
  if (endpoint.getCamelContext() != null) {
    ClassLoader loader=endpoint.getCamelContext().getApplicationContextClassLoader();
    replaceWithClass(props,"key.serializer",loader,Serializer.class);
    replaceWithClass(props,"value.serializer",loader,Serializer.class);
    replaceWithClass(props,"partitioner.class",loader,Partitioner.class);
  }
  if (endpoint.getBrokers() != null) {
    props.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG,endpoint.getBrokers());
  }
  return props;
}
