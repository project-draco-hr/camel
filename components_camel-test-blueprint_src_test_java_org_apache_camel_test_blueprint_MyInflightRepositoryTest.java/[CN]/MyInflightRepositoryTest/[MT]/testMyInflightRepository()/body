{
  InflightRepository inflightRepository=context().getInflightRepository();
  assertTrue("Get a wrong instance of inflightRepsitory",inflightRepository instanceof MyInflightRepository);
  assertEquals("There is no inflight exchange",0,inflightRepository.size());
  getMockEndpoint("mock:before").expectedBodiesReceived("Hello Camel");
  getMockEndpoint("mock:after").expectedBodiesReceived("Bye Camel");
  MyInflightRepository myInflightExchangeRepository=(MyInflightRepository)inflightRepository;
  template.sendBody("direct:start","Hello Camel");
  assertMockEndpointsSatisfied();
  assertEquals("We should have no inflight exchange there ",0,myInflightExchangeRepository.size());
  assertEquals("Get a wrong size of timeout exchange",1,myInflightExchangeRepository.getTimeoutExchange());
}
