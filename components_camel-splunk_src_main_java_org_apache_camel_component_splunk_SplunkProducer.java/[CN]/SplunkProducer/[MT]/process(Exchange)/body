{
  try {
    if (!dataWriter.isConnected()) {
      dataWriter.start();
    }
    if (endpoint.getConfiguration().isRaw()) {
      dataWriter.write(exchange.getIn().getMandatoryBody(String.class));
    }
 else {
      dataWriter.write(exchange.getIn().getMandatoryBody(SplunkEvent.class));
    }
  }
 catch (  Exception e) {
    if (endpoint.reset(e)) {
      dataWriter.stop();
    }
    throw e;
  }
}
