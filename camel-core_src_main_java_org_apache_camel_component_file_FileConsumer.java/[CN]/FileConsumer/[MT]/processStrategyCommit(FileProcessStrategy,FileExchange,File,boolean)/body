{
  if (endpoint.isIdempotent()) {
    endpoint.getIdempotentRepository().add(file.getPath());
  }
  try {
    if (LOG.isDebugEnabled()) {
      LOG.debug("Committing file strategy: " + processStrategy + " for file: "+ file+ (failureHandled ? " that was handled by the failure processor." : ""));
    }
    processStrategy.commit(endpoint,exchange,file);
  }
 catch (  Exception e) {
    LOG.warn("Error committing file strategy: " + processStrategy,e);
    handleException(e);
  }
}
