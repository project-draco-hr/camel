{
  if (file.exists() && file.lastModified() > lastPollTime) {
    if (isValidFile(file)) {
      FileStrategy strategy=endpoint.getFileStrategy();
      FileExchange exchange=endpoint.createExchange(file);
      try {
        if (LOG.isDebugEnabled()) {
          LOG.debug("About to process file:  " + file + " using exchange: "+ exchange);
        }
        if (strategy.begin(endpoint,exchange,file)) {
          getProcessor().process(exchange);
          strategy.commit(endpoint,exchange,file);
        }
 else {
          if (LOG.isDebugEnabled()) {
            LOG.debug(endpoint + " cannot process file: " + file);
          }
        }
      }
 catch (      Throwable e) {
        handleException(e);
      }
    }
  }
}
