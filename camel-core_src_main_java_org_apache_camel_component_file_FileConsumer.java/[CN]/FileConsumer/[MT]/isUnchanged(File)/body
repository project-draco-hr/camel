{
  if (file == null) {
    return false;
  }
 else   if (file.isDirectory()) {
    return true;
  }
 else {
    boolean lastModifiedCheck=true;
    long modifiedDuration=0;
    if (getUnchangedDelay() > 0) {
      modifiedDuration=System.currentTimeMillis() - file.lastModified();
      lastModifiedCheck=modifiedDuration >= getUnchangedDelay();
    }
    boolean sizeCheck=true;
    long sizeDifference=0;
    if (isUnchangedSize()) {
      long prevFileSize=(fileSizes.get(file) == null) ? 0 : fileSizes.get(file).longValue();
      sizeDifference=file.length() - prevFileSize;
      sizeCheck=sizeDifference == 0;
    }
    boolean answer=lastModifiedCheck && sizeCheck;
    if (LOG.isDebugEnabled()) {
      LOG.debug("file:" + file + " isUnchanged:"+ answer+ " "+ "sizeCheck:"+ sizeCheck+ "("+ sizeDifference+ ") "+ "lastModifiedCheck:"+ lastModifiedCheck+ "("+ modifiedDuration+ ")");
    }
    if (isUnchangedSize()) {
      if (answer) {
        fileSizes.remove(file);
      }
 else {
        fileSizes.put(file,file.length());
      }
    }
    return answer;
  }
}
