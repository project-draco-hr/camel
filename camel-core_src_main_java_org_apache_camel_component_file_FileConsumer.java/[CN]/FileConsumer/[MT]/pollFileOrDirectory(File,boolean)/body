{
  if (!fileOrDirectory.isDirectory()) {
    return pollFile(fileOrDirectory);
  }
 else   if (processDir) {
    int rc=0;
    if (isValidFile(fileOrDirectory)) {
      LOG.debug("Polling directory " + fileOrDirectory);
      File[] files=fileOrDirectory.listFiles();
      for (int i=0; i < files.length; i++) {
        rc+=pollFileOrDirectory(files[i],isRecursive());
      }
    }
    return rc;
  }
 else {
    LOG.debug("Skipping directory " + fileOrDirectory);
    return 0;
  }
}
