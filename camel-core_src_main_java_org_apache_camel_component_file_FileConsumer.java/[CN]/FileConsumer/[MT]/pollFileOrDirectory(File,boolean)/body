{
  if (!fileOrDirectory.isDirectory()) {
    return pollFile(fileOrDirectory);
  }
 else   if (processDir) {
    int rc=0;
    if (isValidFile(fileOrDirectory)) {
      if (LOG.isTraceEnabled()) {
        LOG.trace("Polling directory " + fileOrDirectory);
      }
      File[] files=fileOrDirectory.listFiles();
      for (      File file : files) {
        rc+=pollFileOrDirectory(file,isRecursive());
      }
    }
    return rc;
  }
 else {
    if (LOG.isTraceEnabled()) {
      LOG.trace("Skipping directory " + fileOrDirectory);
    }
    return 0;
  }
}
