{
  boolean result=false;
  if (file != null && file.exists()) {
    if (isMatched(file)) {
      if (isAttemptFileLock()) {
        FileChannel fc=null;
        try {
          fc=new RandomAccessFile(file,"rw").getChannel();
          fc.lock();
          result=true;
        }
 catch (        Throwable e) {
          log.debug("Failed to get the lock on file: " + file,e);
        }
 finally {
          if (fc != null) {
            try {
              fc.close();
            }
 catch (            IOException e) {
            }
          }
        }
      }
 else {
        result=true;
      }
    }
  }
  return result;
}
