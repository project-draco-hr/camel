{
  if (fileOrDirectory == null || !fileOrDirectory.exists()) {
    return;
  }
  if (LOG.isTraceEnabled()) {
    LOG.trace("Polling directory: " + fileOrDirectory.getPath());
  }
  File[] files=fileOrDirectory.listFiles();
  for (  File file : files) {
    if (file.isDirectory()) {
      if (endpoint.isRecursive() && isValidFile(file)) {
        pollDirectory(file,fileList);
      }
    }
 else     if (file.isFile()) {
      if (isValidFile(file)) {
        fileList.add(file);
      }
    }
 else {
      LOG.debug("Ignoring unsupported file type " + file);
    }
  }
}
