{
  if (file == null) {
    return false;
  }
 else   if (file.isDirectory()) {
    return true;
  }
 else {
    boolean lastModifiedCheck=false;
    long modifiedDuration=0;
    if (getUnchangedDelay() > 0) {
      modifiedDuration=System.currentTimeMillis() - file.lastModified();
      lastModifiedCheck=modifiedDuration >= getUnchangedDelay();
    }
    long fileModified=file.lastModified();
    Long previousModified=noopMap.get(file);
    noopMap.put(file,fileModified);
    if (previousModified == null || fileModified > previousModified) {
      lastModifiedCheck=true;
    }
    boolean sizeCheck=false;
    long sizeDifference=0;
    if (isUnchangedSize()) {
      Long value=fileSizes.get(file);
      if (value == null) {
        sizeCheck=true;
      }
 else {
        sizeCheck=file.length() != value;
      }
    }
    boolean answer=lastModifiedCheck || sizeCheck;
    if (LOG.isDebugEnabled()) {
      LOG.debug("file:" + file + " isChanged:"+ answer+ " "+ "sizeCheck:"+ sizeCheck+ "("+ sizeDifference+ ") "+ "lastModifiedCheck:"+ lastModifiedCheck+ "("+ modifiedDuration+ ")");
    }
    if (isUnchangedSize()) {
      if (answer) {
        fileSizes.put(file,file.length());
      }
 else {
        fileSizes.remove(file);
      }
    }
    return answer;
  }
}
