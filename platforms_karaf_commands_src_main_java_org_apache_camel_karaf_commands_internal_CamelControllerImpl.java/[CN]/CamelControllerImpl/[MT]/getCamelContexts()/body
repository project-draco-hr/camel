{
  ArrayList<CamelContext> camelContexts=new ArrayList<CamelContext>();
  try {
    ServiceReference[] references=bundleContext.getServiceReferences(CamelContext.class.getName(),null);
    if (references != null) {
      for (      ServiceReference reference : references) {
        if (reference != null) {
          CamelContext camelContext=(CamelContext)bundleContext.getService(reference);
          if (camelContext != null) {
            camelContexts.add(camelContext);
          }
        }
      }
    }
  }
 catch (  Exception e) {
    LOG.warn("Cannot retrieve the list of Camel contexts.",e);
  }
  return camelContexts;
}
