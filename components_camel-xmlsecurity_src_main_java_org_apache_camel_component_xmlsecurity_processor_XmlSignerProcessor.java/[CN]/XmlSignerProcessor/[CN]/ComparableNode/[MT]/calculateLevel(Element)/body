{
  int counter=0;
  for (Node n=node; n != null; n=n.getParentNode()) {
    if (Node.ELEMENT_NODE == n.getNodeType()) {
      counter++;
      if (counter > 10000) {
        throw new IllegalStateException("Hierachy level is limited to 10000");
      }
    }
  }
  return counter;
}
