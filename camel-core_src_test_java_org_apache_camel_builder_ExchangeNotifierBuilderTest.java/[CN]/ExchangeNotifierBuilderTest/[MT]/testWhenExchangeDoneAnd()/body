{
  ExchangeNotifierBuilder builder=new ExchangeNotifierBuilder(context).from("direct:foo").whenDone(5).and().from("direct:bar").whenDone(7).create();
  assertEquals(false,builder.matches());
  template.sendBody("direct:foo","A");
  template.sendBody("direct:foo","B");
  template.sendBody("direct:foo","C");
  template.sendBody("direct:bar","D");
  template.sendBody("direct:bar","E");
  assertEquals(false,builder.matches());
  template.sendBody("direct:foo","F");
  template.sendBody("direct:bar","G");
  assertEquals(false,builder.matches());
  template.sendBody("direct:foo","H");
  template.sendBody("direct:bar","I");
  assertEquals(false,builder.matches());
  template.sendBody("direct:bar","J");
  template.sendBody("direct:bar","K");
  template.sendBody("direct:bar","L");
  assertEquals(true,builder.matches());
}
