{
  Exchange exchange=endpoint.createExchange(ExchangePattern.InOut);
  exchange.getIn().setBody(request);
  try {
    processor.process(exchange);
  }
 catch (  Exception e) {
    exchange.setException(e);
  }
  if (exchange.hasOut()) {
    return exchange.getOut().getBody();
  }
 else {
    return exchange.getIn().getBody();
  }
}
