{
  return new AdviceWithTask(){
    public void task() throws Exception {
      boolean match=false;
      while (it.hasNext()) {
        ProcessorDefinition<?> output=it.next();
        if (matchBy.match(output)) {
          ProcessorDefinition<?> parent=output.getParent();
          if (parent != null) {
            int index=parent.getOutputs().indexOf(output);
            if (index != -1) {
              match=true;
              Object existing=parent.getOutputs().get(index);
              parent.getOutputs().add(index + 1,after);
              LOG.info("AdviceWith (" + matchBy.getId() + ") : ["+ existing+ "] --> after ["+ after+ "]");
            }
          }
        }
      }
      if (!match) {
        throw new IllegalArgumentException("There are no outputs which matches: " + matchBy.getId() + " in the route: "+ route);
      }
    }
  }
;
}
