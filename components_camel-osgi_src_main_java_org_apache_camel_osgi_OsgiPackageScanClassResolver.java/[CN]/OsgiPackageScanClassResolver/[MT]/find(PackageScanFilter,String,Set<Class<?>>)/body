{
  packageName=packageName.replace('.','/');
  Set<ClassLoader> set=getClassLoaders();
  ClassLoader osgiClassLoader=getOsgiClassLoader(set);
  int classesSize=classes.size();
  if (osgiClassLoader != null) {
    log.debug("Using only osgi bundle classloader");
    findInOsgiClassLoader(test,packageName,osgiClassLoader,classes);
  }
  if (classes.size() == classesSize) {
    log.debug("Using only regular classloaders");
    for (    ClassLoader classLoader : set.toArray(new ClassLoader[set.size()])) {
      if (!isOsgiClassloader(classLoader)) {
        find(test,packageName,classLoader,classes);
      }
    }
  }
}
