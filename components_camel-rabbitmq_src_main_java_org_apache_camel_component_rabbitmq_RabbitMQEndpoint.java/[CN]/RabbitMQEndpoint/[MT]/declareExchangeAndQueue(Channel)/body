{
  HashMap<String,Object> queueArgs=null;
  if (deadLetterExchange != null) {
    queueArgs=new HashMap<String,Object>();
    queueArgs.put(RabbitMQConstants.RABBITMQ_DEAD_LETTER_EXCHANGE,getDeadLetterExchange());
    queueArgs.put(RabbitMQConstants.RABBITMQ_DEAD_LETTER_ROUTING_KEY,getDeadLetterRoutingKey());
    channel.exchangeDeclare(getDeadLetterExchange(),getDeadLetterExchangeType(),isDurable(),isAutoDelete(),new HashMap<String,Object>());
    channel.queueDeclare(getDeadLetterQueue(),isDurable(),false,isAutoDelete(),null);
    channel.queueBind(getDeadLetterQueue(),getDeadLetterExchange(),getDeadLetterRoutingKey() == null ? "" : getDeadLetterRoutingKey());
  }
  channel.exchangeDeclare(getExchangeName(),getExchangeType(),isDurable(),isAutoDelete(),new HashMap<String,Object>());
  if (getQueue() != null) {
    channel.queueDeclare(getQueue(),isDurable(),false,isAutoDelete(),queueArgs);
    channel.queueBind(getQueue(),getExchangeName(),getRoutingKey() == null ? "" : getRoutingKey());
  }
}
