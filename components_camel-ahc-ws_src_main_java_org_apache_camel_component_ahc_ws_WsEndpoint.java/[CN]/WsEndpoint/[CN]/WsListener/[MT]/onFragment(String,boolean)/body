{
  if (LOG.isDebugEnabled()) {
    LOG.debug("received fragment({}) --> {}",last,fragment);
  }
synchronized (textBuffer) {
    textBuffer.append(fragment);
    if (last) {
      char[] msg=new char[textBuffer.length()];
      textBuffer.getChars(0,msg.length,msg,0);
      for (      WsConsumer consumer : consumers) {
        consumer.sendMessage(new CharArrayReader(msg));
      }
      textBuffer.setLength(0);
    }
  }
}
