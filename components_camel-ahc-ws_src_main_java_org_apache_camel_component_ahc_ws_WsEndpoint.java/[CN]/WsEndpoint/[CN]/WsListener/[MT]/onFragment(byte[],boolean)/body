{
  if (LOG.isDebugEnabled()) {
    LOG.debug("received fragment({}) --> {}",last,fragment);
  }
synchronized (byteBuffer) {
    try {
      byteBuffer.write(fragment);
    }
 catch (    IOException e) {
    }
    if (last) {
      byte[] msg=byteBuffer.toByteArray();
      for (      WsConsumer consumer : consumers) {
        consumer.sendMessage(new ByteArrayInputStream(msg));
      }
      byteBuffer.reset();
    }
  }
}
