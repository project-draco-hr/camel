{
  CachedOutputStream cos=new CachedOutputStream();
  cos.setOutputDir(file);
  cos.write(TEST_STRING.getBytes("UTF-8"));
  String[] files=file.list();
  assertEquals("we should have no temp file",files.length,0);
  StreamCache cache=cos.getStreamCache();
  assertTrue("Should get the InputStreamCache",cache instanceof InputStreamCache);
  String temp=IOConverter.toString((InputStream)cache);
  assertEquals("Cached a wrong file",temp,TEST_STRING);
}
