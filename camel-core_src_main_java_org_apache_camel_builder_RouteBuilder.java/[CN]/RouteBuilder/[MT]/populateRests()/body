{
  ModelCamelContext camelContext=getContext();
  if (camelContext == null) {
    throw new IllegalArgumentException("CamelContext has not been injected!");
  }
  getRestCollection().setCamelContext(camelContext);
  if (getRestConfigurations() != null) {
    for (    Map.Entry<String,RestConfigurationDefinition> entry : getRestConfigurations().entrySet()) {
      RestConfiguration config=entry.getValue().asRestConfiguration(getContext());
      if ("".equals(entry.getKey())) {
        camelContext.setRestConfiguration(config);
      }
 else {
        camelContext.addRestConfiguration(config);
      }
    }
  }
  camelContext.addRestDefinitions(getRestCollection().getRests());
  List<RouteDefinition> routes=new ArrayList<RouteDefinition>();
  for (  RestDefinition rest : getRestCollection().getRests()) {
    List<RouteDefinition> list=rest.asRouteDefinition(getContext());
    routes.addAll(list);
  }
  for (  RestConfiguration config : camelContext.getRestConfigurations()) {
    if (config.getApiContextPath() != null) {
      RouteDefinition route=RestDefinition.asRouteApiDefinition(camelContext,config);
      routes.add(route);
    }
  }
  for (  RouteDefinition route : routes) {
    getRouteCollection().route(route);
  }
}
