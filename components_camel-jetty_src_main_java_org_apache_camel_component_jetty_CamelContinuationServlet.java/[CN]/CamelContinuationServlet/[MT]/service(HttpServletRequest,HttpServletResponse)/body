{
  try {
    HttpConsumer consumer=resolve(request);
    if (consumer == null) {
      response.sendError(HttpServletResponse.SC_NOT_FOUND);
      return;
    }
    final Continuation continuation=ContinuationSupport.getContinuation(request);
    if (continuation.isInitial()) {
      return;
    }
    if (continuation.isResumed()) {
      Exchange exchange=(Exchange)continuation.getAttribute("result");
      consumer.getBinding().writeResponse(exchange,response);
      return;
    }
  }
 catch (  Exception e) {
    throw new ServletException(e);
  }
}
