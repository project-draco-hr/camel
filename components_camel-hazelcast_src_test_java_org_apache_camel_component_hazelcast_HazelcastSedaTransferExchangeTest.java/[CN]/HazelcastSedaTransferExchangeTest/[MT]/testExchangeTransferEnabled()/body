{
  final String value="CAMEL-3983";
  mock.expectedMessageCount(1);
  mock.expectedBodiesReceived("test");
  mock.expectedHeaderReceived("test",value);
  Exchange exchange=createExchangeWithBody("test");
  exchange.getIn().setHeader("test",value);
  template.send("direct:foobar",exchange);
  assertMockEndpointsSatisfied();
  mock.reset();
}
