{
  URI dispatchUri;
  Exchange reply;
  if (LOG.isDebugEnabled()) {
    LOG.debug("Dispatching exchange {} to endpoint {}",exchange,endpoint.getEndpointUri());
  }
  dispatchUri=selectDispatchUri(endpoint,exchange);
  if (exchange.getPattern() == ExchangePattern.InOnly) {
    reply=producer.send(dispatchUri.toASCIIString(),exchange);
  }
 else {
    reply=issueRequest(endpoint,ExchangePattern.InOut,exchange.getIn().getBody(),exchange.getIn().getHeaders());
  }
  return reply;
}
