{
  boolean received=latch.await(5,TimeUnit.SECONDS);
  assertTrue("Did not receive the message!",received);
  assertNotNull(receivedExchange);
  XmppMessage receivedMessage=receivedExchange.getIn();
  Assert.assertEquals("cheese header",123,receivedMessage.getHeader("cheese"));
  Object body=receivedMessage.getBody();
  XmppRouteTest.log.debug("Received body: " + body);
  Message xmppMessage=receivedMessage.getXmppMessage();
  assertNotNull(xmppMessage);
  XmppRouteTest.log.debug("Received XMPP message: " + xmppMessage.getBody());
  return body;
}
