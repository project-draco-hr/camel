{
  if (type == null) {
    ObjectHelper.notNull(ref,"ref or loadBalancer");
    LoadBalancer loadBalancer=routeContext.mandatoryLookup(ref,LoadBalancer.class);
    if (loadBalancer instanceof LoadBalancerDefinition) {
      type=(LoadBalancerDefinition)loadBalancer;
    }
 else {
      return loadBalancer;
    }
  }
  return type.getLoadBalancer(routeContext);
}
