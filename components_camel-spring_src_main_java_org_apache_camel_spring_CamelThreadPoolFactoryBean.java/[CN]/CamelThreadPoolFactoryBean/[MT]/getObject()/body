{
  if (camelContext == null && camelContextId != null) {
    camelContext=CamelContextResolverHelper.getCamelContextWithId(applicationContext,camelContextId);
  }
  notNull(camelContext,"camelContext");
  if (poolSize == null || poolSize <= 0) {
    throw new IllegalArgumentException("PoolSize must be a positive number");
  }
  String name=getThreadName() != null ? getThreadName() : getId();
  int max=getMaxPoolSize() != null ? getMaxPoolSize() : getPoolSize();
  RejectedExecutionHandler rejected=null;
  if (rejectedPolicy != null) {
    rejected=rejectedPolicy.asRejectedExecutionHandler();
  }
  ExecutorService answer=camelContext.getExecutorServiceStrategy().newThreadPool(getId(),name,getPoolSize(),max,getKeepAliveTime(),getTimeUnit(),getMaxQueueSize(),rejected,isDaemon());
  return answer;
}
