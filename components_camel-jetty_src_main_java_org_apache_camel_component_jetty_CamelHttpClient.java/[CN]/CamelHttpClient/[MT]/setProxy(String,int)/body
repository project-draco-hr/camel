{
  try {
    if (Server.getVersion().startsWith("8")) {
      Class<?> c=Class.forName("org.eclipse.jetty.client.Address");
      Object o=c.getConstructor(String.class,Integer.TYPE).newInstance(host,port);
      this.getClass().getMethod("setProxy",c).invoke(this,o);
    }
 else {
      Object o=this.getClass().getMethod("getProxyConfiguration").invoke(this);
      @SuppressWarnings("unchecked") Collection<Object> c=(Collection<Object>)o.getClass().getMethod("getProxies").invoke(o);
      c.clear();
      Class<?> cls=Class.forName("org.eclipse.jetty.client.HttpProxy");
      o=cls.getConstructor(String.class,Integer.TYPE).newInstance(host,port);
      c.add(o);
    }
  }
 catch (  Throwable t) {
    throw new RuntimeException(t);
  }
}
