{
  UserService userService=UserServiceFactory.getUserService();
  String city=(String)exchange.getIn().removeHeader("city");
  String requestor=userService.getCurrentUser().getEmail();
  String recipient=requestor;
  if (exchange.getIn().removeHeader("mailtocurrent") == null) {
    recipient=(String)exchange.getIn().removeHeader("mailto");
  }
  exchange.getIn().setBody(new ReportData(city,recipient,requestor));
  LOGGER.info(requestor + " requested weather data for " + city+ ". Report will be sent to "+ recipient);
}
