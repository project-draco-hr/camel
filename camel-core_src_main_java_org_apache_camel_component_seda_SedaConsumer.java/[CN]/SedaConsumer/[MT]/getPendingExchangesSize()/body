{
  int answer=endpoint.getQueue().size();
  if (answer == 0) {
    pendingStop=true;
    answer=tasks.get();
  }
  if (LOG.isTraceEnabled()) {
    LOG.trace("Pending exchanges " + answer);
  }
  return answer;
}
