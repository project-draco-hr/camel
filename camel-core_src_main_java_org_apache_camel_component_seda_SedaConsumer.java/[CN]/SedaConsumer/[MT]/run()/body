{
  while (isRunAllowed()) {
    final Exchange exchange;
    try {
      exchange=endpoint.getQueue().poll(1000,TimeUnit.MILLISECONDS);
    }
 catch (    InterruptedException e) {
      break;
    }
    if (exchange != null && isRunAllowed()) {
      processor.process(exchange,new AsyncCallback(){
        public void done(        boolean sync){
        }
      }
);
    }
  }
}
