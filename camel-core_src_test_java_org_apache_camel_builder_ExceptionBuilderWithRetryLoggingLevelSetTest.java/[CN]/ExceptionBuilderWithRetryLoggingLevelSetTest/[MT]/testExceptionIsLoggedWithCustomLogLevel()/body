{
  MockEndpoint result=getMockEndpoint(RESULT_QUEUE);
  result.expectedMessageCount(0);
  MockEndpoint mock=getMockEndpoint(ERROR_QUEUE);
  mock.expectedMessageCount(1);
  mock.expectedHeaderReceived(MESSAGE_INFO,"Damm somekind of IO exception");
  try {
    template.sendBody("direct:a","Hello IO");
    fail("Should have thrown a IOException");
  }
 catch (  RuntimeCamelException e) {
    assertTrue(e.getCause() instanceof IOException);
  }
  MockEndpoint.assertIsSatisfied(result,mock);
  assertTrue(logger.loggedTrace && logger.loggedFatal);
}
