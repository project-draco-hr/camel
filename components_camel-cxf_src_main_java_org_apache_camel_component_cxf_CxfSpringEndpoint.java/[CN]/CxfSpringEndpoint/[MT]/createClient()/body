{
  Class<?> cls=getSEIClass();
  if (getDataFormat().equals(DataFormat.POJO)) {
    ObjectHelper.notNull(cls,CxfConstants.SERVICE_CLASS);
  }
  ClientProxyFactoryBean factoryBean=createClientFactoryBean(cls);
  configure(factoryBean);
  setupClientFactoryBean(factoryBean,cls);
  QName serviceQName=null;
  try {
    serviceQName=factoryBean.getServiceName();
  }
 catch (  IllegalStateException e) {
  }
  if (serviceQName == null && getServiceLocalName() != null) {
    factoryBean.setServiceName(new QName(getServiceNamespace(),getServiceLocalName()));
  }
  if (factoryBean.getEndpointName() == null && getEndpointLocalName() != null) {
    factoryBean.setEndpointName(new QName(getEndpointNamespace(),getEndpointLocalName()));
  }
  if (cls == null) {
    return (Client)factoryBean.create();
  }
  return ((ClientProxy)Proxy.getInvocationHandler(factoryBean.create())).getClient();
}
