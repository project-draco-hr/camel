{
  Class<?> cls=getSEIClass();
  ObjectHelper.notNull(cls,CxfConstants.SERVICE_CLASS);
  ServerFactoryBean answer=CxfEndpointUtils.getServerFactoryBean(cls);
  configure(answer);
  setupServerFactoryBean(answer,cls);
  if (answer.getServiceName() == null && getServiceLocalName() != null) {
    answer.setServiceName(new QName(getServiceNamespace(),getServiceLocalName()));
  }
  if (answer.getEndpointName() == null && getEndpointLocalName() != null) {
    answer.setEndpointName(new QName(getEndpointNamespace(),getEndpointLocalName()));
  }
  return answer;
}
