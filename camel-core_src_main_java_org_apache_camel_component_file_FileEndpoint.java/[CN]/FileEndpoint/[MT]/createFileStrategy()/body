{
  Class factory=null;
  try {
    FactoryFinder finder=new FactoryFinder("META-INF/services/org/apache/camel/component/");
    factory=finder.findClass("file","strategy.factory.");
  }
 catch (  ClassNotFoundException e) {
    LOG.debug("'strategy.factory.class' not found",e);
  }
catch (  IOException e) {
    LOG.debug("No strategy factory defined in 'META-INF/services/org/apache/camel/component/file'",e);
  }
  if (factory == null) {
    ClassLoader cl=Thread.currentThread().getContextClassLoader();
    try {
      factory=cl.loadClass("org.apache.camel.component.file.strategy.FileProcessStrategyFactory");
    }
 catch (    ClassNotFoundException e) {
      throw new TypeNotPresentException("FileProcessStrategyFactory class not found",e);
    }
  }
  try {
    Method factoryMethod=factory.getMethod("createFileProcessStrategy",Properties.class);
    return (FileProcessStrategy)ObjectHelper.invokeMethod(factoryMethod,null,getParamsAsProperties());
  }
 catch (  NoSuchMethodException e) {
    throw new TypeNotPresentException(factory.getSimpleName() + ".createFileProcessStrategy(Properties params) moethod not found",e);
  }
}
