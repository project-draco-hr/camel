{
  producerTemplate.send("direct:input1",new Processor(){
    public void process(    Exchange exchange) throws Exception {
      exchange.getIn().setBody("fooBody");
      exchange.getIn().setHeader(GMAIL_SUBJECT,"anotherSubject");
    }
  }
);
  assertEquals("anotherSubject",service.getSentMessages().get(0).getSubject());
  assertEquals("fooBody",service.getSentMessages().get(0).getTextBody());
  assertEquals("test1@example.org",service.getSentMessages().get(0).getSender());
  assertEquals("test2@example.org",service.getSentMessages().get(0).getTo(0));
}
