{
  producerTemplate.send("direct:input1",new Processor(){
    public void process(    Exchange exchange) throws Exception {
      exchange.getIn().setBody("testBody");
      exchange.getIn().setHeader(GMAIL_SUBJECT,"anotherSubject");
    }
  }
);
  assertEquals("anotherSubject",mailService.getFirstMessage().getSubject());
  assertEquals("testBody",mailService.getFirstMessage().getTextBody());
  assertEquals("test1@example.org",mailService.getFirstMessage().getSender());
  assertEquals("test2@example.org",mailService.getFirstMessage().getTo().iterator().next());
}
