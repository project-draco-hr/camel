{
  shutdown.set(true);
  if (executor instanceof ThreadPoolExecutor) {
    ((ThreadPoolExecutor)executor).shutdown();
    ((ThreadPoolExecutor)executor).awaitTermination(0,TimeUnit.SECONDS);
  }
}
