{
  if (executor == null) {
    executor=new ThreadPoolExecutor(getCoreSize(),getMaxSize(),getKeepAliveTime(),TimeUnit.MILLISECONDS,getTaskQueue(),new ThreadFactory(){
      public Thread newThread(      Runnable runnable){
        Thread thread;
        if (getStackSize() > 0) {
          thread=new Thread(getThreadGroup(),runnable,getName(),getStackSize());
        }
 else {
          thread=new Thread(getThreadGroup(),runnable,getName());
        }
        thread.setDaemon(isDaemon());
        thread.setPriority(getPriority());
        return thread;
      }
    }
);
  }
  return executor;
}
