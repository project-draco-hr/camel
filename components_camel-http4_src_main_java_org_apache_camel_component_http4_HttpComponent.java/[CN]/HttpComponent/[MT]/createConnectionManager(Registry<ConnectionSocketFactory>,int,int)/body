{
  PoolingHttpClientConnectionManager answer=new PoolingHttpClientConnectionManager(registry,null,null,null,getConnectionTimeToLive(),TimeUnit.MILLISECONDS);
  int localMaxTotalConnections=maxTotalConnections;
  if (localMaxTotalConnections == 0) {
    localMaxTotalConnections=getMaxTotalConnections();
  }
  if (localMaxTotalConnections > 0) {
    answer.setMaxTotal(localMaxTotalConnections);
  }
  int localConnectionsPerRoute=connectionsPerRoute;
  if (localConnectionsPerRoute == 0) {
    localConnectionsPerRoute=getConnectionsPerRoute();
  }
  if (localConnectionsPerRoute > 0) {
    answer.setDefaultMaxPerRoute(localConnectionsPerRoute);
  }
  LOG.info("Created ClientConnectionManager " + answer);
  return answer;
}
