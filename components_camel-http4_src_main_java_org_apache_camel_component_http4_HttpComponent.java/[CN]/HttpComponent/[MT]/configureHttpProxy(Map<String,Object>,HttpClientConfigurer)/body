{
  String proxyHost=getAndRemoveParameter(parameters,"proxyHost",String.class);
  Integer proxyPort=getAndRemoveParameter(parameters,"proxyPort",Integer.class);
  if (proxyHost != null && proxyPort != null) {
    String proxyUsername=getAndRemoveParameter(parameters,"proxyUsername",String.class);
    String proxyPassword=getAndRemoveParameter(parameters,"proxyPassword",String.class);
    String proxyDomain=getAndRemoveParameter(parameters,"proxyDomain",String.class);
    String proxyNtHost=getAndRemoveParameter(parameters,"proxyNtHost",String.class);
    if (proxyUsername != null && proxyPassword != null) {
      return CompositeHttpConfigurer.combineConfigurers(configurer,new ProxyHttpClientConfigurer(proxyHost,proxyPort,proxyUsername,proxyPassword,proxyDomain,proxyNtHost));
    }
 else {
      return CompositeHttpConfigurer.combineConfigurers(configurer,new ProxyHttpClientConfigurer(proxyHost,proxyPort));
    }
  }
  return configurer;
}
