{
  LOG.debug("Netty consumer unbinding from: {}",configuration.getAddress());
  LOG.trace("Closing {} channels",allChannels.size());
  ChannelGroupFuture future=allChannels.close();
  future.awaitUninterruptibly();
  if (channelFactory != null) {
    channelFactory.releaseExternalResources();
  }
  if (bossExecutor != null) {
    context.getExecutorServiceManager().shutdown(bossExecutor);
    bossExecutor=null;
  }
  if (workerExecutor != null) {
    context.getExecutorServiceManager().shutdown(workerExecutor);
    workerExecutor=null;
  }
  LOG.info("Netty consumer unbound from: " + configuration.getAddress());
  super.doStop();
}
