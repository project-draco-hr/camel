{
  super.initPropertyPlaceholder();
  if (isUseBlueprintPropertyResolver()) {
    PropertiesComponent pc=getContext().getComponent("properties",PropertiesComponent.class);
    BlueprintPropertiesParser parser=new BlueprintPropertiesParser(pc,blueprintContainer,pc.getPropertiesParser());
    BlueprintPropertiesResolver resolver=new BlueprintPropertiesResolver(pc.getPropertiesResolver(),parser);
    ServiceReference ref=bundleContext.getServiceReference(PropertiesComponent.OVERRIDE_PROPERTIES);
    if (ref != null) {
      Properties extra=(Properties)bundleContext.getService(ref);
      if (extra != null) {
        pc.setOverrideProperties(extra);
      }
    }
    if (pc.getLocations() == null) {
      StringBuilder sb=new StringBuilder();
      String[] ids=parser.lookupPropertyPlaceholderIds();
      for (      String id : ids) {
        sb.append("blueprint:").append(id).append(",");
      }
      if (sb.length() > 0) {
        pc.setLocation(sb.toString());
      }
    }
    if (pc.getLocations() != null) {
      pc.setPropertiesParser(parser);
      pc.setPropertiesResolver(resolver);
    }
  }
}
