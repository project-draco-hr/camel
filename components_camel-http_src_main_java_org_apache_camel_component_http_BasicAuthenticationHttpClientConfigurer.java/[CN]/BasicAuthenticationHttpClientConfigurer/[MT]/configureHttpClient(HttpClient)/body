{
  Credentials defaultcreds;
  if (domain != null) {
    defaultcreds=new NTCredentials(username,password,host,domain);
  }
 else {
    defaultcreds=new UsernamePasswordCredentials(username,password);
  }
  ((DefaultHttpClient)client).getCredentialsProvider().setCredentials(AuthScope.ANY,defaultcreds);
}
