{
  port=AvailablePortFinder.getNextAvailable(8000);
  return new RouteBuilder(){
    @Override public void configure() throws Exception {
      from("jetty:http://localhost:" + port + "/test").process(new Processor(){
        @Override public void process(        Exchange exchange) throws Exception {
          HttpMessage message=(HttpMessage)exchange.getIn();
          assertNotNull(message.getRequest());
          assertEquals("GET",message.getRequest().getMethod());
          exchange.getOut().setBody(message.getRequest().getQueryString());
        }
      }
);
    }
  }
;
}
