{
  MimeBodyPart plainPart=new MimeBodyPart();
  plainPart.setText(body);
  MimeBodyPart htmlPart=new MimeBodyPart();
  htmlPart.setText("<html><body>" + body + "</body></html>");
  Multipart alt=new MimeMultipart("alternative");
  alt.addBodyPart(plainPart);
  alt.addBodyPart(htmlPart);
  Multipart mixed=new MimeMultipart("mixed");
  MimeBodyPart wrap=new MimeBodyPart();
  wrap.setContent(alt);
  mixed.addBodyPart(wrap);
  mixed.addBodyPart(plainPart);
  mixed.addBodyPart(htmlPart);
  DataSource ds;
  try {
    File f=new File(getClass().getResource("/log4j.properties").toURI());
    ds=new FileDataSource(f);
  }
 catch (  URISyntaxException ex) {
    ds=new URLDataSource(getClass().getResource("/log4j.properties"));
  }
  DataHandler dh=new DataHandler(ds);
  BodyPart attachmentBodyPart;
  attachmentBodyPart=new MimeBodyPart();
  attachmentBodyPart.setDataHandler(dh);
  attachmentBodyPart.setFileName(dh.getName());
  attachmentBodyPart.setDisposition(Part.ATTACHMENT);
  mixed.addBodyPart(plainPart);
  mixed.addBodyPart(htmlPart);
  mixed.addBodyPart(attachmentBodyPart);
  message.setContent(mixed);
}
