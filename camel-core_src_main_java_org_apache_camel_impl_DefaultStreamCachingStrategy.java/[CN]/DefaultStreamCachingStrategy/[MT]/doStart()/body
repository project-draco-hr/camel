{
  String bufferSize=camelContext.getProperty(BUFFER_SIZE);
  String hold=camelContext.getProperty(THRESHOLD);
  String chiper=camelContext.getProperty(CIPHER_TRANSFORMATION);
  String dir=camelContext.getProperty(TEMP_DIR);
  if (bufferSize != null) {
    this.bufferSize=camelContext.getTypeConverter().convertTo(Integer.class,bufferSize);
  }
  if (hold != null) {
    this.spoolThreshold=camelContext.getTypeConverter().convertTo(Long.class,hold);
  }
  if (chiper != null) {
    this.spoolChiper=chiper;
  }
  if (dir != null) {
    this.temporaryDirectory=camelContext.getTypeConverter().convertTo(File.class,dir);
  }
  LOG.info("StreamCaching in use with {}",this.toString());
  if (temporaryDirectory == null) {
    temporaryDirectory=FileUtil.createNewTempDir();
    LOG.info("Created temporary directory {}",temporaryDirectory);
  }
 else {
    if (!temporaryDirectory.exists()) {
      boolean created=temporaryDirectory.mkdirs();
      if (!created) {
        LOG.warn("Cannot create temporary directory {}",temporaryDirectory);
      }
 else {
        LOG.info("Created temporary directory {}",temporaryDirectory);
      }
    }
  }
}
