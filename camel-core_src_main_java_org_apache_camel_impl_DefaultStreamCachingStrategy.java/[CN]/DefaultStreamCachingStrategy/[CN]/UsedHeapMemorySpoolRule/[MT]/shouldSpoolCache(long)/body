{
  if (spoolUsedHeapMemoryThreshold > 0) {
    long used=heapUsage.getHeapMemoryUsage().getUsed();
    long committed=heapUsage.getHeapMemoryUsage().getCommitted();
    long percentage=committed / used * 100;
    LOG.trace("Heap memory: [used=%sK (%sK\\%), committed=%sK]",new Object[]{used >> 10,percentage,committed >> 10});
    if (percentage >= spoolUsedHeapMemoryThreshold) {
      LOG.trace("Should spool cache {} > {} -> true",percentage,spoolUsedHeapMemoryThreshold);
      return true;
    }
  }
  return false;
}
