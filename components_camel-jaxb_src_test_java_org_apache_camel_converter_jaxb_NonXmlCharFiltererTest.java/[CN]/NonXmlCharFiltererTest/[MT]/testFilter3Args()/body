{
  NonXmlCharFilterer nonXmlCharFiltererMock=createMockBuilder(NonXmlCharFilterer.class).addMockedMethod("isFiltered").createStrictMock();
  char[] buffer=new char[]{'1','2','3','4','5','6'};
  expect(nonXmlCharFiltererMock.isFiltered('3')).andReturn(true);
  expect(nonXmlCharFiltererMock.isFiltered('4')).andReturn(false);
  expect(nonXmlCharFiltererMock.isFiltered('5')).andReturn(true);
  replayAll();
  nonXmlCharFiltererMock.filter(buffer,2,3);
  verifyAll();
  assertArrayEquals("Unexpected buffer contents",new char[]{'1','2',' ','4',' ','6'},buffer);
}
