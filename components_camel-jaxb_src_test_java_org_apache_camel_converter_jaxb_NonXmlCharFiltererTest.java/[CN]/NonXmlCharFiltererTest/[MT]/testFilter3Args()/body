{
  when(nonXmlCharFiltererMock.filter(any(char[].class),anyInt(),anyInt())).thenCallRealMethod();
  when(nonXmlCharFiltererMock.isFiltered(anyChar())).thenReturn(true,false,true);
  char[] buffer=new char[]{'1','2','3','4','5','6'};
  nonXmlCharFiltererMock.filter(buffer,2,3);
  verify(nonXmlCharFiltererMock).isFiltered('3');
  verify(nonXmlCharFiltererMock).isFiltered('4');
  verify(nonXmlCharFiltererMock).isFiltered('5');
  assertArrayEquals("Unexpected buffer contents",new char[]{'1','2',' ','4',' ','6'},buffer);
}
