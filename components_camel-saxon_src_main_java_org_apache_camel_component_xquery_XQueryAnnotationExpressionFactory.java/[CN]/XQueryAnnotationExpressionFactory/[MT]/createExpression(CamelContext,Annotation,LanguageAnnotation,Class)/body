{
  String xQuery=getExpressionFromAnnotation(annotation);
  XQueryBuilder builder=XQueryBuilder.xquery(xQuery);
  if (annotation instanceof XQuery) {
    XQuery xQueryAnnotation=(XQuery)annotation;
    NamespacePrefix[] namespaces=xQueryAnnotation.namespaces();
    if (namespaces != null) {
      for (      NamespacePrefix namespacePrefix : namespaces) {
      }
    }
  }
  if (expressionReturnType.isAssignableFrom(String.class)) {
    builder.setResultsFormat(ResultFormat.String);
  }
 else   if (expressionReturnType.isAssignableFrom(Collection.class)) {
    builder.setResultsFormat(ResultFormat.List);
  }
  return builder;
}
