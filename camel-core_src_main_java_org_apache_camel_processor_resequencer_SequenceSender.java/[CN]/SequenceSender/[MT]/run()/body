{
  while (true) {
    try {
      Exchange exchange=queue.take();
      if (exchange == STOP) {
        LOG.info("exit processing loop after cancellation");
        return;
      }
      processor.process(exchange);
    }
 catch (    InterruptedException e) {
      LOG.info("exit processing loop after interrupt");
      return;
    }
catch (    Exception e) {
      LOG.warn("exception during exchange processing");
    }
  }
}
