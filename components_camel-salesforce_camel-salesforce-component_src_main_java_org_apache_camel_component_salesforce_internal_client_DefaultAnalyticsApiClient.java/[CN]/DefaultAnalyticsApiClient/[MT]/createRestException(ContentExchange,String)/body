{
  final int statusCode=httpExchange.getResponseStatus();
  String responseContent=null;
  try {
    responseContent=httpExchange.getResponseContent();
    if (responseContent != null) {
      final List<RestError> errors=objectMapper.readValue(responseContent,new TypeReference<List<RestError>>(){
      }
);
      return new SalesforceException(errors,statusCode);
    }
  }
 catch (  UnsupportedEncodingException e) {
    String msg="Unexpected Error parsing JSON error response body + [" + responseContent + "] : "+ e.getMessage();
    log.warn(msg,e);
  }
catch (  IOException e) {
    String msg="Unexpected Error parsing JSON error response body + [" + responseContent + "] : "+ e.getMessage();
    log.warn(msg,e);
  }
  return new SalesforceException("Unexpected error: " + reason + ", with content: "+ responseContent,statusCode);
}
