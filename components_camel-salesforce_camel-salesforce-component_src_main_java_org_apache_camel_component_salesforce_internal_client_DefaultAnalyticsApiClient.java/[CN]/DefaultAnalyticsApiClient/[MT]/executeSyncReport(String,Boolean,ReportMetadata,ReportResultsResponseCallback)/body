{
  final boolean useGet=reportMetadata == null;
  final ContentExchange contentExchange=getContentExchange(useGet ? HttpMethods.GET : HttpMethods.POST,reportsUrl(reportId,includeDetails));
  if (!useGet) {
    try {
      final HashMap<String,Object> request=new HashMap<String,Object>();
      request.put("reportMetadata",reportMetadata);
      marshalRequest(request,contentExchange);
    }
 catch (    SalesforceException e) {
      callback.onResponse(null,e);
      return;
    }
  }
  doHttpRequest(contentExchange,new ClientResponseCallback(){
    @Override public void onResponse(    InputStream response,    SalesforceException ex){
      SyncReportResults reportResults=null;
      try {
        reportResults=unmarshalResponse(response,contentExchange,SyncReportResults.class);
      }
 catch (      SalesforceException e) {
        ex=e;
      }
      callback.onResponse(reportResults,ex);
    }
  }
);
}
