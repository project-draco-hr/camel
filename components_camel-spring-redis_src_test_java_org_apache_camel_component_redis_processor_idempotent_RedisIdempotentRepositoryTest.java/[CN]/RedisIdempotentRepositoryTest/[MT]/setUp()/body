{
  redisTemplate=mock(RedisTemplate.class);
  setOperations=mock(SetOperations.class);
  redisConnection=mock(RedisConnection.class);
  redisConnectionFactory=mock(RedisConnectionFactory.class);
  when(redisTemplate.opsForSet()).thenReturn(setOperations);
  when(redisTemplate.getConnectionFactory()).thenReturn(redisConnectionFactory);
  when(redisTemplate.getConnectionFactory().getConnection()).thenReturn(redisConnection);
  idempotentRepository=RedisIdempotentRepository.redisIdempotentRepository(redisTemplate,REPOSITORY);
}
