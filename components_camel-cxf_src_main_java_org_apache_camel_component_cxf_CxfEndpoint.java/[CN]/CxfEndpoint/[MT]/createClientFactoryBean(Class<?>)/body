{
  if (cls == null && !getDataFormat().equals(DataFormat.POJO)) {
    return new ClientProxyFactoryBean(new ClientFactoryBean(new WSDLServiceFactoryBean()){
      @Override protected void createClient(      Endpoint ep){
        setClient(new CamelCxfClientImpl(getBus(),ep));
      }
      protected void initializeAnnotationInterceptors(      Endpoint ep,      Class<?> cls){
      }
    }
){
      public Object create(){
        if (getProperties() == null) {
          setProperties(new HashMap<String,Object>());
        }
        if (getUsername() != null) {
          AuthorizationPolicy authPolicy=new AuthorizationPolicy();
          authPolicy.setUserName(getUsername());
          authPolicy.setPassword(getPassword());
          getProperties().put(AuthorizationPolicy.class.getName(),authPolicy);
        }
        initFeatures();
        getClientFactoryBean().setProperties(getProperties());
        if (bus != null) {
          getClientFactoryBean().setBus(bus);
        }
        if (getDataBinding() != null) {
          getClientFactoryBean().setDataBinding(getDataBinding());
        }
        Client c=getClientFactoryBean().create();
        if (getInInterceptors() != null) {
          c.getInInterceptors().addAll(getInInterceptors());
        }
        if (getOutInterceptors() != null) {
          c.getOutInterceptors().addAll(getOutInterceptors());
        }
        if (getInFaultInterceptors() != null) {
          c.getInFaultInterceptors().addAll(getInFaultInterceptors());
        }
        if (getOutFaultInterceptors() != null) {
          c.getOutFaultInterceptors().addAll(getOutFaultInterceptors());
        }
        return c;
      }
    }
;
  }
  if (CxfEndpointUtils.hasWebServiceAnnotation(cls)) {
    return new JaxWsProxyFactoryBean(new JaxWsClientFactoryBean(){
      @Override protected void createClient(      Endpoint ep){
        setClient(new CamelCxfClientImpl(getBus(),ep));
      }
    }
);
  }
 else {
    return new ClientProxyFactoryBean(new ClientFactoryBean(){
      @Override protected void createClient(      Endpoint ep){
        setClient(new CamelCxfClientImpl(getBus(),ep));
      }
    }
);
  }
}
