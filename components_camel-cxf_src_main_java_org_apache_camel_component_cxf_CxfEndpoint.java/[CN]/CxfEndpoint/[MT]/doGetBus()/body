{
  BusFactory busFactory=BusFactory.newInstance();
  if (getCamelContext() instanceof SpringCamelContext) {
    SpringCamelContext springCamelContext=(SpringCamelContext)getCamelContext();
    ApplicationContext applicationContext=springCamelContext.getApplicationContext();
    busFactory=new org.apache.cxf.bus.spring.SpringBusFactory(applicationContext);
  }
  return busFactory.createBus();
}
