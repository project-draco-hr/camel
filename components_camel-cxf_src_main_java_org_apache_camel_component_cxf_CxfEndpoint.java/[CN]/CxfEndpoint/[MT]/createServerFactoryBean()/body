{
  ObjectHelper.notEmpty(getServiceClass(),CxfConstants.SERVICE_CLASS);
  Class<?> cls=ClassLoaderUtils.loadClass(getServiceClass(),getClass());
  ServerFactoryBean answer=null;
  if (CxfEndpointUtils.hasWebServiceAnnotation(cls)) {
    answer=new JaxWsServerFactoryBean();
  }
 else {
    answer=new ServerFactoryBean();
  }
  setupServerFactoryBean(answer,cls);
  return answer;
}
