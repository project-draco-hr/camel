{
  Object attachments=message.get(CxfConstants.CAMEL_CXF_ATTACHMENTS);
  if (attachments != null) {
    message.setAttachments((Collection<Attachment>)attachments);
    message.remove(CxfConstants.CAMEL_CXF_ATTACHMENTS);
  }
  if (DataFormat.PAYLOAD == message.get(DataFormat.class) && params[0] instanceof CxfPayload) {
    CxfPayload<?> payload=(CxfPayload<?>)params[0];
    List<Source> elements=payload.getBodySources();
    BindingOperationInfo boi=message.get(BindingOperationInfo.class);
    MessageContentsList content=new MessageContentsList();
    int i=0;
    for (    MessagePartInfo partInfo : boi.getInput().getMessageParts()) {
      if (elements.size() > i) {
        if (isSkipPayloadMessagePartCheck()) {
          content.put(partInfo,elements.get(i++));
        }
 else {
          String name=findName(elements,i);
          if (partInfo.getConcreteName().getLocalPart().equals(name)) {
            content.put(partInfo,elements.get(i++));
          }
        }
      }
    }
    if (elements != null && content.size() < elements.size()) {
      throw new IllegalArgumentException("The PayLoad elements cannot fit with the message parts of the BindingOperation. Please check the BindingOperation and PayLoadMessage.");
    }
    message.setContent(List.class,content);
    message.put(Header.HEADER_LIST,payload.getHeaders());
  }
 else {
    super.setParameters(params,message);
  }
  message.remove(DataFormat.class);
}
