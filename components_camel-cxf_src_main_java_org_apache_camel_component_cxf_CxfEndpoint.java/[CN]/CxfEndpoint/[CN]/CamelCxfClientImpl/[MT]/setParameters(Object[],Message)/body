{
  Object attachements=message.get(CxfConstants.CAMEL_CXF_ATTACHMENTS);
  if (attachements != null) {
    message.setAttachments((Collection<Attachment>)attachements);
    message.remove(CxfConstants.CAMEL_CXF_ATTACHMENTS);
  }
  if (DataFormat.PAYLOAD == message.get(DataFormat.class)) {
    CxfPayload<?> payload=(CxfPayload<?>)params[0];
    message.put(List.class,payload.getBody());
    message.put(Header.HEADER_LIST,payload.getHeaders());
  }
 else {
    super.setParameters(params,message);
  }
  message.remove(DataFormat.class);
}
