{
  context.stop();
  exchangeFormatter=new TestExchangeFormatter();
  JndiRegistry registry=getRegistryAsJndi();
  registry.bind("logFormatter",exchangeFormatter);
  assertEquals("",exchangeFormatter.getPrefix());
  context.start();
  try {
    String endpointUri2="log:" + LogCustomFormatterTest.class.getCanonicalName() + "?prefix=foo&bar=no";
    template.requestBody(endpointUri2,"Hello World");
    fail("Should have thrown exception");
  }
 catch (  Exception e) {
    ResolveEndpointFailedException cause=assertIsInstanceOf(ResolveEndpointFailedException.class,e.getCause());
    assertTrue(cause.getMessage().endsWith("Unknown parameters=[{bar=no}]"));
  }
}
