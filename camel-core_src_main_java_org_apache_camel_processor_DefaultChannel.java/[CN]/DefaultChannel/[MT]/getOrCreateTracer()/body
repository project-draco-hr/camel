{
  InterceptStrategy tracer=Tracer.getTracer(camelContext);
  if (tracer == null) {
    if (camelContext.getRegistry() != null) {
      Map<String,Tracer> map=camelContext.getRegistry().lookupByType(Tracer.class);
      if (map.size() == 1) {
        tracer=map.values().iterator().next();
      }
    }
    if (tracer == null) {
      tracer=camelContext.getDefaultTracer();
    }
  }
  for (  LifecycleStrategy strategy : camelContext.getLifecycleStrategies()) {
    if (tracer instanceof Service) {
      strategy.onServiceAdd(camelContext,(Service)tracer,null);
    }
  }
  return tracer;
}
