{
  Exchange exchange=endpoint.createExchange();
  exchange.setProperty(Exchange.TIMER_NAME,endpoint.getTimerName());
  exchange.setProperty(Exchange.TIMER_TIME,endpoint.getTime());
  exchange.setProperty(Exchange.TIMER_PERIOD,endpoint.getPeriod());
  Date now=new Date();
  exchange.setProperty(Exchange.TIMER_FIRED_TIME,now);
  exchange.getIn().setHeader("firedTime",now);
  if (LOG.isTraceEnabled()) {
    LOG.trace("Timer " + endpoint.getTimerName() + " is firing");
  }
  try {
    getProcessor().process(exchange);
    if (exchange.getException() != null) {
      getExceptionHandler().handleException("Error processing exchange",exchange,exchange.getException());
    }
  }
 catch (  Exception e) {
    getExceptionHandler().handleException("Error processing exchange",exchange,exchange.getException());
  }
}
