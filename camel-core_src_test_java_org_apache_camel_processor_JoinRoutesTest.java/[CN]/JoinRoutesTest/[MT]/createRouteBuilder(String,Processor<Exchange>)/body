{
  return new RouteBuilder<Exchange>(){
    public void configure(){
      from("queue:a").choice().when(header("foo").isEqualTo("bar")).to("queue:b").when(header("foo").isEqualTo("cheese")).to("queue:c").otherwise().to("queue:d");
      from("queue:b").to("queue:e");
      from("queue:c").to("queue:e");
      from("queue:d").to("queue:e");
      from("queue:e").process(processor);
    }
  }
;
}
