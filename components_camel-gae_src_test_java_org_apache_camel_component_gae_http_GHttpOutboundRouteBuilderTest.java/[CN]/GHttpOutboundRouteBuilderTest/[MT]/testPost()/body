{
  Exchange result=producerTemplate.request("direct:input1",new Processor(){
    public void process(    Exchange exchange) throws Exception {
      exchange.getIn().setBody("testBody1");
      exchange.getIn().setHeader("test","testHeader1");
    }
  }
);
  assertEquals("testBody1",result.getOut().getBody(String.class));
  assertEquals("testHeader1",result.getOut().getHeader("test"));
  assertEquals("a=b",result.getOut().getHeader("testQuery"));
  assertEquals("POST",result.getOut().getHeader("testMethod"));
  assertEquals(200,result.getOut().getHeader(Exchange.HTTP_RESPONSE_CODE));
}
