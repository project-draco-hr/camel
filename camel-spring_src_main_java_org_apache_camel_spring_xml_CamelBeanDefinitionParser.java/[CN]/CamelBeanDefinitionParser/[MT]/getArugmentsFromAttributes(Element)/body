{
  HashMap<String,Object> attributes=new HashMap<String,Object>();
  NamedNodeMap childNodes=element.getAttributes();
  for (int i=0; i < childNodes.getLength(); i++) {
    Node node=childNodes.item(i);
    if (node.getNodeType() == Node.ATTRIBUTE_NODE) {
      Attr attr=(Attr)node;
      String str=attr.getValue();
      Object value=str;
      if (str.startsWith("#")) {
        str=str.substring(1);
        if (!str.startsWith("#")) {
          value=new RuntimeBeanReference(str);
        }
      }
      attributes.put(attr.getName(),value);
    }
  }
  return attributes;
}
