{
  final Processor exceptionThrower=new MyExceptionThrower();
  return new RouteBuilder(){
    public void configure(){
      errorHandler(deadLetterChannel("mock:dlc").redeliveryDelay(0).maximumRedeliveries(3));
      onException(IllegalArgumentException.class).process(exceptionThrower).to("mock:onexception");
      from("direct:start").to("direct:intermediate").to("mock:result2");
      from("direct:intermediate").setBody(constant("<some-value/>")).process(exceptionThrower).to("mock:intermediate");
    }
  }
;
}
