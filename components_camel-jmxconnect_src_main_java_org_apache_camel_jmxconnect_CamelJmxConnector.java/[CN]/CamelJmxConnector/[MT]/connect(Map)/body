{
  if (!connected) {
    try {
      proxy=new CamelProxyFactoryBean();
      proxy.setCamelContext(getCamelContext());
      proxy.setServiceInterface(javax.management.MBeanServerConnection.class);
      proxy.setServiceInterface(MBeanCamelServerConnection.class);
      proxy.setServiceUrl(endpointUri);
      proxy.afterPropertiesSet();
      client=new MBeanCamelServerConnectionClient((MBeanCamelServerConnection)proxy.getObject());
      connectionId=client.generateId();
      sendConnectionNotificationOpened();
    }
 catch (    Exception e) {
      log.error("Failed to connect: " + e,e);
      IOException ioe=new IOException(e.getMessage());
      throw ioe;
    }
    connected=true;
  }
}
