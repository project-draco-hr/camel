{
  return new RouteBuilder(){
    @Override public void configure() throws Exception {
      ThreadPoolProfile profile=new ThreadPoolBuilder("myProfile").poolSize(2).maxPoolSize(8).rejectedPolicy(ThreadPoolRejectedPolicy.Abort).build();
      context.getExecutorServiceManager().registerThreadPoolProfile(profile);
      from("direct:start").aggregate(header("id"),new BodyInAggregatingStrategy()).completionSize(3).executorServiceRef("myProfile").to("log:foo").to("mock:aggregated");
    }
  }
;
}
