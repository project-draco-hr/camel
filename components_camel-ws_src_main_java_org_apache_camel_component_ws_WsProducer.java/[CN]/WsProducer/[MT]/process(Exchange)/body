{
  Message in=exchange.getIn();
  Object message=in.getBody();
  log.debug("Sending out {}",message);
  if (message != null) {
    if (message instanceof String) {
      sendMessage(getWebSocket(),(String)message,((WsEndpoint)getEndpoint()).isUseStreaming());
    }
 else     if (message instanceof byte[]) {
      sendMessage(getWebSocket(),(byte[])message,((WsEndpoint)getEndpoint()).isUseStreaming());
    }
 else     if (message instanceof InputStream) {
      sendStreamMessage(getWebSocket(),(InputStream)message);
    }
 else {
      getWebSocket().sendTextMessage(in.getMandatoryBody(String.class));
    }
  }
}
