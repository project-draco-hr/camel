{
  MockEndpoint mock=getMockEndpoint("mock:result");
  mock.expectedMessageCount(1);
  String body="Hello Claus.\nYes it does.\n\nRegards James.";
  template.sendBody("direct:a",body);
  Thread.sleep(1000);
  Exchange exchange=mock.assertExchangeReceived(0);
  Message in=exchange.getIn();
  assertEquals("body",body,in.getBody(String.class));
  assertEquals("subject",subject,in.getHeader("subject",String.class));
  mock.assertIsSatisfied();
}
