{
  BeanHolder holder;
  if (bean == null) {
    holder=new RegistryBean(exchange.getContext(),beanName);
  }
 else {
    holder=new ConstantBeanHolder(bean,exchange.getContext());
  }
  if (OgnlHelper.isValidOgnlExpression(method)) {
    Object beanToCall=holder.getBean();
    OgnlInvokeProcessor ognl=new OgnlInvokeProcessor(beanToCall,method);
    try {
      ognl.process(exchange);
      return ognl.getResult();
    }
 catch (    Exception e) {
      throw new RuntimeBeanExpressionException(exchange,beanName,method,e);
    }
  }
 else {
    InvokeProcessor invoke=new InvokeProcessor(holder,method);
    try {
      invoke.process(exchange);
      return invoke.getResult();
    }
 catch (    Exception e) {
      throw new RuntimeBeanExpressionException(exchange,beanName,method,e);
    }
  }
}
