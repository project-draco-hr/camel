{
  AggregationRepository repository=getAggregationRepository();
  if (repository == null && aggregationRepositoryRef != null) {
    repository=routeContext.lookup(aggregationRepositoryRef,AggregationRepository.class);
    if (repository == null) {
      throw new IllegalArgumentException("AggregationRepositoryRef " + aggregationRepositoryRef + " not found in registry.");
    }
  }
  return repository;
}
