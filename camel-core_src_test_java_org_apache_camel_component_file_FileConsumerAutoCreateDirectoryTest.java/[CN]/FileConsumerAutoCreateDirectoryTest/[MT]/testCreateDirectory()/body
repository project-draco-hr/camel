{
  deleteDirectory("target/file/foo");
  Endpoint endpoint=context.getEndpoint("file://target/file/foo");
  Consumer consumer=endpoint.createConsumer(new Processor(){
    public void process(    Exchange exchange) throws Exception {
    }
  }
);
  consumer.start();
  consumer.stop();
  File dir=new File("target/file/foo");
  assertTrue("Directory should be created",dir.exists());
  assertTrue("Directory should be a directory",dir.isDirectory());
}
