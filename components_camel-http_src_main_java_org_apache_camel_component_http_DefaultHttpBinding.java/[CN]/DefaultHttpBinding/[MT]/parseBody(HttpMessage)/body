{
  HttpServletRequest request=httpMessage.getRequest();
  if ("GET".equals(request.getMethod())) {
    return null;
  }
  if (isUseReaderForPayload()) {
    return request.getReader();
  }
 else {
    InputStream is=HttpConverter.toInputStream(request,httpMessage.getExchange());
    if (is == null) {
      return is;
    }
    try {
      CachedOutputStream cos=new CachedOutputStream(httpMessage.getExchange());
      IOHelper.copy(is,cos);
      return cos.getStreamCache();
    }
  finally {
      is.close();
    }
  }
}
