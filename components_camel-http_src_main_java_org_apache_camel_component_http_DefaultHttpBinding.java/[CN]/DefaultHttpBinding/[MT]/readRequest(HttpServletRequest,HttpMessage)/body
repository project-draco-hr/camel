{
  Map parameterMap=request.getParameterMap();
  message.getBody();
  Map<String,Object> headers=message.getHeaders();
  String contentType="";
  Enumeration names=request.getHeaderNames();
  while (names.hasMoreElements()) {
    String name=(String)names.nextElement();
    Object value=request.getHeader(name);
    if (name.toLowerCase().equals("content-type")) {
      name=Exchange.CONTENT_TYPE;
      contentType=(String)value;
    }
    if (headerFilterStrategy != null && !headerFilterStrategy.applyFilterToExternalHeaders(name,value,message.getExchange())) {
      headers.put(name,value);
    }
  }
  String method=request.getMethod();
  if (method.equalsIgnoreCase("GET") || (method.equalsIgnoreCase("POST"))) {
    names=request.getParameterNames();
    while (names.hasMoreElements()) {
      String name=(String)names.nextElement();
      Object value=request.getParameter(name);
      if (headerFilterStrategy != null && !headerFilterStrategy.applyFilterToExternalHeaders(name,value,message.getExchange())) {
        headers.put(name,value);
      }
    }
  }
  headers.put(Exchange.HTTP_METHOD,request.getMethod());
  headers.put(Exchange.HTTP_QUERY,request.getQueryString());
  headers.put(Exchange.HTTP_URL,request.getRequestURL());
  headers.put(Exchange.HTTP_URI,request.getRequestURI());
  headers.put(Exchange.HTTP_PATH,request.getPathInfo());
  headers.put(Exchange.CONTENT_TYPE,request.getContentType());
  headers.put(Exchange.HTTP_CHARACTER_ENCODING,request.getCharacterEncoding());
}
