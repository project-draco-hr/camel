{
  String filter=exchange.getIn().getBody(String.class);
  DirContext ldapContext=(DirContext)getEndpoint().getCamelContext().getRegistry().lookup(remaining);
  try {
    List<SearchResult> data=new ArrayList<SearchResult>();
    NamingEnumeration<SearchResult> namingEnumeration=ldapContext.search(searchBase,filter,getControls());
    while (namingEnumeration.hasMore()) {
      data.add(namingEnumeration.next());
    }
    exchange.getOut().setBody(data);
  }
  finally {
    ldapContext.close();
  }
}
