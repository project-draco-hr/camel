{
  String body=exchange.getIn().getBody(String.class);
  byte alphabet=getProvidedAlphabet(exchange);
  Alphabet alphabetObj;
  if (alphabet == SmppConstants.UNKNOWN_ALPHABET) {
    byte[] message=body.getBytes(charset);
    if (SmppUtils.isGsm0338Encodeable(message)) {
      alphabetObj=Alphabet.ALPHA_DEFAULT;
    }
 else {
      alphabetObj=Alphabet.ALPHA_UCS2;
    }
  }
 else {
    alphabetObj=Alphabet.valueOf(alphabet);
  }
  return alphabetObj;
}
