{
  MockEndpoint mockKeyFlag=getMockEndpoint("mock:encrypted_keyflag");
  mockKeyFlag.setExpectedMessageCount(1);
  template.sendBody("direct:keyflag","Test Message");
  assertMockEndpointsSatisfied();
  List<Exchange> exchanges=mockKeyFlag.getExchanges();
  assertEquals(1,exchanges.size());
  Exchange exchange=exchanges.get(0);
  Message inMess=exchange.getIn();
  assertNotNull(inMess);
  assertEquals(1,inMess.getHeader(PGPDataFormat.NUMBER_OF_ENCRYPTION_KEYS));
  assertEquals(1,inMess.getHeader(PGPDataFormat.NUMBER_OF_SIGNING_KEYS));
}
