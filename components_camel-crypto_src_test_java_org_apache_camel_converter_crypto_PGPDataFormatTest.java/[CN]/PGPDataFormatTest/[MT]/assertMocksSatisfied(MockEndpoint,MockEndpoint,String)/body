{
  awaitAndAssert(unencrypted);
  awaitAndAssert(encrypted);
  for (  Exchange e : unencrypted.getReceivedExchanges()) {
    assertEquals(payload,ExchangeHelper.getMandatoryInBody(e,String.class));
  }
  for (  Exchange e : encrypted.getReceivedExchanges()) {
    byte[] ciphertext=ExchangeHelper.getMandatoryInBody(e,byte[].class);
    assertNotSame(payload,new String(ciphertext));
  }
}
