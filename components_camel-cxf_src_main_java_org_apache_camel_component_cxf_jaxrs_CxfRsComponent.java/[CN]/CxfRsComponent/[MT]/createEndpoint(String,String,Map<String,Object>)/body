{
  CxfRsEndpoint answer=null;
  if (remaining.startsWith(CxfConstants.SPRING_CONTEXT_ENDPOINT)) {
    String beanId=remaining.substring(CxfConstants.SPRING_CONTEXT_ENDPOINT.length());
    if (beanId.startsWith("//")) {
      beanId=beanId.substring(2);
    }
    AbstractJAXRSFactoryBean bean=CamelContextHelper.mandatoryLookup(getCamelContext(),beanId,AbstractJAXRSFactoryBean.class);
    if (bean instanceof BlueprintSupport) {
      answer=new CxfRsBlueprintEndpoint(this.getCamelContext(),bean);
    }
 else {
      answer=new CxfRsSpringEndpoint(this.getCamelContext(),bean);
    }
    if (bean.getProperties() != null) {
      Map<String,Object> copy=new HashMap<String,Object>();
      copy.putAll(bean.getProperties());
      setProperties(answer,copy);
    }
  }
 else {
    answer=new CxfRsEndpoint(remaining,this);
  }
  setProperties(answer,parameters);
  Map<String,String> params=CastUtils.cast(parameters);
  answer.setParameters(params);
  setEndpointHeaderFilterStrategy(answer);
  return answer;
}
