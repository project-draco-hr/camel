{
  ObjectHelper.notNull(paths,"paths");
  Properties prop=cache ? cacheMap.get(paths) : null;
  if (prop == null) {
    prop=propertiesResolver.resolveProperties(getCamelContext(),paths);
    if (cache) {
      cacheMap.put(paths,prop);
    }
  }
  if (!uri.contains(PREFIX_TOKEN) && !uri.startsWith(PREFIX_TOKEN)) {
    uri=PREFIX_TOKEN + uri;
  }
  if (!uri.contains(SUFFIX_TOKEN) && !uri.endsWith(SUFFIX_TOKEN)) {
    uri=uri + SUFFIX_TOKEN;
  }
  if (LOG.isTraceEnabled()) {
    LOG.trace("Parsing uri " + uri + " with properties: "+ prop);
  }
  return propertiesParser.parseUri(uri,prop,PREFIX_TOKEN,SUFFIX_TOKEN);
}
