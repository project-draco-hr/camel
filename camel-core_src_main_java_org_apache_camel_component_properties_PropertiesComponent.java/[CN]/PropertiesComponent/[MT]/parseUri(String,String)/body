{
  ObjectHelper.notNull(paths,"paths");
  String[] locations=parseLocations(paths);
  CacheKey key=new CacheKey(locations);
  Properties prop=cache ? cacheMap.get(key) : null;
  if (prop == null) {
    prop=propertiesResolver.resolveProperties(getCamelContext(),locations);
    if (cache) {
      cacheMap.put(key,prop);
    }
  }
  if (!uri.contains(PREFIX_TOKEN) && !uri.startsWith(PREFIX_TOKEN)) {
    uri=PREFIX_TOKEN + uri;
  }
  if (!uri.contains(SUFFIX_TOKEN) && !uri.endsWith(SUFFIX_TOKEN)) {
    uri=uri + SUFFIX_TOKEN;
  }
  LOG.trace("Parsing uri {} with properties: {}",uri,prop);
  return propertiesParser.parseUri(uri,prop,PREFIX_TOKEN,SUFFIX_TOKEN);
}
