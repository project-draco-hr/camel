{
  if (slot == null) {
    slot=new TimeSlot();
  }
 else {
    if (rejectExecution && slot.isFull() && !slot.isPast()) {
      throw new ThrottlerRejectedExecutionException("Exceed the max request limit!");
    }
    if (slot.isFull() || slot.isPast()) {
      slot=slot.next();
    }
  }
  slot.assign();
  return slot;
}
