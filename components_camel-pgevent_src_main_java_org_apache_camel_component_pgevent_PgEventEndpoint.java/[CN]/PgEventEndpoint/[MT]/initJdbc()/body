{
  PGConnection conn;
  Properties props=new Properties();
  props.putAll(URISupport.parseQuery(uri));
  if (this.getDatasource() != null) {
    conn=(PGConnection)this.getDatasource().getConnection();
  }
 else {
    Class.forName("com.impossibl.postgres.jdbc.PGDriver");
    conn=(PGConnection)DriverManager.getConnection("jdbc:pgsql://" + this.getHost() + ":"+ this.getPort()+ "/"+ this.getDatabase(),this.getUser(),this.getPass());
  }
  return conn;
}
