{
  StringBuilder sb=new StringBuilder();
  sb.append("<routeStat").append(String.format(" id=\"%s\"",route.getId()));
  String stat=dumpStatsAsXml(fullStats);
  sb.append(" ").append(stat.substring(7,stat.length() - 2)).append(">\n");
  if (includeProcessors) {
    sb.append("  <processorStats>\n");
    MBeanServer server=getContext().getManagementStrategy().getManagementAgent().getMBeanServer();
    if (server != null) {
      ObjectName query=ObjectName.getInstance("org.apache.camel:context=*/" + getContext().getManagementName() + ",type=processors,*");
      Set<ObjectName> names=server.queryNames(query,null);
      for (      ObjectName on : names) {
        ManagedProcessorMBean processor=MBeanServerInvocationHandler.newProxyInstance(server,on,ManagedProcessorMBean.class,true);
        if (getRouteId().equals(processor.getRouteId())) {
          sb.append("    <processorStat").append(String.format(" id=\"%s\"",processor.getProcessorId()));
          sb.append(" ").append(processor.dumpStatsAsXml(fullStats).substring(7)).append("\n");
        }
      }
    }
    sb.append("  </processorStats>\n");
  }
  sb.append("</routeStat>");
  return sb.toString();
}
