{
  Object newBody=null;
  InputStreamCache cache=null;
  if (message.getBody() instanceof InputStream) {
    newBody=message.getBody(StreamCache.class);
    if (newBody != null) {
      cache=(InputStreamCache)newBody;
      message.setBody(cache);
    }
  }
  Object answer=message.getBody(String.class);
  if (answer == null) {
    answer=message.getBody();
  }
  if (cache != null) {
    cache.reset();
  }
  return answer;
}
