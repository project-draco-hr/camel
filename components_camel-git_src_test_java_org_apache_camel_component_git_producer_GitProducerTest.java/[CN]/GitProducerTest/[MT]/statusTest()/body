{
  Repository repository=getTestRepository();
  File fileToAdd=new File(GIT_LOCAL_REPO,FILENAME_TO_ADD);
  fileToAdd.createNewFile();
  template.send("direct:add",new Processor(){
    @Override public void process(    Exchange exchange) throws Exception {
      exchange.getIn().setHeader(GitConstants.GIT_FILE_NAME,FILENAME_TO_ADD);
    }
  }
);
  File gitDir=new File(GIT_LOCAL_REPO,".git");
  assertEquals(gitDir.exists(),true);
  Status status=template.requestBody("direct:status","",Status.class);
  assertTrue(status.getAdded().contains(FILENAME_TO_ADD));
  repository.close();
}
