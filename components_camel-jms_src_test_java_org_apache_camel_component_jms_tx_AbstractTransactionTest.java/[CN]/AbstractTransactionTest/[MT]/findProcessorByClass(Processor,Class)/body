{
  while (true) {
    processor=unwrapDeadLetter(processor);
    if (processor instanceof Channel) {
      processor=((Channel)processor).getNextProcessor();
    }
 else     if (processor instanceof DelegateProcessor) {
      processor=((DelegateProcessor)processor).getProcessor();
    }
 else     if (processor instanceof DelegateAsyncProcessor) {
      processor=((DelegateAsyncProcessor)processor).getProcessor();
    }
 else     if (processor instanceof Pipeline) {
      for (      Processor p : ((Pipeline)processor).getProcessors()) {
        p=findProcessorByClass(p,findClass);
        if (p != null && p.getClass().isAssignableFrom(findClass)) {
          processor=p;
          return processor;
        }
      }
    }
 else {
      return processor;
    }
  }
}
