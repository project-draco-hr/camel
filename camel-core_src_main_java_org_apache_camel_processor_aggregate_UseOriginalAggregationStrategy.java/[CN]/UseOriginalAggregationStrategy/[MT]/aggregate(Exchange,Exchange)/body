{
  Exchange answer=original.get();
  if (answer == null) {
    throw new IllegalStateException("Original Exchange has not been set");
  }
  if (propagateException) {
    Exception exception=checkException(oldExchange,newExchange);
    if (exception != null) {
      answer.setException(exception);
    }
  }
  return answer;
}
