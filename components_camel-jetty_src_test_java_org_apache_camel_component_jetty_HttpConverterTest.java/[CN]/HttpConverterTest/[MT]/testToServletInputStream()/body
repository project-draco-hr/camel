{
  context.addRoutes(new RouteBuilder(){
    @Override public void configure() throws Exception {
      from("jetty://http://localhost:9080/test").process(new Processor(){
        public void process(        Exchange exchange) throws Exception {
          HttpMessage msg=exchange.getIn(HttpMessage.class);
          ServletInputStream sis=HttpConverter.toServletInputStream(msg);
          assertNotNull(sis);
          String s=exchange.getContext().getTypeConverter().convertTo(String.class,sis);
          assertEquals("Hello World",s);
        }
      }
).transform(constant("Bye World"));
    }
  }
);
  context.start();
  String out=template.requestBody("http://localhost:9080/test","Hello World",String.class);
  assertEquals("Bye World",out);
}
