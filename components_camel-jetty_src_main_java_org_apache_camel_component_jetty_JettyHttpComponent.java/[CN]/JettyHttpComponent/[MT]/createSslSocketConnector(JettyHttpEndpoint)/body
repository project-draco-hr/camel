{
  SslSelectChannelConnector answer=null;
  SSLContextParameters endpointSslContextParameters=endpoint.getSslContextParameters();
  if (endpointSslContextParameters != null) {
    SslContextFactory contextFact=createSslContextFactory(endpointSslContextParameters);
    for (    Constructor<?> c : SslSelectChannelConnector.class.getConstructors()) {
      if (c.getParameterTypes().length == 1 && c.getParameterTypes()[0].isInstance(contextFact)) {
        answer=(SslSelectChannelConnector)c.newInstance(contextFact);
      }
    }
  }
 else {
    answer=new SslSelectChannelConnector();
    String keystoreProperty=System.getProperty(JETTY_SSL_KEYSTORE);
    if (keystoreProperty != null) {
      setKeyStorePath(answer,keystoreProperty);
    }
 else     if (sslKeystore != null) {
      setKeyStorePath(answer,sslKeystore);
    }
    String keystorePassword=System.getProperty(JETTY_SSL_KEYPASSWORD);
    if (keystorePassword != null) {
      setKeyManagerPassword(answer,keystorePassword);
    }
 else     if (sslKeyPassword != null) {
      setKeyManagerPassword(answer,sslKeyPassword);
    }
    String password=System.getProperty(JETTY_SSL_PASSWORD);
    if (password != null) {
      setKeyStorePassword(answer,password);
    }
 else     if (sslPassword != null) {
      setKeyStorePassword(answer,sslPassword);
    }
  }
  if (getSslSocketConnectorProperties() != null) {
    if (endpointSslContextParameters != null) {
      LOG.warn("An SSLContextParameters instance is configured " + "in addition to SslSocketConnectorProperties.  Any SslSocketConnector properties" + "related to the SSLContext will be ignored in favor of the settings provided through"+ "SSLContextParameters.");
    }
    Map<String,Object> properties=new HashMap<String,Object>(getSslSocketConnectorProperties());
    IntrospectionSupport.setProperties(answer,properties);
    if (properties.size() > 0) {
      throw new IllegalArgumentException("There are " + properties.size() + " parameters that couldn't be set on the SslSocketConnector."+ " Check the uri if the parameters are spelt correctly and that they are properties of the SslSocketConnector."+ " Unknown parameters=["+ properties+ "]");
    }
  }
  if (answer != null && requestBufferSize != null) {
    answer.setRequestBufferSize(requestBufferSize);
  }
  if (answer != null && requestHeaderSize != null) {
    answer.setRequestHeaderSize(requestHeaderSize);
  }
  if (answer != null && responseBufferSize != null) {
    answer.setResponseBufferSize(responseBufferSize);
  }
  if (answer != null && responseHeaderSize != null) {
    answer.setResponseBufferSize(responseHeaderSize);
  }
  return answer;
}
