{
  Map<String,Object> httpClientParameters=new HashMap<String,Object>(parameters);
  List<Handler> handlerList=resolveAndRemoveReferenceListParameter(parameters,"handlers",Handler.class);
  HttpBinding binding=resolveAndRemoveReferenceParameter(parameters,"httpBindingRef",HttpBinding.class);
  JettyHttpBinding jettyBinding=resolveAndRemoveReferenceParameter(parameters,"jettyHttpBindingRef",JettyHttpBinding.class);
  Boolean throwExceptionOnFailure=getAndRemoveParameter(parameters,"throwExceptionOnFailure",Boolean.class);
  Boolean transferException=getAndRemoveParameter(parameters,"transferException",Boolean.class);
  Boolean bridgeEndpoint=getAndRemoveParameter(parameters,"bridgeEndpoint",Boolean.class);
  Boolean matchOnUriPrefix=getAndRemoveParameter(parameters,"matchOnUriPrefix",Boolean.class);
  Boolean enableJmx=getAndRemoveParameter(parameters,"enableJmx",Boolean.class);
  Boolean enableMultipartFilter=getAndRemoveParameter(parameters,"enableMultipartFilter",Boolean.class,true);
  Filter multipartFilter=resolveAndRemoveReferenceParameter(parameters,"multipartFilterRef",Filter.class);
  List<Filter> filters=resolveAndRemoveReferenceListParameter(parameters,"filtersRef",Filter.class);
  Long continuationTimeout=getAndRemoveParameter(parameters,"continuationTimeout",Long.class);
  Boolean useContinuation=getAndRemoveParameter(parameters,"useContinuation",Boolean.class);
  String httpMethodRestrict=getAndRemoveParameter(parameters,"httpMethodRestrict",String.class);
  SSLContextParameters sslContextParameters=resolveAndRemoveReferenceParameter(parameters,"sslContextParametersRef",SSLContextParameters.class);
  SSLContextParameters ssl=sslContextParameters != null ? sslContextParameters : this.sslContextParameters;
  HttpClient client=null;
  if (IntrospectionSupport.hasProperties(parameters,"httpClient.") || sslContextParameters != null) {
    client=createHttpClient(httpClientMinThreads,httpClientMaxThreads,ssl);
    if (IntrospectionSupport.hasProperties(parameters,"httpClient.")) {
      IntrospectionSupport.setProperties(client,parameters,"httpClient.");
      validateParameters(uri,parameters,"httpClient.");
    }
    if (ssl != null) {
      ((CamelHttpClient)client).setSSLContext(ssl.createSSLContext());
    }
  }
  for (  String key : parameters.keySet()) {
    httpClientParameters.remove(key);
  }
  String address=remaining;
  URI addressUri=new URI(UnsafeUriCharactersEncoder.encode(address));
  URI endpointUri=URISupport.createRemainingURI(addressUri,httpClientParameters);
  URI httpUri=URISupport.createRemainingURI(addressUri,parameters);
  JettyHttpEndpoint endpoint=new JettyHttpEndpoint(this,endpointUri.toString(),httpUri);
  setEndpointHeaderFilterStrategy(endpoint);
  if (client != null) {
    endpoint.setClient(client);
  }
  if (handlerList.size() > 0) {
    endpoint.setHandlers(handlerList);
  }
  if (binding == null) {
    binding=getHttpBinding();
  }
  if (binding != null) {
    endpoint.setBinding(binding);
  }
  if (jettyBinding == null) {
    jettyBinding=getJettyHttpBinding();
  }
  if (jettyBinding != null) {
    endpoint.setJettyBinding(jettyBinding);
  }
  if (throwExceptionOnFailure != null) {
    endpoint.setThrowExceptionOnFailure(throwExceptionOnFailure);
  }
  if (transferException != null) {
    endpoint.setTransferException(transferException);
  }
  if (bridgeEndpoint != null) {
    endpoint.setBridgeEndpoint(bridgeEndpoint);
  }
  if (matchOnUriPrefix != null) {
    endpoint.setMatchOnUriPrefix(matchOnUriPrefix);
  }
  if (enableJmx != null) {
    endpoint.setEnableJmx(enableJmx);
  }
 else {
    endpoint.setEnableJmx(isEnableJmx());
  }
  endpoint.setEnableMultipartFilter(enableMultipartFilter);
  if (multipartFilter != null) {
    endpoint.setMultipartFilter(multipartFilter);
    endpoint.setEnableMultipartFilter(true);
  }
  if (filters != null) {
    endpoint.setFilters(filters);
  }
  if (continuationTimeout != null) {
    endpoint.setContinuationTimeout(continuationTimeout);
  }
  if (useContinuation != null) {
    endpoint.setUseContinuation(useContinuation);
  }
  if (httpMethodRestrict != null) {
    endpoint.setHttpMethodRestrict(httpMethodRestrict);
  }
  if (ssl != null) {
    endpoint.setSslContextParameters(ssl);
  }
  setProperties(endpoint,parameters);
  return endpoint;
}
