{
  super.doStop();
  if (CONNECTORS.size() > 0) {
    for (    String connectorKey : CONNECTORS.keySet()) {
      ConnectorRef connectorRef=CONNECTORS.get(connectorKey);
      if (connectorRef != null && connectorRef.getRefCount() == 0) {
        connectorRef.server.removeConnector(connectorRef.connector);
        connectorRef.connector.stop();
        connectorRef.server.stop();
        if (mbContainer != null) {
          mbContainer.removeBean(connectorRef.server);
          mbContainer.removeBean(connectorRef.connector);
        }
        CONNECTORS.remove(connectorKey);
      }
    }
  }
  if (httpClient != null) {
    httpClient.stop();
  }
  if (httpClientThreadPool != null && httpClientThreadPool instanceof LifeCycle) {
    LifeCycle lc=(LifeCycle)httpClientThreadPool;
    lc.stop();
  }
  if (mbContainer != null) {
    mbContainer.stop();
  }
}
