{
  super.doStop();
  if (CONNECTORS.size() > 0) {
    for (    ConnectorRef connectorRef : CONNECTORS.values()) {
      connectorRef.server.removeConnector(connectorRef.connector);
      connectorRef.connector.stop();
      connectorRef.server.stop();
      MBeanContainer containerToClean=getMbContainer();
      if (containerToClean != null) {
        containerToClean.removeBean(connectorRef.server);
        containerToClean.removeBean(connectorRef.connector);
      }
    }
    CONNECTORS.clear();
  }
  if (httpClient != null) {
    httpClient.stop();
  }
  if (httpClientThreadPool != null && httpClientThreadPool instanceof LifeCycle) {
    LifeCycle lc=(LifeCycle)httpClientThreadPool;
    lc.stop();
  }
  if (mbContainer != null) {
    mbContainer.stop();
  }
}
