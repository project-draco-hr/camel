{
  ServletContextHandler context=new ServletContextHandler(server,"/",ServletContextHandler.NO_SECURITY | ServletContextHandler.NO_SESSIONS);
  context.setConnectorNames(new String[]{connector.getName()});
  if (handlers != null && !handlers.isEmpty()) {
    for (    Handler handler : handlers) {
      if (handler instanceof HandlerWrapper) {
        ((HandlerWrapper)handler).setHandler(server.getHandler());
        server.setHandler(handler);
      }
 else {
        HandlerCollection handlerCollection=new HandlerCollection();
        handlerCollection.addHandler(server.getHandler());
        handlerCollection.addHandler(handler);
        server.setHandler(handlerCollection);
      }
    }
  }
  CamelContinuationServlet camelServlet=new CamelContinuationServlet();
  Long timeout=endpoint.getContinuationTimeout() != null ? endpoint.getContinuationTimeout() : getContinuationTimeout();
  if (timeout != null) {
    LOG.info("Using Jetty continuation timeout: " + timeout + " millis for: "+ endpoint);
    camelServlet.setContinuationTimeout(timeout);
  }
 else {
    LOG.info("Using default Jetty continuation timeout for: " + endpoint);
  }
  ServletHolder holder=new ServletHolder();
  holder.setServlet(camelServlet);
  context.addServlet(holder,"/*");
  return camelServlet;
}
