{
  getMockEndpoint("mock:error").expectedMessageCount(0);
  getMockEndpoint("mock:foo").expectedBodiesReceived("Hello World");
  getMockEndpoint("mock:result").expectedBodiesReceived("Bye World");
  Map<String,Object> headers=new HashMap<String,Object>();
  headers.put(ShiroSecurityConstants.SHIRO_SECURITY_USERNAME,"ringo");
  headers.put(ShiroSecurityConstants.SHIRO_SECURITY_PASSWORD,"starr");
  template.requestBodyAndHeaders("direct:start","Hello World",headers);
  assertMockEndpointsSatisfied();
}
