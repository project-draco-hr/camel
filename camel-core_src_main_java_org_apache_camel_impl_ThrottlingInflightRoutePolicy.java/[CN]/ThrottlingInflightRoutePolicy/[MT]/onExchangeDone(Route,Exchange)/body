{
  Consumer consumer=route.getConsumer();
  int size=getSize(consumer,exchange);
  if (maxInflightExchanges > 0 && size > maxInflightExchanges) {
    try {
      lock.lock();
      stopConsumer(size,consumer);
    }
 catch (    Exception e) {
      handleException(e);
    }
 finally {
      lock.unlock();
    }
  }
  size=getSize(consumer,exchange);
  if (size <= resumeInflightExchanges) {
    try {
      lock.lock();
      startConsumer(size,consumer);
    }
 catch (    Exception e) {
      handleException(e);
    }
 finally {
      lock.unlock();
    }
  }
}
