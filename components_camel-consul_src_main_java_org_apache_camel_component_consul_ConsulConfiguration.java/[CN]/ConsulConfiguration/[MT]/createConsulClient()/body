{
  Consul.Builder builder=Consul.builder();
  builder.withPing(pingInstance);
  if (ObjectHelper.isNotEmpty(url)) {
    builder.withUrl(url);
  }
  if (ObjectHelper.isNotEmpty(context) && ObjectHelper.isNotEmpty(sslContextParameters)) {
    builder.withSslContext(sslContextParameters.createSSLContext(context));
  }
  if (ObjectHelper.isNotEmpty(aclToken)) {
    builder.withAclToken(aclToken);
  }
  if (requiresBasicAuthentication()) {
    builder.withBasicAuth(userName,password);
  }
  if (ObjectHelper.isNotEmpty(connectTimeoutMillis)) {
    builder.withConnectTimeoutMillis(connectTimeoutMillis);
  }
  if (ObjectHelper.isNotEmpty(readTimeoutMillis)) {
    builder.withReadTimeoutMillis(readTimeoutMillis);
  }
  if (ObjectHelper.isNotEmpty(writeTimeoutMillis)) {
    builder.withWriteTimeoutMillis(writeTimeoutMillis);
  }
  return builder.build();
}
