{
  Comparator<? super Exchange> comp=comparator;
  if (allowDuplicates) {
    comp=new Comparator<Exchange>(){
      public int compare(      Exchange o1,      Exchange o2){
        int answer=comparator.compare(o1,o2);
        if (answer == 0) {
          return 1;
        }
        return answer;
      }
    }
;
  }
  return new TreeSet<Exchange>(comp);
}
