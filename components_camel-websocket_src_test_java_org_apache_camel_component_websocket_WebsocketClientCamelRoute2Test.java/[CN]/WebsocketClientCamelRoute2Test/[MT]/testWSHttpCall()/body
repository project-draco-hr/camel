{
  getMockEndpoint("mock:websocket").expectedBodiesReceived(">> Welcome on board!");
  WebSocketConnection webSocketConnection=new WebSocketConnection(new URI("ws://127.0.0.1:9292/test"));
  webSocketConnection.setEventHandler(new WebSocketEventHandler(){
    public void onOpen(){
      log.info("--open");
    }
    public void onMessage(    WebSocketMessage message){
      log.info("--received message: " + message.getText());
    }
    public void onClose(){
      log.info("--close");
    }
  }
);
  webSocketConnection.connect();
  log.info(">>> Connection established.");
  webSocketConnection.send("Hello from WS Client");
  webSocketConnection.close();
  getMockEndpoint("mock:websocket").assertIsSatisfied();
}
