{
  String queryString=exchange.getIn().getHeader(Exchange.HTTP_QUERY,String.class);
  if (queryString == null) {
    queryString=endpoint.getHttpUri().getRawQuery();
  }
  HttpMethods answer;
  HttpMethods m=exchange.getIn().getHeader(Exchange.HTTP_METHOD,HttpMethods.class);
  if (m != null) {
    answer=m;
  }
 else   if (queryString != null) {
    answer=HttpMethods.GET;
  }
 else {
    answer=hasPayload ? HttpMethods.POST : HttpMethods.GET;
  }
  return answer;
}
