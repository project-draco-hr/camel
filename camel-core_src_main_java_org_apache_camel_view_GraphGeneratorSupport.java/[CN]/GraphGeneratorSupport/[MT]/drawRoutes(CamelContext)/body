{
  File parent=new File(dir);
  if (makeParentDirs) {
    parent.mkdirs();
  }
  @SuppressWarnings("deprecation") List<RouteDefinition> routes=context.getRouteDefinitions();
  routeGroupMap=createRouteGroupMap(routes);
  generateFile(parent,"routes" + extension,routeGroupMap);
  if (routeGroupMap.size() >= 1) {
    Set<Map.Entry<String,List<RouteDefinition>>> entries=routeGroupMap.entrySet();
    for (    Map.Entry<String,List<RouteDefinition>> entry : entries) {
      Map<String,List<RouteDefinition>> map=new HashMap<String,List<RouteDefinition>>();
      String group=entry.getKey();
      map.put(group,entry.getValue());
      generateFile(parent,group + extension,map);
    }
  }
}
