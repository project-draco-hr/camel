{
  String prefix=createPrefix();
  IndexRequest indexRequest=new IndexRequest(prefix + "foo",prefix + "bar",prefix + "testId");
  indexRequest.source("{\"" + prefix + "content\": \""+ prefix+ "hello\"}");
  template.requestBody("direct:index",indexRequest,String.class);
  UpdateRequest request=new UpdateRequest(prefix + "foo",prefix + "bar",prefix + "testId");
  request.doc("{\"" + prefix + "content2\": \""+ prefix+ "hello2\"}");
  String documentId=template.requestBody("direct:update",request,String.class);
  assertThat(documentId,equalTo(prefix + "testId"));
}
