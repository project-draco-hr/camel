{
  getMockEndpoint("mock:foo").expectedMessageCount(1);
  getMockEndpoint("mock:bar").expectedMessageCount(1);
  context.startRoute("bar");
  template.sendBody("direct:foo","Hello World");
  template.sendBody("direct:bar","Bye World");
  assertMockEndpointsSatisfied();
  context.stop();
  assertTrue("Route foo should be stopped",context.getRouteStatus("foo").isStopped());
  assertTrue("Route bar should be stopped",context.getRouteStatus("bar").isStopped());
}
