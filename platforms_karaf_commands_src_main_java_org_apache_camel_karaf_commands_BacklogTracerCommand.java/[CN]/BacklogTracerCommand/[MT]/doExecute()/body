{
  CamelContext camel=camelController.getCamelContext(context);
  if (camel == null) {
    System.err.println("CamelContext " + context + " not found.");
    return null;
  }
  BacklogTracer backlogTracer=BacklogTracer.getBacklogTracer(camel);
  if (backlogTracer == null) {
    backlogTracer=(BacklogTracer)camel.getDefaultBacklogTracer();
  }
  if ("enable".equals(action)) {
    backlogTracer.setEnabled(true);
    System.out.println("BacklogTracer enabled on " + camel.getName());
    return null;
  }
 else   if ("disable".equals(action)) {
    backlogTracer.setEnabled(false);
    System.out.println("BacklogTracer disabled on " + camel.getName());
    return null;
  }
 else   if ("summary".equals(action)) {
    System.out.println("BacklogTracer context:" + camel.getName());
    System.out.println("BacklogTracer enabled:" + backlogTracer.isEnabled());
    System.out.println("BacklogTracer backlogSize:" + backlogTracer.getBacklogSize());
    System.out.println("BacklogTracer tracerCount:" + backlogTracer.getTraceCounter());
    return null;
  }
 else   if ("dump".equals(action)) {
    if (format == null || "xml".equals(format)) {
      System.out.println("--------------------------------------------------------");
      System.out.println("BacklogTracer messages:\n" + backlogTracer.dumpAllTracedMessagesAsXml());
      return null;
    }
 else     if ("table".equals(format)) {
      JAXBContext context=JAXBContext.newInstance(MessageDump.class);
      Unmarshaller unmarshaller=context.createUnmarshaller();
      SimpleDateFormat sdf=new SimpleDateFormat(BacklogTracerEventMessage.TIMESTAMP_FORMAT);
      List<BacklogTracerEventMessage> events=backlogTracer.dumpAllTracedMessages();
      for (      BacklogTracerEventMessage event : events) {
        System.out.println("--------------------------------------------------------");
        System.out.println("#" + event.getUid() + "\tExchangeId: "+ event.getExchangeId());
        System.out.println("Timestamp: " + sdf.format(event.getTimestamp()));
        System.out.println("Route: " + event.getRouteId() + " --> "+ event.getToNode());
        MessageDump msg=(MessageDump)unmarshaller.unmarshal(new StringReader(event.getMessageAsXml()));
        String breadcrumb=getBreadcrumbId(msg.getHeaders());
        if (breadcrumb != null) {
          System.out.println("Breadcrumb: " + breadcrumb);
        }
        System.out.println("Body: " + msg.getBody().getValue());
      }
    }
  }
  return null;
}
