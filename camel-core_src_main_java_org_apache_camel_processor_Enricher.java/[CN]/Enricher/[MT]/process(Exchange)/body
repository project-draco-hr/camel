{
  Exchange resourceExchange=createResourceExchange(exchange,ExchangePattern.InOut);
  producer.process(resourceExchange);
  if (resourceExchange.isFailed()) {
    copyResultsPreservePattern(exchange,resourceExchange);
  }
 else {
    prepareResult(exchange);
    Exchange aggregatedExchange=aggregationStrategy.aggregate(exchange,resourceExchange);
    copyResultsPreservePattern(exchange,aggregatedExchange);
  }
}
