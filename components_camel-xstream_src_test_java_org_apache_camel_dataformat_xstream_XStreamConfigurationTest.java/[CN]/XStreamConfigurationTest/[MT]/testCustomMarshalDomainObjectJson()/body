{
  MockEndpoint mock=getMockEndpoint("mock:result");
  mock.expectedMessageCount(2);
  PurchaseOrder order=new PurchaseOrder();
  order.setName("Tiger");
  order.setAmount(1);
  order.setPrice(99.95);
  List<Double> list=new ArrayList<Double>();
  list.add(11.5);
  list.add(97.5);
  String ordereString="{\"purchase-order\":{\"@name\":\"Tiger\",\"@price\":\"99.95\",\"@amount\":\"1.0\"}}";
  mock.expectedBodiesReceived(new Object[]{ordereString,order});
  template.sendBody("direct:marshal-json",order);
  template.sendBody("direct:unmarshal-json",ordereString);
  mock.assertIsSatisfied();
}
