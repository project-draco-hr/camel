{
  RunInstancesResult result=new RunInstancesResult();
  if (runInstancesRequest.getImageId().equals("test-1")) {
    Reservation res=new Reservation();
    res.setOwnerId("1");
    res.setRequesterId("user-test");
    res.setReservationId("res-1");
    Collection<Instance> instances=new ArrayList();
    Instance ins=new Instance();
    ins.setImageId(runInstancesRequest.getImageId());
    ins.setInstanceType(runInstancesRequest.getInstanceType());
    ins.setInstanceId("instance-1");
    if (runInstancesRequest.getSecurityGroups().contains("secgroup-1") && runInstancesRequest.getSecurityGroups().contains("secgroup-2")) {
      GroupIdentifier id1=new GroupIdentifier();
      id1.setGroupId("id-1");
      id1.setGroupName("secgroup-1");
      GroupIdentifier id2=new GroupIdentifier();
      id2.setGroupId("id-2");
      id2.setGroupName("secgroup-2");
      Collection secGroups=new ArrayList<GroupIdentifier>();
      secGroups.add(id1);
      secGroups.add(id2);
      ins.setSecurityGroups(secGroups);
    }
    instances.add(ins);
    res.setInstances(instances);
    result.setReservation(res);
  }
 else {
    throw new AmazonServiceException("The image-id doesn't exists");
  }
  return result;
}
