{
  Object objBody=newExchange.getIn().getBody();
  if (!(objBody instanceof ActionRequest))   throw new RuntimeCamelException("Invalid body type for elastisearch bulk request aggregation strategy: " + objBody.getClass().getName());
  ActionRequest newBody=(ActionRequest)objBody;
  BulkRequest request=null;
  if (oldExchange == null) {
    request=new BulkRequest();
    request.add(newBody);
    newExchange.getIn().setBody(request);
    return newExchange;
  }
 else {
    request=oldExchange.getIn().getBody(BulkRequest.class);
    request.add(newBody);
    return oldExchange;
  }
}
