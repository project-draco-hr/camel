{
  MockEndpoint mockEndpoint=resolveMandatoryEndpoint("mock:results",MockEndpoint.class);
  mockEndpoint.expectedMessageCount(1);
  InputStream answer=(InputStream)template.requestBody(uri,inputText);
  verifyMockGotExpectedText(mockEndpoint,expectedText);
  String lastLine=readLastLine(answer);
  assertNotNull("last response line",lastLine);
  assertEquals("response matches: " + expectedText,expectedText,lastLine);
}
