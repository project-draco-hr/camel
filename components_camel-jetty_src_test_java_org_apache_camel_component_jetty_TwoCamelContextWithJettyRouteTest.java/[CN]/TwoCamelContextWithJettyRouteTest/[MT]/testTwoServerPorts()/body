{
  CamelContext contextB=new DefaultCamelContext();
  contextB.addRoutes(new RouteBuilder(){
    @Override public void configure() throws Exception {
      from("jetty://http://localhost:" + port2 + "/myotherapp").process(new Processor(){
        public void process(        Exchange exchange) throws Exception {
          String in=exchange.getIn().getBody(String.class);
          exchange.getOut().setBody("Hi " + in);
        }
      }
);
    }
  }
);
  contextB.start();
  String reply=template.requestBody("direct:a","World",String.class);
  assertEquals("Bye World",reply);
  reply=template.requestBody("direct:b","Camel",String.class);
  assertEquals("Hi Camel",reply);
  contextB.stop();
  reply=template.requestBody("direct:a","Earth",String.class);
  assertEquals("Bye Earth",reply);
  try {
    reply=template.requestBody("direct:b","Moon",String.class);
    fail("Expert the exception here");
  }
 catch (  Exception ex) {
    assertTrue("Should get the ConnectException",ex.getCause() instanceof ConnectException);
  }
}
