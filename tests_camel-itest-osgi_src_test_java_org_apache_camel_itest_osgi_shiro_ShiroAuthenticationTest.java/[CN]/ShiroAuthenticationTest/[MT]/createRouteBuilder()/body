{
  return new RouteBuilder(){
    public void configure(){
      final ShiroSecurityPolicy securityPolicy=new ShiroSecurityPolicy("classpath:/org/apache/camel/itest/osgi/shiro/securityconfig.ini",passPhrase);
      onException(UnknownAccountException.class).to("mock:authenticationException");
      onException(IncorrectCredentialsException.class).to("mock:authenticationException");
      onException(LockedAccountException.class).to("mock:authenticationException");
      onException(AuthenticationException.class).to("mock:authenticationException");
      from("direct:secureEndpoint").to("log:incoming payload").policy(securityPolicy).to("mock:success");
    }
  }
;
}
