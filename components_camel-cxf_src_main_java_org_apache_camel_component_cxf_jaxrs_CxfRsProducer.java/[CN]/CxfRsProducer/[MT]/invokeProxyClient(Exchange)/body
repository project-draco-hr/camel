{
  Message inMessage=exchange.getIn();
  Object[] varValues=inMessage.getHeader(CxfConstants.CAMEL_CXF_RS_VAR_VALUES,Object[].class);
  String methodName=inMessage.getHeader(CxfConstants.OPERATION_NAME,String.class);
  Client target=null;
  JAXRSClientFactoryBean cfb=clientFactoryBeanCache.get(CxfEndpointUtils.getEffectiveAddress(exchange,((CxfRsEndpoint)getEndpoint()).getAddress()));
  Bus bus=((CxfRsEndpoint)getEndpoint()).getBus();
  if (bus != null) {
    cfb.setBus(bus);
  }
  if (varValues == null) {
    target=cfb.create();
  }
 else {
    target=cfb.createWithValues(varValues);
  }
  setupClientHeaders(target,exchange);
  JAXRSServiceFactoryBean sfb=cfb.getServiceFactory();
  sfb.getResourceClasses();
  Object[] parameters=null;
  if (inMessage.getBody() != null) {
    parameters=inMessage.getBody(Object[].class);
  }
  Method method=findRightMethod(sfb.getResourceClasses(),methodName,getParameterTypes(parameters));
  Object response=method.invoke(target,parameters);
  int statesCode=target.getResponse().getStatus();
  if (throwException) {
    if (response instanceof Response) {
      Integer respCode=((Response)response).getStatus();
      if (respCode > 207) {
        throw populateCxfRsProducerException(exchange,(Response)response,respCode);
      }
    }
  }
  CxfRsEndpoint cxfRsEndpoint=(CxfRsEndpoint)getEndpoint();
  CxfRsBinding binding=cxfRsEndpoint.getBinding();
  if (exchange.getPattern().isOutCapable()) {
    LOG.trace("Response body = {}",response);
    exchange.getOut().getHeaders().putAll(exchange.getIn().getHeaders());
    exchange.getOut().setBody(binding.bindResponseToCamelBody(response,exchange));
    exchange.getOut().getHeaders().putAll(binding.bindResponseHeadersToCamelHeaders(response,exchange));
    exchange.getOut().setHeader(Exchange.HTTP_RESPONSE_CODE,statesCode);
  }
}
