{
  HipchatComponent component=new HipchatComponent(Mockito.mock(CamelContext.class));
  HashMap<String,Object> parameters=new HashMap<String,Object>();
  parameters.put("authToken","token");
  parameters.put("protocol","https");
  HipchatEndpoint endpoint=(HipchatEndpoint)component.createEndpoint("hipchat://localhost?authToken=token&protocol=https","localhost",parameters);
  assertEquals("localhost",endpoint.getConfiguration().getHost());
  assertEquals(new Integer(80),endpoint.getConfiguration().getPort());
  assertEquals("https",endpoint.getConfiguration().getProtocol());
  assertEquals("token",endpoint.getConfiguration().getAuthToken());
  assertEquals("https://localhost:80",endpoint.getConfiguration().hipChatUrl());
  assertEquals("/a?auth_token=token",endpoint.getConfiguration().withAuthToken("/a"));
}
