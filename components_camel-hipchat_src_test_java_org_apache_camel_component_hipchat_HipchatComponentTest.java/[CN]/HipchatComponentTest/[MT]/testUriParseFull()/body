{
  HipchatComponent component=new HipchatComponent(Mockito.mock(CamelContext.class));
  HashMap<String,Object> parameters=new HashMap<String,Object>();
  parameters.put("authToken","token");
  parameters.put("protocol","https");
  parameters.put("consumeUsers","@auser,@buser");
  HipchatEndpoint endpoint=(HipchatEndpoint)component.createEndpoint("hipchat://localhost:8080?authToken=token&protocol=https@consumeUsers=@auser,@buser","localhost:8080",parameters);
  assertEquals("localhost",endpoint.getConfiguration().getHost());
  assertEquals(new Integer(8080),endpoint.getConfiguration().getPort());
  assertEquals("https",endpoint.getConfiguration().getProtocol());
  assertEquals("token",endpoint.getConfiguration().getAuthToken());
  assertEquals("https://localhost:8080",endpoint.getConfiguration().hipChatUrl());
  assertEquals("/a?auth_token=token",endpoint.getConfiguration().withAuthToken("/a"));
  assertEquals(2,endpoint.getConfiguration().consumableUsers().length);
  assertTrue(Arrays.asList(endpoint.getConfiguration().consumableUsers()).contains("@auser"));
  assertTrue(Arrays.asList(endpoint.getConfiguration().consumableUsers()).contains("@buser"));
}
