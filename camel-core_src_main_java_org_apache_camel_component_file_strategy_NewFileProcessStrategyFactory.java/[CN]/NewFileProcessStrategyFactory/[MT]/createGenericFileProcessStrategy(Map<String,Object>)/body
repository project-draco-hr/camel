{
  boolean isNoop=params.get("noop") != null;
  boolean isDelete=params.get("delete") != null;
  String moveNamePrefix=(String)params.get("moveNamePrefix");
  String moveNamePostfix=(String)params.get("moveNamePostfix");
  String preMoveNamePrefix=(String)params.get("preMoveNamePrefix");
  String preMoveNamePostfix=(String)params.get("preMoveNamePostfix");
  Expression expression=(Expression)params.get("expression");
  Expression preMoveExpression=(Expression)params.get("preMoveExpression");
  boolean move=moveNamePrefix != null || moveNamePostfix != null;
  boolean preMove=preMoveNamePrefix != null || preMoveNamePostfix != null;
  if (isNoop) {
    GenericFileNoOpProcessStrategy strategy=new GenericFileNoOpProcessStrategy();
    strategy.setExclusiveReadLockStrategy(getExclusiveReadLockStrategy(params));
    return strategy;
  }
 else   if (isDelete) {
    GenericFileDeleteProcessStrategy strategy=new GenericFileDeleteProcessStrategy();
    strategy.setExclusiveReadLockStrategy(getExclusiveReadLockStrategy(params));
    return strategy;
  }
 else   if (move || preMove) {
    GenericFileRenameProcessStrategy strategy=new GenericFileRenameProcessStrategy();
    strategy.setExclusiveReadLockStrategy(getExclusiveReadLockStrategy(params));
    if (move) {
      strategy.setCommitRenamer(new GenericFileDefaultRenamer(moveNamePrefix,moveNamePostfix));
    }
    if (preMove) {
      strategy.setBeginRenamer(new GenericFileDefaultRenamer(preMoveNamePrefix,preMoveNamePostfix));
    }
    return strategy;
  }
 else   if (expression != null || preMoveExpression != null) {
    GenericFileRenameProcessStrategy strategy=new GenericFileRenameProcessStrategy();
    strategy.setExclusiveReadLockStrategy(getExclusiveReadLockStrategy(params));
    if (expression != null) {
      GenericFileExpressionRenamer renamer=new GenericFileExpressionRenamer();
      renamer.setExpression(expression);
      strategy.setCommitRenamer(renamer);
    }
    if (preMoveExpression != null) {
      GenericFileExpressionRenamer renamer=new GenericFileExpressionRenamer();
      renamer.setExpression(preMoveExpression);
      strategy.setBeginRenamer(renamer);
    }
    return strategy;
  }
 else {
    GenericFileRenameProcessStrategy strategy=new GenericFileRenameProcessStrategy();
    strategy.setExclusiveReadLockStrategy(getExclusiveReadLockStrategy(params));
    strategy.setCommitRenamer(new GenericFileDefaultRenamer(".camel/",""));
    return strategy;
  }
}
