{
  for (; ; ) {
    int c=getState();
    int nextc=c + delta;
    if (compareAndSetState(c,nextc)) {
      return nextc == 0;
    }
  }
}
