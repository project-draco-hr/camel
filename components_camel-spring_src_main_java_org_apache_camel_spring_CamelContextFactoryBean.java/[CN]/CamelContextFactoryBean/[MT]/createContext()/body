{
  SpringCamelContext ctx=new SpringCamelContext(getApplicationContext());
  ctx.setName(getId());
  if (streamCache != null) {
    ctx.setStreamCaching(streamCache);
  }
  if (trace != null) {
    ctx.setTrace(trace);
  }
  if (delay != null) {
    ctx.setDelay(delay);
  }
  if (handleFault != null) {
    ctx.setHandleFault(handleFault);
  }
  if (errorHandlerRef != null) {
    ErrorHandlerBuilder errorHandlerBuilder=(ErrorHandlerBuilder)getApplicationContext().getBean(errorHandlerRef,ErrorHandlerBuilder.class);
    if (errorHandlerBuilder == null) {
      throw new IllegalArgumentException("Could not find bean: " + errorHandlerRef);
    }
    ctx.setErrorHandlerBuilder(errorHandlerBuilder);
  }
  if (shouldStartContext != null) {
    ctx.setShouldStartContext(shouldStartContext);
  }
  return ctx;
}
