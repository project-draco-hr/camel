{
  List<RouteBuilder> builders=new ArrayList<RouteBuilder>();
  if (routeBuilder != null) {
    builders.add(routeBuilder);
  }
  if (builderRefs != null) {
    for (    RouteBuilderDefinition builderRef : builderRefs) {
      RouteBuilder builder=builderRef.createRouteBuilder(getContext());
      if (builder != null) {
        builders.add(builder);
      }
 else {
        Routes routes=builderRef.createRoutes(getContext());
        if (routes != null) {
          additionalBuilders.add(routes);
        }
 else {
          throw new CamelException("Cannot find any routes with this RouteBuilder reference: " + builderRef);
        }
      }
    }
  }
  for (  Routes routeBuilder : additionalBuilders) {
    getContext().addRoutes(routeBuilder);
  }
  for (  RouteBuilder builder : builders) {
    if (beanPostProcessor != null) {
      beanPostProcessor.postProcessBeforeInitialization(builder,builder.toString());
    }
    getContext().addRoutes(builder);
  }
}
