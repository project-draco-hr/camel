{
  PackageScanClassResolver resolver=getContext().getPackageScanClassResolver();
  addPackageElementContentsToScanDefinition();
  PackageScanDefinition packageScanDef=getPackageScan();
  if (packageScanDef != null && packageScanDef.getPackages().size() > 0) {
    PatternBasedPackageScanFilter filter=new PatternBasedPackageScanFilter();
    filter.addIncludePatterns(packageScanDef.getIncludes());
    filter.addExcludePatterns(packageScanDef.getExcludes());
    resolver.addFilter(filter);
    String[] normalized=normalizePackages(packageScanDef.getPackages());
    RouteBuilderFinder finder=new RouteBuilderFinder(getContext(),normalized,getContextClassLoaderOnStart(),getBeanPostProcessor(),getContext().getPackageScanClassResolver());
    finder.appendBuilders(builders);
  }
}
