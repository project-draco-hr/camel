{
  Exchange exchange=consumer.endpoint.createRabbitExchange(envelope);
  log.trace("Created exchange [exchange={}]",new Object[]{exchange});
  try {
    consumer.getProcessor().process(exchange);
    long deliveryTag=envelope.getDeliveryTag();
    log.trace("Acknowleding receipt [delivery_tag={}]",deliveryTag);
    channel.basicAck(deliveryTag,false);
  }
 catch (  Exception e) {
    getExceptionHandler().handleException("Error processing exchange",exchange,e);
  }
}
