{
  if (channel != null) {
    log.debug("Closing channel: {}",channel);
    channel.close();
    channel=null;
  }
  if (conn != null) {
    log.debug("Closing connection: {} with timeout: {} ms.",conn,closeTimeout);
    conn.close(closeTimeout);
    conn=null;
  }
  if (executor != null) {
    if (endpoint != null && endpoint.getCamelContext() != null) {
      endpoint.getCamelContext().getExecutorServiceManager().shutdownNow(executor);
    }
 else {
      executor.shutdownNow();
    }
    executor=null;
  }
}
