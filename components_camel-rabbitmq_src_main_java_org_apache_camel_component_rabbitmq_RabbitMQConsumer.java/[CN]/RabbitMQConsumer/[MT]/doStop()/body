{
  super.doStop();
  log.info("Stopping RabbitMQ consumer");
  if (conn != null) {
    try {
      conn.close();
    }
 catch (    Exception ignored) {
    }
  }
  channel=null;
  conn=null;
  if (executor != null) {
    if (getEndpoint() != null && getEndpoint().getCamelContext() != null) {
      getEndpoint().getCamelContext().getExecutorServiceManager().shutdownNow(executor);
    }
 else {
      executor.shutdownNow();
    }
  }
  executor=null;
}
