{
  SedaEndpoint seda=context.getEndpoint("seda:foo?size=500",SedaEndpoint.class);
  assertEquals(0,seda.getQueue().size());
  for (int i=0; i < 500; i++) {
    template.sendBody("seda:foo","Message " + i);
  }
  assertEquals(500,seda.getQueue().size());
  try {
    template.sendBody("seda:foo","Message overflow");
    fail("Should thrown an exception");
  }
 catch (  Exception e) {
    IllegalStateException ise=assertIsInstanceOf(IllegalStateException.class,e.getCause());
    assertEquals("Queue full",ise.getMessage());
  }
}
