{
  resultEndpoint.expectedBodiesReceived("one","two","three");
  errorEndpoint.expectedMessageCount(0);
  sendMessage("1","one");
  sendMessage("2","two");
  sendMessage("1","one");
  sendMessage("2","two");
  sendMessage("1","one");
  sendMessage("3","three");
  assertMockEndpointsSatisfied();
  List<String> receivedMessageIds=jdbcTemplate.queryForList(SELECT_ALL_STRING,String.class,PROCESSOR_NAME);
  assertEquals(3,receivedMessageIds.size());
  assertTrue(receivedMessageIds.contains("1"));
  assertTrue(receivedMessageIds.contains("2"));
  assertTrue(receivedMessageIds.contains("3"));
}
