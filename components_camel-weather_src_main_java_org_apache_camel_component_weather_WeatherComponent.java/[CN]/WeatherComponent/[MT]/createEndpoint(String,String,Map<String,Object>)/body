{
  WeatherConfiguration configuration=new WeatherConfiguration(this);
  String ids=getAndRemoveParameter(parameters,"ids",String.class);
  Iterator<?> it=ObjectHelper.createIterator(ids);
  while (it.hasNext()) {
    String id=(String)it.next();
    configuration.addId(id);
  }
  setProperties(configuration,parameters);
  httpClient=createHttpClient(configuration);
  WeatherEndpoint endpoint=new WeatherEndpoint(uri,this,configuration);
  return endpoint;
}
