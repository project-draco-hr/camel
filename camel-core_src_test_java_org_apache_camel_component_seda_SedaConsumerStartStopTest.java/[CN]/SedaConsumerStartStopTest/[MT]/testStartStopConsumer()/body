{
  MockEndpoint mock=getMockEndpoint("mock:result");
  mock.expectedMessageCount(10);
  mock.expectsAscending(body());
  initRoute();
  sendMessagesToQueue();
  consumer.start();
  for (int i=0; i < 10; i++) {
    if (i == 5) {
      consumer.stop();
      Thread.sleep(500);
      consumer.start();
    }
    Exchange exchange=consumer.receive(1000);
    template.send("mock:result",exchange);
  }
  assertMockEndpointsSatisfied();
}
