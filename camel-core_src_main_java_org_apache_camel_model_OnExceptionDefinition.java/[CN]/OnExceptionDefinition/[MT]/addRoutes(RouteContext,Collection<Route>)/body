{
  if (isInheritErrorHandler() != null && isInheritErrorHandler()) {
    throw new IllegalArgumentException(this + " cannot have the inheritErrorHandler option set to true");
  }
  setHandledFromExpressionType(routeContext);
  setContinuedFromExpressionType(routeContext);
  setRetryWhileFromExpressionType(routeContext);
  if (getHandledPolicy() != null && getContinuedPolicy() != null) {
    throw new IllegalArgumentException("Only one of handled or continued is allowed to be configured on: " + this);
  }
  if (ObjectHelper.isNotEmpty(onRedeliveryRef)) {
    Processor onRedelivery=CamelContextHelper.mandatoryLookup(routeContext.getCamelContext(),onRedeliveryRef,Processor.class);
    setOnRedelivery(onRedelivery);
  }
  Processor child=routeContext.createProcessor(this);
  if (child != null) {
    errorHandler=new FatalFallbackErrorHandler(child);
  }
 else {
    errorHandler=null;
  }
  ErrorHandlerBuilder builder=routeContext.getRoute().getErrorHandlerBuilder();
  builder.addErrorHandlers(this);
}
