{
  super.doStart();
  final SocketAddress addr=new InetSocketAddress(getEndpoint().getPort());
  HttpParams params=getEndpoint().getParams();
  ioReactor=new DefaultListeningIOReactor(nbThreads,threadFactory,params);
  final IOEventDispatch ioEventDispatch;
  if ("https".equals(getEndpoint().getProtocol())) {
    SSLContext sslContext=null;
    ioEventDispatch=new SSLServerIOEventDispatch(new MyHandler(params),sslContext,params);
  }
 else {
    ioEventDispatch=new DefaultServerIOEventDispatch(new MyHandler(params),params);
  }
  runner=new Thread(){
    public void run(){
      try {
        ioReactor.listen(addr);
        ioReactor.execute(ioEventDispatch);
      }
 catch (      InterruptedIOException ex) {
        LOG.info("Interrupted");
      }
catch (      IOException e) {
        LOG.warn("I/O error: " + e.getMessage());
      }
      LOG.debug("Shutdown");
    }
  }
;
  runner.start();
}
