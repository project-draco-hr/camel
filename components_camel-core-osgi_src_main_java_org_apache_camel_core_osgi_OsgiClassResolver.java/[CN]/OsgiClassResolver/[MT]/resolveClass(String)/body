{
  LOG.trace("Resolve class {}",name);
  name=ObjectHelper.normalizeClassName(name);
  if (ObjectHelper.isEmpty(name)) {
    return null;
  }
  Class<?> clazz=ObjectHelper.loadSimpleType(name);
  if (clazz == null) {
    clazz=doLoadClass(name,bundleContext.getBundle());
    if (LOG.isTraceEnabled()) {
      LOG.trace("Loading class {} using BundleContext {} -> {}",new Object[]{name,bundleContext.getBundle(),clazz});
    }
  }
  if (clazz == null && camelContext != null) {
    clazz=super.loadClass(name,camelContext.getApplicationContextClassLoader());
    if (LOG.isTraceEnabled()) {
      LOG.trace("Loading class {} using CamelContext {} -> {}",new Object[]{name,camelContext,clazz});
    }
  }
  return clazz;
}
