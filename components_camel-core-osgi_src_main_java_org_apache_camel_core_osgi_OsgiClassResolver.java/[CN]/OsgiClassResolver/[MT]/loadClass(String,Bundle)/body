{
  ObjectHelper.notEmpty(name,"name");
  Class<?> answer=null;
  if (loader != null) {
    try {
      answer=loader.loadClass(name);
    }
 catch (    ClassNotFoundException e) {
      if (LOG.isTraceEnabled()) {
        LOG.trace("Cannot load class: " + name + " using classloader: "+ loader,e);
      }
    }
  }
  if (answer == null) {
    for (    Bundle bundle : bundleContext.getBundles()) {
      try {
        answer=bundle.loadClass(name);
        if (answer != null) {
          break;
        }
      }
 catch (      Exception e) {
      }
    }
  }
  return answer;
}
