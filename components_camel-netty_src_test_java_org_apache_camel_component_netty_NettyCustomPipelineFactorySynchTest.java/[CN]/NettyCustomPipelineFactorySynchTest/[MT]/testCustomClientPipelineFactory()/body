{
  context.addRoutes(new RouteBuilder(){
    public void configure(){
      from("netty:tcp://localhost:5110?serverPipelineFactory=#spf&sync=true&textline=true").process(new Processor(){
        public void process(        Exchange exchange) throws Exception {
          exchange.getOut().setBody("Forrest Gump: We was always taking long walks, and we was always looking for a guy named 'Charlie'");
        }
      }
);
    }
  }
);
  context.start();
  LOG.debug("Beginning Test ---> testCustomClientPipelineFactory()");
  sendRequest();
  LOG.debug("Completed Test ---> testCustomClientPipelineFactory()");
  context.stop();
  assertEquals("Forrest Gump: We was always taking long walks, and we was always looking for a guy named 'Charlie'",response);
  assertEquals(true,clientPipelineFactory.isfactoryInvoked());
  assertEquals(true,serverPipelineFactory.isfactoryInvoked());
}
