{
  context.addRoutes(new RouteBuilder(){
    public void configure(){
      from("netty:tcp://localhost:{{port}}?serverPipelineFactory=#spf&sync=true&textline=true").process(new Processor(){
        public void process(        Exchange exchange) throws Exception {
          exchange.getOut().setBody("Forrest Gump: We was always taking long walks, and we was always looking for a guy named 'Charlie'");
        }
      }
);
    }
  }
);
  context.start();
  sendRequest();
  context.stop();
  assertEquals("Forrest Gump: We was always taking long walks, and we was always looking for a guy named 'Charlie'",response);
  assertEquals(true,clientPipelineFactory.isfactoryInvoked());
  assertEquals(true,serverPipelineFactory.isfactoryInvoked());
}
