{
  if (routesSetupDone.compareAndSet(false,true)) {
    LOG.debug("Setting up routes");
    getContext().setupRoutes(false);
    initRouteRefs();
    prepareRoutes();
    getContext().addRouteDefinitions(getRoutes());
    LOG.debug("Found JAXB created routes: {}",getRoutes());
    findRouteBuilders();
    installRoutes();
    initRestRefs();
    getContext().addRestDefinitions(getRests());
    getContext().setupRoutes(true);
  }
}
