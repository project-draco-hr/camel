{
  List<ProcessorDefinition> outputs=new ArrayList<ProcessorDefinition>();
  ToDefinition toAsync=null;
  for (  ProcessorDefinition output : lower) {
    if (toAsync != null) {
      toAsync.getOutputs().add(output);
    }
 else {
      outputs.add(output);
    }
    if (output instanceof ToDefinition) {
      ToDefinition to=(ToDefinition)output;
      if (to.isAsync() != null && to.isAsync()) {
        toAsync=to;
      }
    }
  }
  lower.clear();
  lower.addAll(outputs);
}
