{
  Throwable ex=message.getContent(Throwable.class);
  if (ex != null) {
    if (!(ex instanceof Fault)) {
      ex=new Fault(ex);
    }
    if (message instanceof XMLMessage) {
      if (LOG.isLoggable(Level.INFO)) {
        LOG.info("FaultOutInterceptor Creating XMLFault");
      }
      ex=XMLFault.createFault((Fault)ex);
    }
 else     if (message instanceof SoapMessage) {
      if (LOG.isLoggable(Level.INFO)) {
        LOG.info("FaultOutInterceptor Creating SoapFault");
      }
      SoapMessage sm=(SoapMessage)message;
      ex=SoapFault.createFault((Fault)ex,sm.getVersion());
    }
    message.setContent(Throwable.class,ex);
  }
}
