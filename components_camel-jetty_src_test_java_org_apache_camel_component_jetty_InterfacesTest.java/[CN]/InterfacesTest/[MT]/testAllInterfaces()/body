{
  int expectedMessages=(remoteInterfaceAddress != null) ? 2 : 1;
  getMockEndpoint("mock:endpoint").expectedMessageCount(expectedMessages);
  URL localUrl=new URL("http://localhost:4569/allInterfaces");
  String localResponse=IOUtils.toString(localUrl.openStream());
  assertEquals("allInterfaces",localResponse);
  if (remoteInterfaceAddress != null) {
    URL url=new URL("http://" + remoteInterfaceAddress + ":4569/allInterfaces");
    String remoteResponse=IOUtils.toString(url.openStream());
    assertEquals("allInterfaces",remoteResponse);
  }
  assertMockEndpointsSatisfied();
}
