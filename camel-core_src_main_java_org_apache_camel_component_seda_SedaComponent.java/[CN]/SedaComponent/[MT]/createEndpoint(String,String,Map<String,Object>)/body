{
  int consumers=getAndRemoveParameter(parameters,"concurrentConsumers",Integer.class,1);
  boolean limitConcurrentConsumers=getAndRemoveParameter(parameters,"limitConcurrentConsumers",Boolean.class,true);
  if ((limitConcurrentConsumers) && (consumers > maxConcurrentConsumers)) {
    throw new IllegalArgumentException("The limitConcurrentConsumers flag in set to true. Concurrent Consumers cannot be set at a value greater than " + maxConcurrentConsumers);
  }
  SedaEndpoint answer=new SedaEndpoint(uri,this,createQueue(uri,parameters),consumers);
  answer.configureProperties(parameters);
  return answer;
}
