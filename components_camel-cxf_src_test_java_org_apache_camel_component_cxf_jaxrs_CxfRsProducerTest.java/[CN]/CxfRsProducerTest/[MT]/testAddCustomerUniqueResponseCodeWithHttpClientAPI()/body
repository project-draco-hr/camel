{
  Exchange exchange=template.send("cxfrs://http://localhost:" + getPort1() + "?httpClientAPI=true",new Processor(){
    public void process(    Exchange exchange) throws Exception {
      exchange.setPattern(ExchangePattern.InOut);
      Message inMessage=exchange.getIn();
      inMessage.setHeader(Exchange.HTTP_METHOD,"POST");
      inMessage.setHeader(Exchange.HTTP_PATH,"/customerservice/customersUniqueResponseCode");
      Customer customer=new Customer();
      customer.setId(9999);
      customer.setName("HttpClient");
      inMessage.setBody(customer);
    }
  }
);
  Response response=(Response)exchange.getOut().getBody();
  assertNotNull("The response should not be null ",response);
  assertNotNull("The response entity should not be null",response.getEntity());
  assertEquals("Get a wrong response code",201,response.getStatus());
  assertEquals("Get a wrong response code",201,exchange.getOut().getHeader(Exchange.HTTP_RESPONSE_CODE));
}
