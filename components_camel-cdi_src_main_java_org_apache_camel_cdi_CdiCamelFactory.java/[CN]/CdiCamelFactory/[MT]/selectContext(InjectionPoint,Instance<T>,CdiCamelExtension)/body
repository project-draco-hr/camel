{
  Collection<Annotation> qualifiers=new HashSet<>(ip.getQualifiers());
  qualifiers.retainAll(extension.getContextQualifiers());
  if (qualifiers.isEmpty() && !instance.select(DefaultLiteral.INSTANCE).isUnsatisfied()) {
    return instance.select(DefaultLiteral.INSTANCE).get();
  }
  return instance.select(qualifiers.toArray(new Annotation[qualifiers.size()])).get();
}
