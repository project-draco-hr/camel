{
  if (this.closed) {
    return;
  }
  this.closed=true;
  Set keys=this.selector.keys();
  for (Iterator it=keys.iterator(); it.hasNext(); ) {
    try {
      SelectionKey key=(SelectionKey)it.next();
      Channel channel=key.channel();
      if (channel != null) {
        channel.close();
      }
    }
 catch (    IOException ignore) {
    }
  }
  this.selector.close();
  stopWorkers(500);
}
