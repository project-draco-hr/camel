{
  GHttpEndpoint endpoint=createEndpoint("ghttp://somewhere.com:9090/path?bridgeEndpoint=false&a=b+c");
  assertEquals("http://somewhere.com:9090/path?a=b+c",binding.getRequestUrl(endpoint,exchange).toString());
  exchange.getIn().setHeader(Exchange.HTTP_QUERY,"x=y z");
  assertEquals("http://somewhere.com:9090/path?x=y+z",binding.getRequestUrl(endpoint,exchange).toString());
  exchange.getIn().removeHeader(Exchange.HTTP_QUERY);
  exchange.getIn().setHeader(Exchange.HTTP_URI,"http://custom.org:8080/path?d=e f");
  assertEquals("http://custom.org:8080/path?d=e+f",binding.getRequestUrl(endpoint,exchange).toString());
  exchange.getIn().setHeader(Exchange.HTTP_QUERY,"x=y z");
  assertEquals("http://custom.org:8080/path?x=y+z",binding.getRequestUrl(endpoint,exchange).toString());
}
