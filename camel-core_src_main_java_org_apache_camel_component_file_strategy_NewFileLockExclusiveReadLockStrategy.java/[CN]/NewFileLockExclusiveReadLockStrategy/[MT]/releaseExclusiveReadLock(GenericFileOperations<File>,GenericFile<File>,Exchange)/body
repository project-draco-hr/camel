{
  FileLock lock=ExchangeHelper.getMandatoryProperty(exchange,"org.apache.camel.file.lock",FileLock.class);
  String lockFileName=ExchangeHelper.getMandatoryProperty(exchange,"org.apache.camel.file.lock.filename",String.class);
  Channel channel=lock.channel();
  try {
    lock.release();
  }
  finally {
    ObjectHelper.close(channel,"while acquiring exclusive read lock for file: " + lockFileName,LOG);
    if (LOG.isTraceEnabled()) {
      LOG.trace("Deleting lock file: " + lockFileName);
    }
    File lockfile=new File(lockFileName);
    lockfile.delete();
  }
}
