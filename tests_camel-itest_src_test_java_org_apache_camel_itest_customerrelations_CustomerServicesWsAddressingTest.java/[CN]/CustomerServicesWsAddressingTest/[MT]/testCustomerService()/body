{
  ClassPathXmlApplicationContext serverContext=null;
  ClassPathXmlApplicationContext clientContext=null;
  try {
    serverContext=new ClassPathXmlApplicationContext(new String[]{"spring-config/server-WsAddressingContext.xml"});
    Object server=serverContext.getBean("org.apache.camel.itest.customerrelations.CustomerServiceV1");
    assertNotNull("We should get server here",server);
    clientContext=new ClassPathXmlApplicationContext(new String[]{"spring-config/client-WsAddressingContext.xml"});
    CustomerServiceV1 customerService=clientContext.getBean("org.apache.camel.itest.customerrelations.CustomerServiceV1",CustomerServiceV1.class);
    Customer customer=customerService.getCustomer("12345");
    assertNotNull("We should get Customer here",customer);
  }
  finally {
    if (clientContext != null) {
      clientContext.destroy();
    }
    if (serverContext != null) {
      serverContext.destroy();
    }
  }
}
