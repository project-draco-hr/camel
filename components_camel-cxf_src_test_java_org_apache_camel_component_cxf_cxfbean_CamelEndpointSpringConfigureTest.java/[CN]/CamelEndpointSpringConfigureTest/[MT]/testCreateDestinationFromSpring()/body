{
  CxfEndpoint cxfEndpoint=context.getEndpoint("cxf:bean:serviceEndpoint",CxfEndpoint.class);
  CxfProducer producer=(CxfProducer)cxfEndpoint.createProducer();
  assertNotNull("The producer should not be null",producer);
  producer.start();
  CamelConduit conduit=(CamelConduit)producer.getClient().getConduit();
  assertTrue("we should get SpringCamelContext here",conduit.getCamelContext() instanceof SpringCamelContext);
  assertEquals("The context id should be camel_conduit","camel_conduit",conduit.getCamelContext().getName());
  cxfEndpoint=context.getEndpoint("cxf:bean:routerEndpoint",CxfEndpoint.class);
  CxfConsumer consumer=(CxfConsumer)cxfEndpoint.createConsumer(new Processor(){
    public void process(    Exchange exchange) throws Exception {
    }
  }
);
  assertNotNull("The consumer should not be null",consumer);
  consumer.start();
  CamelDestination destination=(CamelDestination)consumer.getServer().getDestination();
  assertTrue("we should get SpringCamelContext here",destination.getCamelContext() instanceof SpringCamelContext);
  assertEquals("The context id should be camel_destination","camel_destination",destination.getCamelContext().getName());
}
