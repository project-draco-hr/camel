{
  if (document == null) {
    ClassLoader old=Thread.currentThread().getContextClassLoader();
    try {
      if (endpoint.getCamelContext().getApplicationContextClassLoader() != null) {
        Thread.currentThread().setContextClassLoader(endpoint.getCamelContext().getApplicationContextClassLoader());
        LOG.debug("set the TCCL to be " + endpoint.getCamelContext().getApplicationContextClassLoader());
      }
      document=AtomUtils.parseDocument(endpoint.getFeedUri());
    }
  finally {
      Thread.currentThread().setContextClassLoader(old);
    }
    Feed root=document.getRoot();
    if (endpoint.isSortEntries()) {
      sortEntries(root);
    }
    list=root.getEntries();
    entryIndex=list.size() - 1;
  }
  return document;
}
