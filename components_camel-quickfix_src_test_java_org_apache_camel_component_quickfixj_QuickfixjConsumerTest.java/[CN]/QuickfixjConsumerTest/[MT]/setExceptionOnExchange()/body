{
  QuickfixjConsumer consumer=new QuickfixjConsumer(mockEndpoint,mockProcessor);
  consumer.start();
  Throwable exception=new Exception("Throwable for test");
  Mockito.doThrow(exception).when(mockProcessor).process(mockExchange);
  SessionID sessionID=new SessionID(FixVersions.BEGINSTRING_FIX44,"SENDER","TARGET");
  consumer.onEvent(QuickfixjEventCategory.AppMessageReceived,sessionID,new Message());
  Mockito.verify(mockExchange).setException(exception);
}
