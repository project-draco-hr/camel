{
  transactionStrategy.execute(new JpaCallback<Object>(){
    public Object doInJpa(    EntityManager entityManager) throws PersistenceException {
      entityManager.persist(customer);
      entityManager.flush();
      return null;
    }
  }
);
  assertEntitiesInDatabase(1,Customer.class.getName());
  assertEntitiesInDatabase(1,Address.class.getName());
}
