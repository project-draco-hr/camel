{
  if (value instanceof Service) {
    stopService(value);
  }
  if (value instanceof ShutdownableService) {
    ShutdownableService service=(ShutdownableService)value;
    LOG.trace("Shutting down service {}",value);
    service.shutdown();
  }
 else   if (value instanceof Collection) {
    stopAndShutdownServices((Collection<?>)value);
  }
}
