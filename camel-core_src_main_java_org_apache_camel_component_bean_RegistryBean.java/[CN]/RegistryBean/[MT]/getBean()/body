{
  Object value=lookupBean();
  if (value != null) {
    if (value instanceof Class) {
      value=context.getInjector().newInstance((Class<?>)value);
    }
    bean=value;
    return value;
  }
synchronized (lock) {
    if (bean != null) {
      return bean;
    }
    bean=context.getClassResolver().resolveClass(name);
    if (bean == null) {
      throw new NoSuchBeanException(name);
    }
    if (bean instanceof Class) {
      bean=context.getInjector().newInstance((Class<?>)bean);
    }
  }
  return bean;
}
