{
  LOG.info("ServerBootstrap unbinding from {}:{}",configuration.getHost(),configuration.getPort());
  LOG.trace("Closing {} channels",allChannels.size());
  ChannelGroupFuture future=allChannels.close();
  future.awaitUninterruptibly();
  if (allChannels != null) {
    allChannels.close();
  }
  if (bossGroup != null) {
    bossGroup.shutdownGracefully();
    bossGroup=null;
  }
  if (workerGroup != null) {
    workerGroup.shutdownGracefully();
    workerGroup=null;
  }
}
