{
  super(endpoint);
  this.endpoint=endpoint;
  context=(SpringCamelContext)endpoint.getCamelContext();
  if (context != null && endpoint.getMessageChannel() == null) {
    outputChannelName=endpoint.getDefaultChannel();
    channelResolver=new BeanFactoryChannelResolver(context.getApplicationContext());
    if (ObjectHelper.isEmpty(outputChannelName)) {
      outputChannelName=endpoint.getInputChannel();
    }
    if (ObjectHelper.isEmpty(outputChannelName)) {
      throw new RuntimeCamelException("Can't find the right outputChannelName, " + "please check the endpoint uri outputChannel part!");
    }
 else {
      outputChannel=channelResolver.resolveChannelName(outputChannelName);
    }
  }
 else {
    if (endpoint.getMessageChannel() != null) {
      outputChannel=endpoint.getMessageChannel();
    }
 else {
      throw new RuntimeCamelException("Can't find the right message channel, please check your configuration.");
    }
  }
  if (endpoint.isInOut()) {
    endpoint.setExchangePattern(ExchangePattern.InOut);
    if (ObjectHelper.isEmpty(endpoint.getInputChannel())) {
      throw new RuntimeCamelException("Can't find the right inputChannel, " + "please check the endpoint uri inputChannel part!");
    }
 else {
      inputChannel=(DirectChannel)channelResolver.resolveChannelName(endpoint.getInputChannel());
    }
  }
 else {
    endpoint.setExchangePattern(ExchangePattern.InOnly);
  }
}
