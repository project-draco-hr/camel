{
  org.springframework.integration.message.Message siOutmessage=SpringIntegrationBinding.createSpringIntegrationMessage(exchange);
  if (exchange.getPattern().isInCapable()) {
    siOutmessage.getHeader().setReturnAddress(inputChannel);
    outputChannel.send(siOutmessage);
    org.springframework.integration.message.Message siInMessage=inputChannel.receive();
    SpringIntegrationBinding.storeToCamelMessage(siInMessage,exchange.getOut());
  }
 else {
    outputChannel.send(siOutmessage);
  }
}
