{
  Map<String,Object> headers=new HashMap<String,Object>();
  if (exchange.getPattern().isInCapable()) {
    headers.put(MessageHeaders.RETURN_ADDRESS,inputChannel);
  }
  org.springframework.integration.message.Message siOutmessage=SpringIntegrationBinding.createSpringIntegrationMessage(exchange);
  if (exchange.getPattern().isInCapable()) {
    outputChannel.send(siOutmessage);
    org.springframework.integration.message.Message siInMessage=inputChannel.receive();
    SpringIntegrationBinding.storeToCamelMessage(siInMessage,exchange.getOut());
  }
 else {
    outputChannel.send(siOutmessage);
  }
}
