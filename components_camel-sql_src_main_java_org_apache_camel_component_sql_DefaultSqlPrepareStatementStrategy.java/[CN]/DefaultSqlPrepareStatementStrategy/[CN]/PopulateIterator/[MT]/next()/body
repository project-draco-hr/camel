{
  if (nextParam == null) {
    throw new NoSuchElementException();
  }
  try {
    if (nextParam.startsWith("${") && nextParam.endsWith("}")) {
      return SimpleLanguage.expression(nextParam).evaluate(exchange,Object.class);
    }
 else     if (bodyMap.containsKey(nextParam)) {
      return bodyMap.get(nextParam);
    }
 else     if (headersMap.containsKey(nextParam)) {
      return headersMap.get(nextParam);
    }
    throw new RuntimeExchangeException(String.format(MISSING_PARAMETER_EXCEPTION,nextParam,query),exchange);
  }
  finally {
    nextParam=parser.next();
  }
}
