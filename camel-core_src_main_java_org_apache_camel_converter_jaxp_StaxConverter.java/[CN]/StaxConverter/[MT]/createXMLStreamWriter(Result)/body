{
  XMLOutputFactory factory=getOutputFactory();
  try {
    if (result instanceof DOMResult && !isWoodstox(factory)) {
      LOG.info("DOMResult is known to have issues with {0}. We suggest using Woodstox",factory.getClass());
    }
    return factory.createXMLStreamWriter(result);
  }
  finally {
    returnXMLOutputFactory(factory);
  }
}
