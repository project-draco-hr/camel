{
  Object obj=serviceBeans.get(0).getClass().getAnnotation(WebService.class);
  if (obj != null) {
    JaxWsServerFactoryBean bean=new JaxWsServerFactoryBean();
    bean.setTransportId(CxfBeanTransportFactory.TRANSPORT_ID);
    bean.setServiceClass(serviceBeans.get(0).getClass());
    bean.setBus(bus);
    bean.setStart(true);
    bean.setAddress("camel://" + createEndpointUri());
    server=bean.create();
  }
 else {
    JAXRSServerFactoryBean answer=new JAXRSServerFactoryBean();
    answer.setServiceBeans(serviceBeans);
    answer.setAddress("camel://" + createEndpointUri());
    answer.setStart(true);
    answer.setTransportId(CxfBeanTransportFactory.TRANSPORT_ID);
    answer.setBus(bus);
    server=answer.create();
  }
}
