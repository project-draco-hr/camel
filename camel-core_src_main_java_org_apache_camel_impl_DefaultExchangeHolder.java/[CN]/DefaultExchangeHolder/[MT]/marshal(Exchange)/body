{
  DefaultExchangeHolder payload=new DefaultExchangeHolder();
  payload.inBody=checkSerializableObject("in body",exchange,exchange.getIn().getBody());
  payload.inHeaders.putAll(checkMapSerializableObjects("in headers",exchange,exchange.getIn().getHeaders()));
  if (exchange.hasOut()) {
    payload.outBody=checkSerializableObject("out body",exchange,exchange.getOut().getBody());
    payload.outHeaders.putAll(checkMapSerializableObjects("out headers",exchange,exchange.getOut().getHeaders()));
    payload.outFaultFlag=exchange.getOut().isFault();
  }
  payload.properties.putAll(checkMapSerializableObjects("exchange properties",exchange,exchange.getProperties()));
  payload.exception=exchange.getException();
  return payload;
}
