{
  this.applicationContext=applicationContext;
  ClassLoader cl=null;
  if (applicationContext != null && applicationContext.getClassLoader() != null) {
    cl=applicationContext.getClassLoader();
  }
 else {
    if (LOG.isDebugEnabled()) {
      LOG.debug("Canot find the class loader from application context, so us the thread context class loader");
    }
    cl=Thread.currentThread().getContextClassLoader();
  }
  if (LOG.isDebugEnabled()) {
    LOG.debug("Set the application context classloader with " + cl);
  }
  this.setApplicationContextClassLoader(cl);
  if (applicationContext instanceof ConfigurableApplicationContext) {
    if (hasComponent("spring-event") == null) {
      addComponent("spring-event",new EventComponent(applicationContext));
    }
  }
}
