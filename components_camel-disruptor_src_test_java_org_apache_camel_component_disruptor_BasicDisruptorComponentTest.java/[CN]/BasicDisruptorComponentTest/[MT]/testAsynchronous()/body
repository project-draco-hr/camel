{
  threadCounter.reset();
  final int messagesSent=1000;
  resultEndpoint.setExpectedMessageCount(messagesSent);
  final long currentThreadId=Thread.currentThread().getId();
  for (int i=0; i < messagesSent; ++i) {
    template.asyncSendBody("disruptor:testAsynchronous",VALUE);
  }
  resultEndpoint.await(20,TimeUnit.SECONDS);
  resultEndpoint.assertIsSatisfied();
  assertTrue(threadCounter.getThreadIdCount() > 0);
  assertFalse(threadCounter.getThreadIds().contains(currentThreadId));
}
