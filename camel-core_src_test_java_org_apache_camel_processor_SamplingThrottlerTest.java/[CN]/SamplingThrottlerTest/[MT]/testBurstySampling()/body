{
  MockEndpoint mock=getMockEndpoint("mock:result");
  mock.expectedMessageCount(2);
  mock.setResultWaitTime(3000);
  List<Exchange> sentExchanges=new ArrayList<Exchange>();
  sendExchangesThroughDroppingThrottler(sentExchanges,5);
  Thread.sleep(1100);
  sendExchangesThroughDroppingThrottler(sentExchanges,5);
  mock.assertIsSatisfied();
  validateDroppedExchanges(sentExchanges,2);
}
