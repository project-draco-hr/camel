{
  URI uriHttpUriAddress=new URI(UnsafeUriCharactersEncoder.encodeHttpURI(remaining));
  URI endpointUri=URISupport.createRemainingURI(uriHttpUriAddress,parameters);
  Map<String,Object> options=IntrospectionSupport.extractProperties(parameters,"option.");
  UndertowEndpoint endpoint=createEndpointInstance(endpointUri,this);
  UndertowHttpBinding binding=resolveAndRemoveReferenceParameter(parameters,"undertowHttpBinding",UndertowHttpBinding.class);
  if (binding != null) {
    endpoint.setUndertowHttpBinding(binding);
  }
 else {
    endpoint.setUndertowHttpBinding(undertowHttpBinding);
  }
  setProperties(endpoint,parameters);
  if (options != null) {
    endpoint.setOptions(options);
  }
  URI httpUri=URISupport.createRemainingURI(new URI(uriHttpUriAddress.getScheme(),uriHttpUriAddress.getUserInfo(),uriHttpUriAddress.getHost(),uriHttpUriAddress.getPort(),uriHttpUriAddress.getPath(),uriHttpUriAddress.getQuery(),uriHttpUriAddress.getFragment()),parameters);
  endpoint.setHttpURI(httpUri);
  return endpoint;
}
