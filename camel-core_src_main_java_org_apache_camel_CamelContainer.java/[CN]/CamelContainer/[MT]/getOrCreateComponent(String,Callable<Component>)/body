{
synchronized (components) {
    Component component=components.get(componentName);
    if (component == null) {
      try {
        component=factory.call();
        if (component == null)         throw new IllegalArgumentException("Factory failed to create the " + componentName + " component, it returned null.");
      }
 catch (      Exception e) {
        throw new IllegalArgumentException("Factory failed to create the " + componentName + " component",e);
      }
    }
    return component;
  }
}
