{
  if (endpoints == null) {
    throw new IllegalArgumentException("Unable to determine column widths from null Iterable<Endpoint>");
  }
 else {
    int maxContextLen=0;
    int maxUriLen=0;
    int maxStatusLen=0;
    for (    final Endpoint endpoint : endpoints) {
      final String name=endpoint.getCamelContext().getName();
      maxContextLen=java.lang.Math.max(maxContextLen,name == null ? 0 : name.length());
      String uri=endpoint.getEndpointUri();
      if (decode) {
        uri=URLDecoder.decode(uri,"UTF-8");
      }
      uri=URISupport.sanitizeUri(uri);
      maxUriLen=java.lang.Math.max(maxUriLen,uri == null ? 0 : uri.length());
      final String status=getEndpointState(endpoint);
      maxStatusLen=java.lang.Math.max(maxStatusLen,status == null ? 0 : status.length());
    }
    final Map<String,Integer> retval=new Hashtable<String,Integer>(3);
    retval.put(CONTEXT_COLUMN_LABEL,maxContextLen);
    retval.put(URI_COLUMN_LABEL,maxUriLen);
    retval.put(STATUS_COLUMN_LABEL,maxStatusLen);
    return retval;
  }
}
