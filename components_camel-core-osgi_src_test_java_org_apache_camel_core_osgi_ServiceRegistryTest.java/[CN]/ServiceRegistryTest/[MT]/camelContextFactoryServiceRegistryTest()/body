{
  DefaultCamelContext context=new OsgiDefaultCamelContext(getBundleContext());
  context.start();
  MyService myService=context.getRegistry().lookup(MyService.class.getName(),MyService.class);
  assertNotNull("MyService should not be null",myService);
  myService=context.getRegistry().lookup("test",MyService.class);
  assertNull("We should not get the MyService Object here",myService);
  Object service=context.getRegistry().lookup(MyService.class.getName());
  assertNotNull("MyService should not be null",service);
  assertTrue("It should be the instance of MyService ",service instanceof MyService);
  Map<String,MyService> collection=context.getRegistry().lookupByType(MyService.class);
  assertNotNull("MyService should not be null",collection);
  assertNotNull("There should have one MyService.",collection.get(MyService.class.getName()));
  context.stop();
}
