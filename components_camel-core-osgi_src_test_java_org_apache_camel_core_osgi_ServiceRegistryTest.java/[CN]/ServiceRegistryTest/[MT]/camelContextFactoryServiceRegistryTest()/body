{
  DefaultCamelContext context=new OsgiDefaultCamelContext(getBundleContext());
  context.start();
  MyService myService=context.getRegistry().lookupByNameAndType(MyService.class.getName(),MyService.class);
  assertNotNull("MyService should not be null",myService);
  myService=context.getRegistry().lookupByNameAndType("test",MyService.class);
  assertNull("We should not get the MyService Object here",myService);
  Object service=context.getRegistry().lookupByName(MyService.class.getName());
  assertNotNull("MyService should not be null",service);
  assertTrue("It should be the instance of MyService ",service instanceof MyService);
  Map<String,MyService> collection=context.getRegistry().findByTypeWithName(MyService.class);
  assertNotNull("MyService should not be null",collection);
  assertNotNull("There should have one MyService.",collection.get(MyService.class.getName()));
  Set<MyService> collection2=context.getRegistry().findByType(MyService.class);
  assertNotNull("MyService should not be null",collection2);
  assertEquals(1,collection2.size());
  context.stop();
}
