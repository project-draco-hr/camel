{
  if (packet instanceof Message) {
    Message message=(Message)packet;
    if (log.isDebugEnabled()) {
      log.debug("<<<< message: " + message.getBody());
    }
    XmppExchange exchange=endpoint.createExchange(message);
    try {
      getProcessor().process(exchange);
    }
 catch (    Exception e) {
      e.printStackTrace();
    }
  }
 else   if (packet instanceof RosterPacket) {
    RosterPacket rosterPacket=(RosterPacket)packet;
    if (log.isDebugEnabled()) {
      log.debug("Roster packet with : " + rosterPacket.getRosterItemCount() + " item(s)");
      Iterator rosterItems=rosterPacket.getRosterItems();
      while (rosterItems.hasNext()) {
        Object item=rosterItems.next();
        log.debug("Roster item: " + item);
      }
    }
  }
 else {
    if (log.isDebugEnabled()) {
      log.debug("<<<< ignored packet: " + packet);
    }
  }
}
