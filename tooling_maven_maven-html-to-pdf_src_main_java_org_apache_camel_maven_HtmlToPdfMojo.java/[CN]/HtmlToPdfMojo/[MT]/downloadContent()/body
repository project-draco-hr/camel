{
  String contentTag="<div class=\"" + contentDivClass + "\"";
  getLog().info("Downloading: " + page);
  URL url=new URL(page);
  try {
    TidyMarkupDataFormat dataFormat=new TidyMarkupDataFormat();
    dataFormat.setMethod("html");
    Node doc=dataFormat.asNodeTidyMarkup(new BufferedInputStream(url.openStream()));
    XPath xpath=XPathFactory.newInstance().newXPath();
    Node nd=(Node)xpath.evaluate("//div[@class='" + contentDivClass + "']",doc,XPathConstants.NODE);
    if (nd != null) {
      return new XmlConverter().toString(nd,null);
    }
  }
 catch (  Throwable e) {
    if (errorOnDownloadFailure) {
      throw new MojoExecutionException("Download or validation of '" + page + "' failed: "+ e);
    }
 else {
      getLog().error("Download or validation of '" + page + "' failed: "+ e);
      return null;
    }
  }
  throw new MojoExecutionException("The '" + page + "' page did not have a "+ contentTag+ " element.");
}
