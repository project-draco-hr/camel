{
  String contentTag="<div class=\"" + contentDivClass + "\"";
  String content="";
  getLog().info("Downloading: " + page);
  URL url=new URL(page);
  try {
    TidyMarkupDataFormat dataFormat=new TidyMarkupDataFormat();
    dataFormat.setMethod("html");
    content=dataFormat.asStringTidyMarkup(new BufferedInputStream(url.openStream()));
  }
 catch (  Throwable e) {
    if (errorOnDownloadFailure) {
      throw new MojoExecutionException("Download or validation of '" + page + "' failed: "+ e);
    }
 else {
      getLog().error("Download or validation of '" + page + "' failed: "+ e);
      return null;
    }
  }
  int contentStart=content.indexOf(contentTag);
  if (contentStart > 0) {
    int contentEnd=content.indexOf(contentTag,contentStart + 1);
    if (contentEnd > 0) {
      return content.substring(contentStart,contentEnd);
    }
 else {
      return content.substring(contentStart);
    }
  }
  throw new MojoExecutionException("The '" + page + "' page did not have a "+ contentTag+ " element.");
}
