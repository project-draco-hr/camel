{
  try {
    byte[] buf=new byte[8192];
    int bytesRead=input.read(buf);
    while (bytesRead != -1) {
      output.write(buf,0,bytesRead);
      bytesRead=input.read(buf);
    }
    output.flush();
  }
  finally {
    if (close) {
      close(input,output);
    }
  }
}
