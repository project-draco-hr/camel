{
  JettyHttpComponent jetty=context.getComponent("jetty",JettyHttpComponent.class);
  jetty.stop();
  Exchange exchange=template.request("direct:start",new Processor(){
    public void process(    Exchange exchange) throws Exception {
      exchange.getIn().setBody("Moon");
    }
  }
);
  assertTrue(exchange.isFailed());
  HttpHostConnectException cause=assertIsInstanceOf(HttpHostConnectException.class,exchange.getException());
  assertIsInstanceOf(ConnectException.class,cause.getCause());
  assertEquals(true,exchange.getIn().getHeader(Exchange.REDELIVERED));
  assertEquals(4,exchange.getIn().getHeader(Exchange.REDELIVERY_COUNTER));
}
