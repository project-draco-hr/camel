{
  String[] messages=new String[]{"{foo:bar}","{foo2:bar2}"};
  MockEndpoint mock=getMockEndpoint("mock:result");
  mock.expectedMessageCount(1);
  template.sendBody("direct:start",messages);
  assertMockEndpointsSatisfied();
  assertThat(mock.getReceivedExchanges().size(),equalTo(1));
  Object header=mock.getReceivedExchanges().get(0).getIn().getHeader(IronMQConstants.MESSAGE_ID);
  assertIsInstanceOf(Ids.class,header);
  assertThat(((Ids)header).getSize(),equalTo(2));
}
