{
  if (room == null) {
    throw new IllegalArgumentException("room is not specified");
  }
  if (room.indexOf('@',0) != -1) {
    return room;
  }
  XMPPConnection conn=getConnection();
  Iterator<String> iterator=MultiUserChat.getServiceNames(conn).iterator();
  if (!iterator.hasNext()) {
    throw new XMPPException("Cannot find Multi User Chat service");
  }
  String chatServer=iterator.next();
  LOG.info("Detected chat server: " + chatServer);
  return room + "@" + chatServer;
}
