{
  MockEndpoint result=resolveMandatoryEndpoint("mock:result",MockEndpoint.class);
  result.expectedMinimumMessageCount(2);
  result.setDefaulResultWaitMillis(5000);
  template.sendBodyAndHeader(uri,expectedBody,"cheese",123);
  result.assertIsSatisfied();
  int fileCount=0;
  int nullCount=0;
  for (  Exchange exchange : result.getReceivedExchanges()) {
    assertTrue(exchange instanceof FileExchange);
    FileExchange fx=(FileExchange)exchange;
    if (fx.getFile() == null) {
      nullCount++;
    }
 else {
      fileCount++;
    }
  }
  assertEquals(1,fileCount);
  assertTrue(nullCount > 0);
}
