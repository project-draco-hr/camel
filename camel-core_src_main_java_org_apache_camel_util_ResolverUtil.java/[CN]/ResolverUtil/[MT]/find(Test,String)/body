{
  packageName=packageName.replace('.','/');
  ClassLoader loader=getClassLoader();
  Enumeration<URL> urls;
  try {
    urls=loader.getResources(packageName);
  }
 catch (  IOException ioe) {
    LOG.warn("Could not read package: " + packageName,ioe);
    return;
  }
  while (urls.hasMoreElements()) {
    try {
      URL url=urls.nextElement();
      String urlPath=url.getFile();
      urlPath=URLDecoder.decode(urlPath,"UTF-8");
      if (urlPath.startsWith("file:")) {
        urlPath=urlPath.substring(5);
      }
      if (urlPath.indexOf('!') > 0) {
        urlPath=urlPath.substring(0,urlPath.indexOf('!'));
      }
      LOG.debug("Scanning for classes in [" + urlPath + "] matching criteria: "+ test);
      File file=new File(urlPath);
      if (file.isDirectory()) {
        loadImplementationsInDirectory(test,packageName,file);
      }
 else {
        loadImplementationsInJar(test,packageName,file);
      }
    }
 catch (    IOException ioe) {
      LOG.warn("could not read entries",ioe);
    }
  }
}
