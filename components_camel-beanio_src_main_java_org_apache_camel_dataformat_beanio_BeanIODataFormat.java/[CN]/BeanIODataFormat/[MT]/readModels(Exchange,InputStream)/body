{
  List<Object> results=new ArrayList<Object>();
  BufferedReader streamReader=IOHelper.buffered(new InputStreamReader(stream,getEncoding()));
  BeanReader in=factory.createReader(getStreamName(),streamReader);
  BeanReaderErrorHandler errorHandler=getOrCreateBeanReaderErrorHandler(configuration,exchange,results,null);
  in.setErrorHandler(errorHandler);
  try {
    Object readObject;
    while ((readObject=in.read()) != null) {
      if (readObject instanceof BeanIOHeader) {
        exchange.getOut().getHeaders().putAll(((BeanIOHeader)readObject).getHeaders());
      }
      results.add(readObject);
    }
  }
  finally {
    in.close();
  }
  return results;
}
