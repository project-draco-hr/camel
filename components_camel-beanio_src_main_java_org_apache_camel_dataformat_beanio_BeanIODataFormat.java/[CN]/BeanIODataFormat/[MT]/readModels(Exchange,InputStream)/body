{
  List<Object> results=new ArrayList<Object>();
  BufferedReader streamReader=IOHelper.buffered(new InputStreamReader(stream,getEncoding()));
  BeanReader in=factory.createReader(getStreamName(),streamReader);
  try {
    if (ObjectHelper.isNotEmpty(configuration.getBeanReaderErrorHandler())) {
      in.setErrorHandler(configuration.getBeanReaderErrorHandler());
    }
 else {
      in.setErrorHandler(new BeanIOErrorHandler(configuration));
    }
    Object readObject;
    while ((readObject=in.read()) != null) {
      if (readObject instanceof BeanIOHeader) {
        exchange.getOut().getHeaders().putAll(((BeanIOHeader)readObject).getHeaders());
      }
      results.add(readObject);
    }
  }
  finally {
    in.close();
  }
  return results;
}
