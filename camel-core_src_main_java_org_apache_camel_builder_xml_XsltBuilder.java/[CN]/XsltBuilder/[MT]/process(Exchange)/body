{
  notNull(getTemplate(),"template");
  Transformer transformer=getTemplate().newTransformer();
  configureTransformer(transformer,exchange);
  Source source=getSource(exchange);
  ResultHandler resultHandler=resultHandlerFactory.createResult(exchange);
  Result result=resultHandler.getResult();
  Message out=exchange.getOut();
  out.copyFrom(exchange.getIn());
  transformer.transform(source,result);
  resultHandler.setBody(out);
}
