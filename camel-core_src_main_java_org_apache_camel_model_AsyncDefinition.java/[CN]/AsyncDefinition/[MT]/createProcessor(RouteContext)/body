{
  if (executorServiceRef != null) {
    executorService=routeContext.lookup(executorServiceRef,ExecutorService.class);
  }
  if (executorService == null && poolSize != null) {
    executorService=ExecutorServiceHelper.newScheduledThreadPool(poolSize,"AsyncProcessor",true);
  }
  Processor childProcessor=routeContext.createProcessor(this);
  return new AsyncProcessor(childProcessor,executorService,waitForTaskToComplete);
}
