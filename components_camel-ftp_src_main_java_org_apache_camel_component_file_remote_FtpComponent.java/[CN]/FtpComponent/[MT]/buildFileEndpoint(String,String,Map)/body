{
  String baseUri=uri;
  if (uri.indexOf("?") != -1) {
    baseUri=uri.substring(0,uri.indexOf("?"));
  }
  FtpConfiguration config=new FtpConfiguration(new URI(baseUri));
  FtpOperations operations=new FtpOperations();
  FtpEndpoint result=new FtpEndpoint(uri,this,operations,config);
  operations.setEndpoint(result);
  return result;
}
