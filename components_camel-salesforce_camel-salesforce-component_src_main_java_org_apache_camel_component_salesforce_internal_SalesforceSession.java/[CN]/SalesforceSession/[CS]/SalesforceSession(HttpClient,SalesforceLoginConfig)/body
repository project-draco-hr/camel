{
  assertNotNull("Null httpClient",httpClient);
  assertNotNull("Null SalesforceLoginConfig",config);
  assertNotNull("Null loginUrl",config.getLoginUrl());
  assertNotNull("Null clientId",config.getClientId());
  assertNotNull("Null clientSecret",config.getClientSecret());
  assertNotNull("Null userName",config.getUserName());
  assertNotNull("Null password",config.getPassword());
  this.httpClient=httpClient;
  this.config=config;
  String loginUrl=config.getLoginUrl();
  config.setLoginUrl(loginUrl.endsWith("/") ? loginUrl.substring(0,loginUrl.length() - 1) : loginUrl);
  this.objectMapper=new ObjectMapper();
  this.listeners=new CopyOnWriteArraySet<SalesforceSessionListener>();
}
