{
  ObjectHelper.notNull(httpClient,"httpClient");
  ObjectHelper.notNull(config,"SalesforceLoginConfig");
  ObjectHelper.notNull(config.getLoginUrl(),"loginUrl");
  ObjectHelper.notNull(config.getClientId(),"clientId");
  ObjectHelper.notNull(config.getClientSecret(),"clientSecret");
  ObjectHelper.notNull(config.getUserName(),"userName");
  ObjectHelper.notNull(config.getPassword(),"password");
  this.httpClient=httpClient;
  this.timeout=timeout;
  this.config=config;
  String loginUrl=config.getLoginUrl();
  config.setLoginUrl(loginUrl.endsWith("/") ? loginUrl.substring(0,loginUrl.length() - 1) : loginUrl);
  this.objectMapper=JsonUtils.createObjectMapper();
  this.listeners=new CopyOnWriteArraySet<SalesforceSessionListener>();
}
