{
  MockEndpoint resultEndpoint=resolveMandatoryEndpoint("mock:result",MockEndpoint.class);
  resultEndpoint.expectedMessageCount(1);
  Map body=new HashMap();
  body.put("foo","abc");
  body.put("bar",123);
  template.sendBody("direct:start",body);
  resultEndpoint.assertIsSatisfied();
  List<Exchange> list=resultEndpoint.getReceivedExchanges();
  for (  Exchange exchange : list) {
    Message in=exchange.getIn();
    Object value=in.getBody();
    System.out.println("Body is: " + value + " of type: "+ ObjectHelper.className(value));
    String text=in.getBody(String.class);
    System.out.println("Received: " + text);
  }
}
