{
  if (endpointpDone.compareAndSet(false,true)) {
    for (    Route route : routes) {
      ServiceHelper.startService(route.getEndpoint());
    }
  }
  if (warmUpDone.compareAndSet(false,true)) {
    for (    Route route : routes) {
      if (LOG.isDebugEnabled()) {
        LOG.debug("Starting services on route: " + route.getId());
      }
      List<Service> services=route.getServices();
      route.onStartingServices(services);
      Set<Service> list=new LinkedHashSet<Service>();
      for (      Service service : services) {
        doGetChildServices(list,service);
      }
      List<Service> childServices=new ArrayList<Service>();
      for (      Service service : list) {
        if (service instanceof Consumer) {
          inputs.put(route,(Consumer)service);
        }
 else {
          childServices.add(service);
        }
      }
      startChildService(route,childServices);
    }
    for (    LifecycleStrategy strategy : camelContext.getLifecycleStrategies()) {
      strategy.onRoutesAdd(routes);
    }
    camelContext.addRouteCollection(routes);
  }
}
