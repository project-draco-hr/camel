{
  boolean includeErrorHandler=!routeDefinition.isContextScopedErrorHandler(route.getRouteContext().getCamelContext());
  List<Service> extra=new ArrayList<Service>();
  if (includeErrorHandler) {
    for (    Service service : services) {
      if (service instanceof Channel) {
        Processor eh=((Channel)service).getErrorHandler();
        if (eh != null && eh instanceof Service) {
          extra.add((Service)eh);
        }
      }
    }
  }
  if (!extra.isEmpty()) {
    services.addAll(extra);
  }
}
