{
  for (  Route route : routes) {
    LOG.debug("Shutting down services on route: {}",route.getId());
    List<Service> services=new ArrayList<Service>();
    services.addAll(route.getServices());
    doGetRouteScopedServices(services,route);
    Set<Service> list=new LinkedHashSet<Service>();
    for (    Service service : services) {
      list.addAll(ServiceHelper.getChildServices(service));
    }
    doGetRouteScopedErrorHandler(list,route);
    stopChildService(route,list,true);
    ServiceHelper.stopAndShutdownServices(route);
    ServiceHelper.stopAndShutdownServices(route.getEndpoint());
    if (routeDefinition.getRoutePolicies() != null) {
      for (      RoutePolicy routePolicy : routeDefinition.getRoutePolicies()) {
        routePolicy.onRemove(route);
      }
    }
  }
  for (  LifecycleStrategy strategy : camelContext.getLifecycleStrategies()) {
    strategy.onRoutesRemove(routes);
  }
  for (  Route route : routes) {
    camelContext.getInflightRepository().removeRoute(route.getId());
  }
  camelContext.removeRouteCollection(routes);
  inputs.clear();
  warmUpDone.set(false);
  endpointDone.set(false);
}
