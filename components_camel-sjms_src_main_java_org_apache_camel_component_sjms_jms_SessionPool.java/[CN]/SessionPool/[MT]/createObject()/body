{
  Session session=null;
  final Connection connection=getConnectionResource().borrowConnection(5000);
  if (connection != null) {
    if (transacted) {
      session=connection.createSession(transacted,Session.AUTO_ACKNOWLEDGE);
    }
 else {
switch (acknowledgeMode) {
case CLIENT_ACKNOWLEDGE:
        session=connection.createSession(transacted,Session.CLIENT_ACKNOWLEDGE);
      break;
case DUPS_OK_ACKNOWLEDGE:
    session=connection.createSession(transacted,Session.DUPS_OK_ACKNOWLEDGE);
  break;
case AUTO_ACKNOWLEDGE:
session=connection.createSession(transacted,Session.AUTO_ACKNOWLEDGE);
break;
default :
}
}
}
getConnectionResource().returnConnection(connection);
return session;
}
