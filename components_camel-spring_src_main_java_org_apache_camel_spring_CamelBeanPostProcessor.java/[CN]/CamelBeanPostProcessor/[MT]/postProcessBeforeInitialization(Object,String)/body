{
  if (LOG.isTraceEnabled()) {
    LOG.trace("Camel bean processing before initialization for bean: " + beanName);
  }
  if (!canPostProcessBean(bean,beanName)) {
    return bean;
  }
  if (getCamelContext() == null && applicationContext.containsBean(getCamelId())) {
    setCamelContext((CamelContext)applicationContext.getBean(getCamelId()));
  }
  injectFields(bean,beanName);
  injectMethods(bean,beanName);
  if (bean instanceof CamelContextAware && canSetCamelContext(bean,beanName)) {
    CamelContextAware contextAware=(CamelContextAware)bean;
    if (getCamelContext() == null) {
      LOG.warn("No CamelContext defined yet so cannot inject into: " + bean);
    }
 else {
      contextAware.setCamelContext(getCamelContext());
    }
  }
  return bean;
}
