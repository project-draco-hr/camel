{
  FileEndpoint endpoint=resolveMandatoryEndpoint(endpointUri,FileEndpoint.class);
  assertNotNull("Could not find endpoint: " + endpointUri,endpoint);
  if (!absolute) {
    File file=endpoint.getFile();
    String path=file.getPath();
    assertDirectoryEquals("For uri: " + endpointUri + " the file is not equal",expectedPath,path);
    file=new File(expectedPath + (expectedPath.endsWith(File.separator) ? "" : File.separator) + EXPECT_FILE);
    GenericFile<File> consumedFile=FileConsumer.asGenericFile(endpoint.getFile().getPath(),file,null);
    assertEquals(EXPECT_FILE,consumedFile.getRelativeFilePath());
  }
}
