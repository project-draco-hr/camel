{
  if (!isRunAllowed()) {
    return;
  }
  try {
    EtcdKeysResponse response=promise.get();
    Exchange exchange=endpoint.createExchange();
    exchange.getIn().setHeader(EtcdConstants.ETCD_PATH,response.node.key);
    exchange.getIn().setBody(response);
    getProcessor().process(exchange);
    watch();
  }
 catch (  TimeoutException e) {
    LOGGER.debug("Timeout watching for {}",getPath());
    if (configuration.isSendEmptyExchangeOnTimeout()) {
      Exchange exchange=endpoint.createExchange();
      try {
        exchange.getIn().setHeader(EtcdConstants.ETCD_TIMEOUT,true);
        exchange.getIn().setHeader(EtcdConstants.ETCD_PATH,getPath());
        exchange.getIn().setBody(null);
        getProcessor().process(exchange);
      }
 catch (      Exception e1) {
        getExceptionHandler().handleException("Error processing exchange",exchange,e1);
      }
    }
  }
catch (  Exception e) {
    throw new IllegalArgumentException(e);
  }
}
