{
  InputStream is=exchange.getIn().getBody(InputStream.class);
  try {
    return client.storeFile(name,is);
  }
 catch (  IOException e) {
    throw new RemoteFileOperationFailedException(client.getReplyCode(),client.getReplyString(),e.getMessage(),e);
  }
 finally {
    ObjectHelper.close(is,"store: " + name,LOG);
  }
}
