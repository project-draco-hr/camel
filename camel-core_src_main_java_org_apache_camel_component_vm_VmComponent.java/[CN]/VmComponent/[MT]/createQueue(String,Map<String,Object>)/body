{
  String key=getQueueKey(uri);
  if (QUEUES.containsKey(key)) {
    return QUEUES.get(key);
  }
  BlockingQueue<Exchange> queue;
  Integer size=getAndRemoveParameter(parameters,"size",Integer.class);
  if (size != null && size > 0) {
    queue=new LinkedBlockingQueue<Exchange>(size);
  }
 else {
    if (getQueueSize() > 0) {
      queue=new LinkedBlockingQueue<Exchange>(getQueueSize());
    }
 else {
      queue=new LinkedBlockingQueue<Exchange>();
    }
  }
  QUEUES.put(key,queue);
  return queue;
}
