{
  Exchange response=template.request("direct:a",new Processor(){
    public void process(    Exchange exchange) throws Exception {
      Message in=exchange.getIn();
      in.setHeader(headerName,headerValue);
    }
  }
);
  assertOutMessageBodyEquals(response,expectedBody);
  Set<Map.Entry<String,Object>> entrySet=response.getOut().getHeaders().entrySet();
  boolean keyFound=false;
  for (  Map.Entry<String,Object> entry : entrySet) {
    if (entry.getKey().equals(headerName)) {
      keyFound=true;
    }
  }
  assertTrue("Header should been found",keyFound);
}
