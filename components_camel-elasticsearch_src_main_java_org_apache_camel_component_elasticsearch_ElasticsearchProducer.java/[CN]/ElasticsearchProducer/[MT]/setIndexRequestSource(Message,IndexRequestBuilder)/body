{
  Object body=null;
  boolean converted=false;
  Class<?>[] types=new Class[]{XContentBuilder.class,Map.class,byte[].class,String.class};
  for (int i=0; i < types.length && body == null; i++) {
    Class<?> type=types[i];
    body=msg.getBody(type);
  }
  if (body != null) {
    converted=true;
    if (body instanceof byte[]) {
      builder.setSource((byte[])body);
    }
 else     if (body instanceof Map) {
      builder.setSource((Map<String,Object>)body);
    }
 else     if (body instanceof String) {
      builder.setSource((String)body);
    }
 else     if (body instanceof XContentBuilder) {
      builder.setSource((XContentBuilder)body);
    }
 else {
      converted=false;
    }
  }
  return converted;
}
