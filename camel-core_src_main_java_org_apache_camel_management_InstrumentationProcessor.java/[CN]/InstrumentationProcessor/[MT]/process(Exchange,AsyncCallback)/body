{
  long start=-1;
  if (counter != null && counter.isStatisticsEnabled()) {
    start=System.nanoTime();
  }
  final long startTime=start;
  return super.process(exchange,new AsyncCallback(){
    public void done(    boolean doneSync){
      try {
        if (startTime > -1) {
          long diff=(System.nanoTime() - startTime) / 1000000;
          recordTime(exchange,diff);
        }
      }
  finally {
        callback.done(doneSync);
      }
    }
  }
);
}
