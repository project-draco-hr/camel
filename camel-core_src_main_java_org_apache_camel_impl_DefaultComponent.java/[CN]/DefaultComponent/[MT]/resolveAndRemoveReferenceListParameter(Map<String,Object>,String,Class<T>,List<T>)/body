{
  String value=getAndRemoveParameter(parameters,key,String.class);
  if (EndpointHelper.isReferenceParameter(value)) {
    List<T> result=EndpointHelper.resolveReferenceListParameter(getCamelContext(),value.toString(),elementType);
    return result.isEmpty() ? defaultValue : result;
  }
 else   if (value == null) {
    return defaultValue;
  }
 else {
    throw new IllegalArgumentException("Parameter value " + value + " is not a valid reference (list)");
  }
}
