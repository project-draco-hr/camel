{
  Map<Integer,OnExceptionDefinition> candidates=new TreeMap<Integer,OnExceptionDefinition>();
  boolean exactMatch=false;
  Iterator<Throwable> it=createExceptionIterator(exception);
  while (!exactMatch && it.hasNext()) {
    exactMatch=findMatchedExceptionPolicy(exceptionPolicies,exchange,it.next(),candidates);
  }
  if (LOG.isTraceEnabled()) {
    LOG.trace("Found " + candidates.size() + " candidates");
  }
  if (candidates.isEmpty()) {
    return null;
  }
 else {
    return candidates.values().iterator().next();
  }
}
