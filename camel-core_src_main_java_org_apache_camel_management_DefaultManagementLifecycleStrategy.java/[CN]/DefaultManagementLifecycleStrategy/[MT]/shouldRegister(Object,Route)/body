{
  if (!initialized) {
    return false;
  }
  LOG.trace("Checking whether to register {} from route: {}",service,route);
  ManagementAgent agent=getManagementStrategy().getManagementAgent();
  if (agent == null) {
    return false;
  }
  if (getCamelContext().getStatus().isStarting()) {
    return true;
  }
  if (getCamelContext().isSetupRoutes()) {
    return true;
  }
  if (agent.getRegisterAlways()) {
    return true;
  }
  if (route != null && knowRouteIds.contains(route.getId())) {
    return true;
  }
  if (agent.getRegisterNewRoutes()) {
    return getCamelContext().isStartingRoutes();
  }
  return false;
}
