{
  long redeliveryDelay;
  if (previousDelay == 0) {
    redeliveryDelay=initialRedeliveryDelay;
  }
 else   if (useExponentialBackOff && backOffMultiplier > 1) {
    redeliveryDelay=Math.round(backOffMultiplier * previousDelay);
  }
 else {
    redeliveryDelay=previousDelay;
  }
  if (useCollisionAvoidance) {
    Random random=getRandomNumberGenerator();
    double variance=(random.nextBoolean() ? collisionAvoidanceFactor : -collisionAvoidanceFactor) * random.nextDouble();
    redeliveryDelay+=redeliveryDelay * variance;
  }
  return redeliveryDelay;
}
