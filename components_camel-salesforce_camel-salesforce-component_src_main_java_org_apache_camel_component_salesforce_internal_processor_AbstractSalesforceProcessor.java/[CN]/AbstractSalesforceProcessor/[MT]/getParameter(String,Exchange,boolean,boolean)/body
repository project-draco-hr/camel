{
  String propValue=exchange.getIn().getHeader(propName,String.class);
  propValue=propValue == null ? endpointConfigMap.get(propName) : propValue;
  propValue=(propValue == null && convertInBody) ? exchange.getIn().getBody(String.class) : propValue;
  if (propValue == null && !optional) {
    String msg="Missing property " + propName;
    throw new SalesforceException(msg,null);
  }
  return propValue;
}
