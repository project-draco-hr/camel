{
  HttpEndpoint http=context.getEndpoint("http://www.google.com",HttpEndpoint.class);
  System.setProperty("http.proxyHost","myproxy");
  System.setProperty("http.proxyPort","1234");
  try {
    HttpClient client=http.createHttpClient();
    assertEquals("myproxy",client.getHostConfiguration().getProxyHost());
    assertEquals(1234,client.getHostConfiguration().getProxyPort());
  }
  finally {
    System.clearProperty("http.proxyHost");
    System.clearProperty("http.proxyPort");
  }
}
