{
  HttpEndpoint http=context.getEndpoint("http://www.google.com?proxyHost=myotherproxy&proxyPort=2345",HttpEndpoint.class);
  System.setProperty("http.proxyHost","myproxy");
  System.setProperty("http.proxyPort","1234");
  try {
    HttpClient client=http.createHttpClient();
    assertEquals("myotherproxy",client.getHostConfiguration().getProxyHost());
    assertEquals(2345,client.getHostConfiguration().getProxyPort());
  }
  finally {
    System.clearProperty("http.proxyHost");
    System.clearProperty("http.proxyPort");
  }
}
