{
  HttpEndpoint http=context.getEndpoint("http://www.google.com?proxyHost=myotherproxy&proxyPort=2345",HttpEndpoint.class);
  context.getProperties().put("http.proxyHost","myproxy");
  context.getProperties().put("http.proxyPort","1234");
  try {
    HttpClient client=http.createHttpClient();
    assertEquals("myotherproxy",client.getHostConfiguration().getProxyHost());
    assertEquals(2345,client.getHostConfiguration().getProxyPort());
  }
  finally {
    context.getProperties().remove("http.proxyHost");
    context.getProperties().remove("http.proxyPort");
  }
}
