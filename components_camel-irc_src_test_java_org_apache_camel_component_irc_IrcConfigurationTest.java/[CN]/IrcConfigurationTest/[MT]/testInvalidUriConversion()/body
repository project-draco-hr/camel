{
  String deprecate;
  String sanitized;
  Endpoint endpoint;
  IrcComponent component=context.getComponent("irc",IrcComponent.class);
  deprecate="irc://camelbot@irc.freenode.net:1234/#camel";
  sanitized="irc://camelbot@irc.freenode.net:1234?channel=camel";
  endpoint=component.createEndpoint(deprecate);
  assertEquals(sanitized,endpoint.getEndpointUri());
  assertNotNull(new URI(endpoint.getEndpointUri()));
  deprecate="irc://camelbot@irc.freenode.net/##camel";
  sanitized="irc://camelbot@irc.freenode.net?channel=%23%23camel";
  endpoint=component.createEndpoint(deprecate);
  assertEquals(sanitized,endpoint.getEndpointUri());
  assertNotNull(new URI(endpoint.getEndpointUri()));
  deprecate="irc://camelbot@irc.freenode.net/#karaf?channels=#camel,#cxf";
  sanitized="irc://camelbot@irc.freenode.net?channel=camel&channel=cxf";
  endpoint=component.createEndpoint(deprecate);
  assertEquals(sanitized,endpoint.getEndpointUri());
  assertNotNull(new URI(endpoint.getEndpointUri()));
  deprecate="irc://camelbot@irc.freenode.net?channels=#camel,#cxf";
  sanitized="irc://camelbot@irc.freenode.net?channel=camel&channel=cxf";
  endpoint=component.createEndpoint(deprecate);
  assertEquals(sanitized,endpoint.getEndpointUri());
  assertNotNull(new URI(endpoint.getEndpointUri()));
  deprecate="irc://camelbot@irc.freenode.net?channels=#camel,#cxf&keys=foo,bar";
  sanitized="irc://camelbot@irc.freenode.net?channel=camel!foo&channel=cxf!bar";
  endpoint=component.createEndpoint(deprecate);
  assertEquals(sanitized,endpoint.getEndpointUri());
  assertNotNull(new URI(endpoint.getEndpointUri()));
  deprecate="irc://camelbot@irc.freenode.net?channels=#camel,#cxf&keys=foo,";
  sanitized="irc://camelbot@irc.freenode.net?channel=camel!foo&channel=cxf";
  endpoint=component.createEndpoint(deprecate);
  assertEquals(sanitized,endpoint.getEndpointUri());
  assertNotNull(new URI(endpoint.getEndpointUri()));
  deprecate="irc://irc.freenode.net?keys=,foo&channels=#camel,#cxf&username=camelbot";
  sanitized="irc://camelbot@irc.freenode.net?channel=camel&channel=cxf!foo";
  endpoint=component.createEndpoint(deprecate);
  assertEquals(sanitized,endpoint.getEndpointUri());
  assertNotNull(new URI(endpoint.getEndpointUri()));
  deprecate="irc://irc.freenode.net?keys=,foo&channels=#camel,#cxf&username=camelbot&password=secret";
  sanitized="irc://camelbot:secret@irc.freenode.net?channel=camel&channel=cxf!foo";
  endpoint=component.createEndpoint(deprecate);
  assertEquals(sanitized,endpoint.getEndpointUri());
  assertNotNull(new URI(endpoint.getEndpointUri()));
  deprecate="irc://irc.freenode.net?channels=#camel,#cxf&nickname=camelbot";
  sanitized="irc://camelbot@irc.freenode.net?channel=camel&channel=cxf";
  endpoint=component.createEndpoint(deprecate);
  assertEquals(sanitized,endpoint.getEndpointUri());
  assertNotNull(new URI(endpoint.getEndpointUri()));
  deprecate="irc://user@irc.freenode.net?keys=foo,&channels=#camel,#cxf&realname=Camel Bot&username=user&nickname=camelbot";
  sanitized="irc://user@irc.freenode.net?realname=Camel%20Bot&nickname=camelbot&channel=camel!foo&channel=cxf";
  endpoint=component.createEndpoint(deprecate);
  assertEquals(sanitized,endpoint.getEndpointUri());
  assertNotNull(new URI(endpoint.getEndpointUri()));
}
