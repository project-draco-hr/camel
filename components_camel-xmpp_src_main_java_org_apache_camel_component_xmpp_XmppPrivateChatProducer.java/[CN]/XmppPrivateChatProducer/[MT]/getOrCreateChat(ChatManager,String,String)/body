{
  if (LOG.isTraceEnabled()) {
    LOG.trace("Looking for existing chat instance with thread ID {}",endpoint.getChatId());
  }
  Chat chat=chatManager.getThreadChat(thread);
  if (chat == null) {
    if (LOG.isTraceEnabled()) {
      LOG.trace("Creating new chat instance with thread ID {}",thread);
    }
    chat=chatManager.createChat(participant,thread,new MessageListener(){
      public void processMessage(      Chat chat,      Message message){
        if (LOG.isDebugEnabled()) {
          LOG.debug("Received and discarding message from {} : {}",participant,message.getBody());
        }
      }
    }
);
  }
  return chat;
}
