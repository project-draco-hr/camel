{
  ByteArrayOutputStream bOut=new ByteArrayOutputStream();
  PGPCompressedDataGenerator comData=new PGPCompressedDataGenerator(algorithm);
  OutputStream cos=comData.open(bOut);
  PGPLiteralDataGenerator lData=new PGPLiteralDataGenerator();
  OutputStream pOut=lData.open(cos,PGPLiteralData.BINARY,fileName,clearData.length,new Date());
  try {
    pOut.write(clearData);
  }
  finally {
    IOHelper.close(pOut);
    comData.close();
  }
  return bOut.toByteArray();
}
