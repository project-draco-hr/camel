{
  try {
    LOG.debug("Wating for latch");
    latch.await();
    Thread.sleep(1000);
  }
 catch (  Exception e) {
  }
  LOG.debug("Sending late reply");
  try {
    JmsEndpoint endpoint=JmsEndpoint.newInstance(replyDestination,activeMQComponent);
    template.send(endpoint,new Processor(){
      public void process(      Exchange exchange) throws Exception {
        exchange.setPattern(ExchangePattern.InOnly);
        Message in=exchange.getIn();
        in.setBody(expectedBody);
        in.setHeader("JMSCorrelationID",cid);
      }
    }
);
  }
 catch (  JMSException e) {
    LOG.error("Failed to create the endpoint for " + replyDestination);
  }
}
