{
  String host=(String)parameters.get("host");
  String port=(String)parameters.get("port");
  String username=(String)parameters.get("username");
  String password=(String)parameters.get("password");
  if (ObjectHelper.isEmpty(username) || ObjectHelper.isEmpty(password)) {
    throw new IllegalArgumentException("Username and password has to be specified");
  }
  if (ObjectHelper.isNotEmpty(host) && ObjectHelper.isNotEmpty(port)) {
    return new SplunkConfiguration(host,Integer.valueOf(port),username,password);
  }
  return new SplunkConfiguration(username,password);
}
