{
  try {
    Collection<Part> parts=request.getParts();
    for (    Part part : parts) {
      DataSource ds=new PartDataSource(part);
      message.addAttachment(part.getName(),new DataHandler(ds));
    }
  }
 catch (  Exception e) {
    throw new RuntimeCamelException("Cannot populate attachments",e);
  }
}
