{
  final PojoEndpoint endpoint=component.lookupActivation(getEndpointUri());
  if (endpoint == null)   throw new IllegalArgumentException("The endpoint has not been activated yet: " + getEndpointUri());
  return Proxy.newProxyInstance(pojo.getClass().getClassLoader(),interfaces,new InvocationHandler(){
    public Object invoke(    Object proxy,    Method method,    Object[] args) throws Throwable {
      if (!activated.get()) {
        PojoInvocation invocation=new PojoInvocation(proxy,method,args);
        PojoExchange exchange=createExchange();
        exchange.setRequest(invocation);
        endpoint.getInboundProcessor().onExchange(exchange);
        Throwable fault=exchange.getFault();
        if (fault != null) {
          throw new InvocationTargetException(fault);
        }
        return exchange.getResponse();
      }
      throw new IllegalStateException("The endpoint is not active: " + getEndpointUri());
    }
  }
);
}
