{
  from("upload1").process(new Processor(){
    @Override public void process(    Exchange arg0) throws Exception {
    }
  }
).to("upload2Client");
  from("upload2").process(new Processor(){
    @Override public void process(    Exchange exchange) throws Exception {
      content=(exchange.getIn().getHeader("content",String.class));
      name=(exchange.getIn().getHeader("name",String.class));
      latch.countDown();
    }
  }
);
  Thread t=new Thread(new Runnable(){
    /** 
 * Sends a request to the first endpoint in the route
 */
    public void run(){
      try {
        JAXRSClientFactory.create(getContext().getEndpoint("upload1",CxfRsEndpoint.class).getAddress(),UploadService.class).upload(CamelRouteBuilder.class.getResourceAsStream(SAMPLE_CONTENT_PATH),SAMPLE_NAME);
      }
 catch (      Exception e) {
        e.printStackTrace();
        throw new RuntimeException(e);
      }
    }
  }
);
  t.start();
}
