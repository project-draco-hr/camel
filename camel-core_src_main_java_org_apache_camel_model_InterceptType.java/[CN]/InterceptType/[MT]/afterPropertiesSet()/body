{
  List<ProcessorType> list=new ArrayList<ProcessorType>();
  for (  ProcessorType out : outputs) {
    if (out instanceof WhenType) {
      WhenType when=(WhenType)out;
      usePredicate=Boolean.TRUE;
      ChoiceType choice=new ChoiceType();
      choice.when(PredicateBuilder.not(when.getExpression()));
      choice.addOutput(proceed);
      list.add(choice);
      ChoiceType otherwise=choice.otherwise();
      for (      ProcessorType child : when.getOutputs()) {
        if (child instanceof StopType) {
          stopIntercept();
        }
 else {
          otherwise.addOutput(child);
        }
      }
    }
 else     if (out instanceof StopType) {
      stopIntercept();
    }
 else {
      list.add(out);
    }
  }
  outputs.clear();
  for (  ProcessorType out : list) {
    addOutput(out);
  }
}
