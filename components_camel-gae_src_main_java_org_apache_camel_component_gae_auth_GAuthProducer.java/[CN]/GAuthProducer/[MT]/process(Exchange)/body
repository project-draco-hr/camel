{
  if (getEndpoint().getName() == AUTHORIZE) {
    GoogleOAuthParameters params=getAuthorizeBinding().writeRequest(getEndpoint(),exchange,null);
    getEndpoint().getService().getUnauthorizedRequestToken(params);
    getAuthorizeBinding().readResponse(getEndpoint(),exchange,params);
  }
 else {
    GoogleOAuthParameters params=getUpgradeBinding().writeRequest(getEndpoint(),exchange,null);
    getEndpoint().getService().getAccessToken(params);
    getUpgradeBinding().readResponse(getEndpoint(),exchange,params);
  }
}
