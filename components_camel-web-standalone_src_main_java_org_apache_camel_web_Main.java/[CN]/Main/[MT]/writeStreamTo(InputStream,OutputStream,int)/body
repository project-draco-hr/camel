{
  int available=Math.min(input.available(),256 * KB);
  byte[] buffer=new byte[Math.max(bufferSize,available)];
  int answer=0;
  int count=input.read(buffer);
  while (count >= 0) {
    output.write(buffer,0,count);
    answer+=count;
    count=input.read(buffer);
  }
  return answer;
}
