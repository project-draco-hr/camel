{
  if (!endpoint.isDynamicity()) {
    return endpoint.getDb();
  }
  String dynamicDB=exchange.getIn().getHeader(MongoDbConstants.DATABASE,String.class);
  DB db=null;
  if (dynamicDB == null) {
    db=endpoint.getDb();
  }
 else {
    db=endpoint.getMongoConnection().getDB(dynamicDB);
  }
  if (LOG.isDebugEnabled()) {
    LOG.debug("Dynamic database selected: {}",db.getName());
  }
  return db;
}
