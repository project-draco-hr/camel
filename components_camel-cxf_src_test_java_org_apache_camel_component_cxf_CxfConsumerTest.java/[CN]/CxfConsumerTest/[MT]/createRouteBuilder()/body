{
  return new RouteBuilder(){
    public void configure(){
      from(SIMPLE_ENDPOINT_URI).choice().when(header(CxfConstants.OPERATION_NAME).isEqualTo(ECHO_OPERATION)).process(new Processor(){
        public void process(        final Exchange exchange){
          assertEquals(DataFormat.POJO,exchange.getProperty(CxfConstants.DATA_FORMAT_PROPERTY,DataFormat.class));
          Message in=exchange.getIn();
          List<?> parameter=in.getBody(List.class);
          String operation=(String)in.getHeader(CxfConstants.OPERATION_NAME);
          Object result=operation + " " + (String)parameter.get(0);
          exchange.getOut().setBody(result);
          Map<String,Object> map=new HashMap<String,Object>();
          map.put("org.apache.cxf.stax.force-start-document",Boolean.TRUE);
          exchange.getOut().setHeader(Client.RESPONSE_CONTEXT,map);
        }
      }
).when(header(CxfConstants.OPERATION_NAME).isEqualTo(ECHO_BOOLEAN_OPERATION)).process(new Processor(){
        public void process(        final Exchange exchange){
          Message in=exchange.getIn();
          List<?> parameter=in.getBody(List.class);
          exchange.getOut().setBody((Boolean)parameter.get(0));
        }
      }
);
    }
  }
;
}
