{
  MockEndpoint mock=getMockEndpoint("mock:result");
  mock.setRetainFirst(5);
  mock.setRetainLast(5);
  mock.expectedMessageCount(11);
  sendMessages(0,1,2,3,4,5,6,7,8,9,10);
  assertMockEndpointsSatisfied();
  assertEquals(11,mock.getReceivedCounter());
  assertEquals(10,mock.getExchanges().size());
  assertEquals(10,mock.getReceivedExchanges().size());
  assertEquals("<message>0</message>",mock.getReceivedExchanges().get(0).getIn().getBody());
  assertEquals("<message>1</message>",mock.getReceivedExchanges().get(1).getIn().getBody());
  assertEquals("<message>2</message>",mock.getReceivedExchanges().get(2).getIn().getBody());
  assertEquals("<message>3</message>",mock.getReceivedExchanges().get(3).getIn().getBody());
  assertEquals("<message>4</message>",mock.getReceivedExchanges().get(4).getIn().getBody());
  assertEquals("<message>6</message>",mock.getReceivedExchanges().get(5).getIn().getBody());
  assertEquals("<message>7</message>",mock.getReceivedExchanges().get(6).getIn().getBody());
  assertEquals("<message>8</message>",mock.getReceivedExchanges().get(7).getIn().getBody());
  assertEquals("<message>9</message>",mock.getReceivedExchanges().get(8).getIn().getBody());
  assertEquals("<message>10</message>",mock.getReceivedExchanges().get(9).getIn().getBody());
}
