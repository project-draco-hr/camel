{
  super(endpointUri,component);
  try {
    URI uri=new URI(endpointUri);
    if (uri.getUserInfo() != null) {
      String[] creds=uri.getUserInfo().split(":");
      if (creds != null) {
        String username=creds[0];
        String password=creds.length > 1 ? creds[1] : "";
        this.credentials=new SimpleCredentials(username,password.toCharArray());
      }
    }
    this.repository=component.getCamelContext().getRegistry().lookupByNameAndType(uri.getHost(),Repository.class);
    if (repository == null) {
      throw new RuntimeCamelException("No JCR repository defined under '" + uri.getHost() + "'");
    }
    this.base=uri.getPath().replaceAll("^/","");
  }
 catch (  URISyntaxException e) {
    throw new IllegalArgumentException("Invalid URI: " + endpointUri,e);
  }
}
