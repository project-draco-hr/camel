{
  super(endpointUri,component);
  try {
    URI uri=new URI(endpointUri);
    if (uri.getUserInfo() != null && uri.getAuthority() != null) {
      this.credentials=new SimpleCredentials(uri.getUserInfo(),uri.getAuthority().toCharArray());
    }
    this.repository=component.getCamelContext().getRegistry().lookup(uri.getHost(),Repository.class);
    if (repository == null) {
      throw new RuntimeCamelException("No JCR repository defined under '" + uri.getHost() + "'");
    }
    this.base=uri.getPath().replaceAll("^/","");
  }
 catch (  URISyntaxException e) {
    throw new IllegalArgumentException("Invalid URI: " + endpointUri,e);
  }
}
