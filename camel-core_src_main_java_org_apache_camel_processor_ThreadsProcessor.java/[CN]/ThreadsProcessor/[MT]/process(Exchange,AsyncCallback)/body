{
  if (shutdown.get()) {
    throw new IllegalStateException("ThreadsProcessor is not running.");
  }
  ProcessCall call=new ProcessCall(exchange,callback);
  try {
    executorService.submit(call);
    return false;
  }
 catch (  RejectedExecutionException e) {
    if (isCallerRunsWhenRejected()) {
      if (shutdown.get()) {
        exchange.setException(new RejectedExecutionException());
      }
 else {
        callback.done(true);
      }
    }
 else {
      exchange.setException(e);
    }
    return true;
  }
}
