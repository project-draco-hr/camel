{
  if (shutdown.get()) {
    throw new IllegalStateException("ThreadsProcessor is not running.");
  }
  if (exchange.isTransacted()) {
    LOG.trace("Transacted Exchange must be routed synchronously for exchangeId: {} -> {}",exchange.getExchangeId(),exchange);
    callback.done(true);
    return true;
  }
  ProcessCall call=new ProcessCall(exchange,callback);
  try {
    LOG.trace("Submitting task {}",call);
    executorService.submit(call);
    return false;
  }
 catch (  RejectedExecutionException e) {
    boolean callerRuns=isCallerRunsWhenRejected();
    if (!callerRuns) {
      exchange.setException(e);
    }
    LOG.trace("{} executing task {}",callerRuns ? "CallerRuns" : "Aborted",call);
    if (shutdown.get()) {
      exchange.setException(new RejectedExecutionException());
    }
    callback.done(true);
    return true;
  }
}
