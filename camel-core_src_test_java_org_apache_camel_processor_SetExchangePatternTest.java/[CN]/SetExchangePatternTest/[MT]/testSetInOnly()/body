{
  MockEndpoint resultEndpoint=resolveMandatoryEndpoint("mock:result",MockEndpoint.class);
  resultEndpoint.expectedBodiesReceived("InOutMessage");
  sendMessage("direct:inOut",ExchangePattern.InOut,"InOutMessage");
  resultEndpoint.assertIsSatisfied();
  assertEquals("The exchange pattern should be InOnly",resultEndpoint.getExchanges().get(0).getPattern(),ExchangePattern.InOnly);
}
