{
  connection=mock(IRCConnection.class);
  endpoint=mock(IrcEndpoint.class);
  configuration=mock(IrcConfiguration.class);
  listener=mock(IRCEventAdapter.class);
  exchange=mock(Exchange.class);
  message=mock(Message.class);
  List<String> channels=new ArrayList<String>();
  List<String> keys=new ArrayList<String>();
  channels.add("chan1");
  channels.add("chan2");
  keys.add("");
  keys.add("chan2key");
  when(configuration.getChannels()).thenReturn(channels);
  when(endpoint.getConfiguration()).thenReturn(configuration);
  producer=new IrcProducer(endpoint,connection);
  producer.setListener(listener);
}
