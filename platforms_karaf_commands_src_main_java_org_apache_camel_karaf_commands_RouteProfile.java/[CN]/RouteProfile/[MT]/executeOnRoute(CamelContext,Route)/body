{
  JAXBContext context=JAXBContext.newInstance(RouteStatDump.class);
  Unmarshaller unmarshaller=context.createUnmarshaller();
  if (previousCamelContextName == null || !previousCamelContextName.equals(camelContext.getName())) {
    System.out.println("");
    System.out.println(StringEscapeUtils.unescapeJava("\u001B[1mProfile\u001B[0m"));
    System.out.println(StringEscapeUtils.unescapeJava("\tCamel Context: " + camelRoute.getRouteContext().getCamelContext().getName()));
    System.out.println(String.format(HEADER_FORMAT,"Id","Count","Last (ms)","Delta (ms)","Mean (ms)","Min (ms)","Max (ms)","Self (ms)"));
  }
  ManagementAgent agent=camelContext.getManagementStrategy().getManagementAgent();
  if (agent != null) {
    MBeanServer mBeanServer=agent.getMBeanServer();
    Set<ObjectName> set=mBeanServer.queryNames(new ObjectName(DefaultManagementAgent.DEFAULT_DOMAIN + ":type=routes,name=\"" + camelRoute.getId()+ "\",*"),null);
    for (    ObjectName routeMBean : set) {
      String camelId=(String)mBeanServer.getAttribute(routeMBean,"CamelId");
      if (camelId != null && camelId.equals(camelContext.getName())) {
        String xml=(String)mBeanServer.invoke(routeMBean,"dumpRouteStatsAsXml",new Object[]{Boolean.FALSE,Boolean.TRUE},new String[]{"boolean","boolean"});
        RouteStatDump route=(RouteStatDump)unmarshaller.unmarshal(new StringReader(xml));
        long count=route.getExchangesCompleted() + route.getExchangesFailed();
        System.out.println(String.format(OUTPUT_FORMAT,route.getId(),count,route.getLastProcessingTime(),route.getDeltaProcessingTime(),route.getMeanProcessingTime(),route.getMinProcessingTime(),route.getMaxProcessingTime(),""));
        for (        ProcessorStatDump ps : route.getProcessorStats()) {
          String selfTime="" + ps.getTotalProcessingTime();
          count=ps.getExchangesCompleted() + ps.getExchangesFailed();
          System.out.println(String.format(OUTPUT_FORMAT,"  " + ps.getId(),count,ps.getLastProcessingTime(),ps.getDeltaProcessingTime(),ps.getMeanProcessingTime(),ps.getMinProcessingTime(),ps.getMaxProcessingTime(),selfTime));
        }
      }
    }
  }
 else {
    System.out.println("");
    System.out.println(StringEscapeUtils.unescapeJava("\u001B[31mJMX Agent of Camel is not reachable. Maybe it has been disabled on the Camel context"));
    System.out.println(StringEscapeUtils.unescapeJava("In consequence, profile are not available.\u001B[0m"));
  }
  previousCamelContextName=camelContext.getName();
}
