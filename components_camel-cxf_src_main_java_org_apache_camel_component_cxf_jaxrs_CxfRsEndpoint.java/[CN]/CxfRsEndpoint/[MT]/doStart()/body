{
  if (headerFilterStrategy == null) {
    headerFilterStrategy=new CxfRsHeaderFilterStrategy();
  }
  if (bindingStyle == BindingStyle.Custom && binding == null) {
    throw new IllegalArgumentException("Custom binding style selected, but no binding was supplied");
  }
  if (binding != null) {
    bindingStyle=BindingStyle.Custom;
  }
  if (bindingStyle == BindingStyle.SimpleConsumer) {
    binding=new SimpleCxfRsBinding();
  }
 else   if (bindingStyle == BindingStyle.Custom) {
  }
 else {
    binding=new DefaultCxfRsBinding();
  }
  if (binding instanceof HeaderFilterStrategyAware) {
    ((HeaderFilterStrategyAware)binding).setHeaderFilterStrategy(getHeaderFilterStrategy());
  }
}
