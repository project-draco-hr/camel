{
  if (value.getClass() == RuntimeBeanReference.class) {
    String beanName=((RuntimeBeanReference)value).getBeanName();
    value=beanFactory.getBean(beanName);
  }
  if (value.getClass() == BuilderStatement.class) {
    BuilderStatement bs=(BuilderStatement)value;
    value=bs.create(beanFactory,rootBuilder);
  }
  if (value instanceof List) {
    List list=(List)value;
    for (int i=0, size=list.size(); i < size; i++) {
      list.set(i,replaceBeanReferences(beanFactory,rootBuilder,list.get(i)));
    }
  }
  return value;
}
