{
  if (components != null) {
    return;
  }
  LOG.debug("Initializing OsgiComponentResolver");
  components=new HashMap<String,ComponentEntry>();
  bundleContext.addBundleListener(new BundleListener());
  Bundle[] previousBundles=bundleContext.getBundles();
  for (int i=0; i < previousBundles.length; i++) {
    int state=previousBundles[i].getState();
    if (state == Bundle.RESOLVED || state == Bundle.ACTIVE) {
      mayBeAddComponentFor(previousBundles[i]);
    }
  }
}
