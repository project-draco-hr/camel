{
  CamelContext answer=getCamelContext();
  if (answer == null) {
    ActiveMQConnection connection=session.getConnection();
    if (connection instanceof CamelConnection) {
      CamelConnection camelConnection=(CamelConnection)connection;
      answer=camelConnection.getCamelContext();
    }
  }
  if (answer == null) {
    throw new IllegalArgumentException("No CamelContext has been configured");
  }
  return answer;
}
