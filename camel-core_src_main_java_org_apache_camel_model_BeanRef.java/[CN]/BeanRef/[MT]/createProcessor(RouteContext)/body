{
  if (bean == null) {
    String reference=getRef();
    if (reference != null) {
      bean=routeContext.lookup(reference,Object.class);
    }
 else {
      ObjectHelper.notNull(beanType,"bean, ref or beanType");
      bean=CamelContextHelper.newInstance(routeContext.getCamelContext(),beanType);
    }
  }
  BeanProcessor answer=new BeanProcessor(bean,routeContext.getCamelContext());
  if (method != null) {
    answer.setMethod(method);
  }
  return answer;
}
