{
  MockEndpoint mock=getMockEndpoint("mock:result");
  mock.expectedMessageCount(1);
  template.sendBody("direct:a","A");
  Executor executor=Executors.newSingleThreadExecutor();
  executor.execute(new Runnable(){
    public void run(){
      try {
        Thread.sleep(2000);
      }
 catch (      Exception e) {
      }
      template.sendBody("direct:a","B");
    }
  }
);
  assertMockEndpointsSatisfied();
}
