{
  RestApiProcessorFactory factory=null;
  Set<RestApiProcessorFactory> factories=getCamelContext().getRegistry().findByType(RestApiProcessorFactory.class);
  if (factories != null && factories.size() == 1) {
    factory=factories.iterator().next();
  }
  if (factory != null) {
    RestConfiguration config=getCamelContext().getRestConfiguration(componentName,true);
    String path=getPath();
    if (path != null && !path.startsWith("/")) {
      path="/" + path;
    }
    Processor processor=factory.createApiProcessor(getCamelContext(),path,config,getParameters());
    return new RestApiProducer(this,processor);
  }
 else {
    throw new IllegalStateException("Cannot find RestApiProcessorFactory in Registry");
  }
}
