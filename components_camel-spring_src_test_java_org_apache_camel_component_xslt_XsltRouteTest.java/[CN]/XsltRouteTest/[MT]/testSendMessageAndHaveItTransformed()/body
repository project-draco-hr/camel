{
  MockEndpoint endpoint=getMockEndpoint("mock:result");
  endpoint.expectedMessageCount(1);
  template.sendBody("direct:start","<mail><subject>Hey</subject><body>Hello world!</body></mail>");
  assertMockEndpointsSatisifed();
  List<Exchange> list=endpoint.getReceivedExchanges();
  Exchange exchange=list.get(0);
  String xml=exchange.getIn().getBody(String.class);
  log.debug("Found: " + xml);
  TestBean bean=getMandatoryBean(TestBean.class,"testBean");
  assertEquals("bean.subject","Hey",bean.getSubject());
  log.debug("Found bean subject: " + bean.getSubject());
}
