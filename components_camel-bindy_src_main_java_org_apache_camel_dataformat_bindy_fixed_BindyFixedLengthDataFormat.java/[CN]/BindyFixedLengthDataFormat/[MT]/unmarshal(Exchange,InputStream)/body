{
  BindyFixedLengthFactory factory=getFactory(exchange.getContext().getPackageScanClassResolver());
  ObjectHelper.notNull(factory,"not instantiated");
  List<Map<String,Object>> models=new ArrayList<Map<String,Object>>();
  Map<String,Object> model;
  InputStreamReader in=new InputStreamReader(inputStream);
  Scanner scanner=new Scanner(in);
  int count=0;
  try {
    while (scanner.hasNextLine()) {
      String line;
      if (factory.isTrimRecordOnUnmarshal()) {
        line=scanner.nextLine().trim();
      }
 else {
        line=scanner.nextLine();
      }
      if (ObjectHelper.isEmpty(line)) {
        continue;
      }
      count++;
      if ((line.length() < factory.recordLength()) || (line.length() > factory.recordLength())) {
        throw new java.lang.IllegalArgumentException("Size of the record : " + line.length() + " is not equal to the value provided in the model : "+ factory.recordLength()+ " !");
      }
      model=factory.factory();
      factory.bind(line,model,count);
      factory.link(model);
      models.add(model);
      if (LOG.isDebugEnabled()) {
        LOG.debug("Graph of objects created : " + model);
      }
    }
    if (models.size() == 0) {
      throw new java.lang.IllegalArgumentException("No records have been defined in the message !");
    }
 else {
      return models;
    }
  }
  finally {
    scanner.close();
    IOHelper.close(in,"in",LOG);
  }
}
