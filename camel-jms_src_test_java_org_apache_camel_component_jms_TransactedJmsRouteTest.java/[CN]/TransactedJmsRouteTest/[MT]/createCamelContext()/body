{
  spring=new ClassPathXmlApplicationContext("org/apache/camel/component/jms/spring.xml");
  SpringCamelContext ctx=SpringCamelContext.springCamelContext(spring);
  PlatformTransactionManager transactionManager=(PlatformTransactionManager)spring.getBean("jmsTransactionManager");
  ConnectionFactory connectionFactory=(ConnectionFactory)spring.getBean("jmsConnectionFactory");
  JmsComponent component=JmsComponent.jmsComponentTransacted(connectionFactory,transactionManager);
  component.getConfiguration().setConcurrentConsumers(1);
  ctx.addComponent("activemq",component);
  return ctx;
}
