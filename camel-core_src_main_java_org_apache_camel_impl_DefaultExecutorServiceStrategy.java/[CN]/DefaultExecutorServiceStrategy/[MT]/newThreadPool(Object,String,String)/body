{
  ThreadPoolProfile defaultProfile=getDefaultThreadPoolProfile();
  ThreadPoolProfile profile=getThreadPoolProfile(threadPoolProfileId);
  if (profile != null) {
    Integer poolSize=profile.getPoolSize() != null ? profile.getPoolSize() : defaultProfile.getPoolSize();
    Integer maxPoolSize=profile.getMaxPoolSize() != null ? profile.getMaxPoolSize() : defaultProfile.getMaxPoolSize();
    Long keepAliveTime=profile.getKeepAliveTime() != null ? profile.getKeepAliveTime() : defaultProfile.getKeepAliveTime();
    TimeUnit timeUnit=profile.getTimeUnit() != null ? profile.getTimeUnit() : defaultProfile.getTimeUnit();
    Integer maxQueueSize=profile.getMaxQueueSize() != null ? profile.getMaxQueueSize() : defaultProfile.getMaxQueueSize();
    RejectedExecutionHandler handler=profile.getRejectedExecutionHandler() != null ? profile.getRejectedExecutionHandler() : defaultProfile.getRejectedExecutionHandler();
    return newThreadPool(source,name,poolSize,maxPoolSize,keepAliveTime,timeUnit,maxQueueSize,handler,false);
  }
 else {
    return null;
  }
}
