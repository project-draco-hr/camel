{
  ScheduledExecutorService answer=camelContext.getRegistry().lookup(executorServiceRef,ScheduledExecutorService.class);
  if (answer != null) {
    LOG.debug("Looking up ScheduledExecutorService with ref: {} and found it from Registry: {}",executorServiceRef,answer);
  }
  if (answer == null) {
    ThreadPoolProfile profile=getThreadPoolProfile(executorServiceRef);
    if (profile != null) {
      Integer poolSize=profile.getPoolSize();
      if (poolSize == null) {
        poolSize=getDefaultThreadPoolProfile().getPoolSize();
      }
      answer=newScheduledThreadPool(source,name,poolSize);
      if (answer != null) {
        LOG.debug("Looking up ScheduledExecutorService with ref: {} and found a matching ThreadPoolProfile to create the ScheduledExecutorService: {}",executorServiceRef,answer);
      }
    }
  }
  return answer;
}
