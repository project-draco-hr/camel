{
  Object correlationKey=correlationExpression.evaluate(exchange);
  Exchange oldExchange=map.get(correlationKey);
  Exchange newExchange=exchange;
  if (oldExchange != null) {
    newExchange=aggregationStrategy.aggregate(oldExchange,newExchange);
  }
  if (newExchange != oldExchange) {
    map.put(correlationKey,newExchange);
    onAggregation(correlationKey,newExchange);
  }
  return true;
}
