{
  if (isLockFile()) {
    File newFile=lockFileRenamer.renameFile(exchange,file);
    String lockFileName=newFile.getAbsolutePath();
    if (LOG.isDebugEnabled()) {
      LOG.debug("Locking the file: " + file + " using the lock file name: "+ lockFileName);
    }
    FileChannel channel=new RandomAccessFile(lockFileName,"rw").getChannel();
    FileLock lock=channel.lock();
    if (lock != null) {
      exchange.setProperty("org.apache.camel.file.lock",lock);
      exchange.setProperty("org.apache.camel.file.lock.name",lockFileName);
      return true;
    }
 else {
      return false;
    }
  }
  return true;
}
