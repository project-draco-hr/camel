{
  Object key=node;
  if (node instanceof FromType) {
    FromType fromType=(FromType)node;
    key=fromType.getUriOrRef();
  }
 else   if (node instanceof ToType) {
    ToType toType=(ToType)node;
    key=toType.getUriOrRef();
  }
  NodeData answer=nodeMap.get(key);
  if (answer == null) {
    answer=new NodeData();
    answer.id="node" + (nodeMap.size() + 1);
    configureNodeData(node,answer);
    nodeMap.put(key,answer);
  }
  return answer;
}
