{
  ByteArrayOutputStream bos=new ByteArrayOutputStream();
  try {
    StreamResult sr=new StreamResult(bos);
    Transformer trans=TransformerFactory.newInstance().newTransformer();
    if (props == null) {
      props=new Properties();
      props.put(OutputKeys.OMIT_XML_DECLARATION,"yes");
    }
    trans.setOutputProperties(props);
    trans.transform(source,sr);
  }
  finally {
    bos.close();
  }
  return bos.toString();
}
