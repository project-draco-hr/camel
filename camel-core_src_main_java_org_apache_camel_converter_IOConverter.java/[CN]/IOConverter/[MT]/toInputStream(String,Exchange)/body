{
  if (exchange != null) {
    String charsetName=exchange.getProperty(Exchange.CHARSET_NAME,String.class);
    if (charsetName != null) {
      try {
        return toInputStream(text.getBytes(charsetName));
      }
 catch (      UnsupportedEncodingException e) {
        LOG.warn("Cannot convert the String into byte[] with the charset: " + charsetName,e);
      }
    }
  }
  return toInputStream(text.getBytes());
}
