{
  if (charset != null) {
    final BufferedReader reader=toReader(file,charset);
    return new InputStream(){
      @Override public int read() throws IOException {
        return reader.read();
      }
      @Override public void close() throws IOException {
        reader.close();
      }
      @Override public void reset() throws IOException {
        reader.reset();
      }
    }
;
  }
 else {
    return IOHelper.buffered(new FileInputStream(file));
  }
}
