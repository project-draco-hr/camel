{
  Exchange exchange=template.send(endpoint,new Processor(){
    public void process(    Exchange exchange) throws Exception {
      exchange.setPattern(ExchangePattern.InOut);
      Message inMessage=exchange.getIn();
      inMessage.setHeader(CxfConstants.OPERATION_NAME,"echo");
      inMessage.setHeader(Exchange.HTTP_METHOD,"POST");
      inMessage.setHeader(Exchange.HTTP_PATH,"/echoservice/echo");
      inMessage.setHeader(CxfConstants.CAMEL_CXF_RS_USING_HTTP_API,httpApi);
      inMessage.setHeader(CxfConstants.CAMEL_CXF_RS_RESPONSE_CLASS,String.class);
      inMessage.setHeader(Exchange.ACCEPT_CONTENT_TYPE,"application/json");
      inMessage.setBody(body);
    }
  }
);
  return exchange;
}
