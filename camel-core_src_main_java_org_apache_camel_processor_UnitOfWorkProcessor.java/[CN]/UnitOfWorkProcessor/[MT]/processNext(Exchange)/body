{
  if (exchange.getUnitOfWork() == null) {
    final DefaultUnitOfWork uow=new DefaultUnitOfWork(exchange);
    exchange.setUnitOfWork(uow);
    try {
      uow.start();
    }
 catch (    Exception e) {
      throw wrapRuntimeCamelException(e);
    }
    try {
      processor.process(exchange);
    }
 catch (    Exception e) {
      exchange.setException(e);
    }
    exchange.getUnitOfWork().done(exchange);
    try {
      uow.stop();
    }
 catch (    Exception e) {
      throw wrapRuntimeCamelException(e);
    }
    exchange.setUnitOfWork(null);
  }
 else {
    processor.process(exchange);
  }
}
