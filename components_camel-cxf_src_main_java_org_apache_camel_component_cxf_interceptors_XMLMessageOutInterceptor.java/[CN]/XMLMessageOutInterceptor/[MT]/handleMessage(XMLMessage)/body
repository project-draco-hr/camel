{
  Exchange exchange=message.getExchange();
  BindingMessageInfo bmi=exchange.get(BindingMessageInfo.class);
  List<Element> payload=message.get(List.class);
  if (bmi == null && payload.size() > 1) {
    throw new Fault(new org.apache.cxf.common.i18n.Message("NO_XML_ROOT_NODE",LOG));
  }
  if (bmi != null) {
    Element header=message.get(Element.class);
    if (header != null) {
      if (LOG.isLoggable(Level.INFO)) {
        LOG.info("DOMOutInterceptor Copy Message Part related Headers to Payload.");
      }
      moveHeaderPartToPayload(bmi,header,payload);
    }
    XMLBindingMessageFormat msgFormat=bmi.getExtensor(XMLBindingMessageFormat.class);
    QName rootName=msgFormat != null ? msgFormat.getRootNode() : null;
    if (rootName == null) {
      if (payload.size() > 1) {
        throw new Fault(new org.apache.cxf.common.i18n.Message("NO_XML_ROOT_NODE",LOG));
      }
    }
 else {
      if (LOG.isLoggable(Level.INFO)) {
        LOG.info("DOMOutInterceptor Create xmlformat RootNode element");
      }
      Element el=createElement(rootName,payload);
      payload=new ArrayList<Element>();
      payload.add(el);
    }
    message.put(List.class,payload);
    message.remove(Element.class);
  }
}
