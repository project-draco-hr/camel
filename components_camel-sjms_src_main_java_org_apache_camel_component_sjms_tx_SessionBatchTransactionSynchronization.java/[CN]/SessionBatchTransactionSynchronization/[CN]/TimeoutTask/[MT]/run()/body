{
  LOG.debug("Batch Transaction Timer expired");
  try {
    lock.writeLock().lock();
    LOG.trace("Committing the current transactions");
    try {
      if (session != null && session.getTransacted()) {
        session.commit();
      }
      ((BatchTransactionCommitStrategy)commitStrategy).reset();
    }
 catch (    Exception e) {
      LOG.warn("Failed to commit the session during timeout: " + e.getMessage() + ". This exception will be ignored.",e);
    }
  }
  finally {
    lock.writeLock().unlock();
  }
}
