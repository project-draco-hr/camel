{
  log.info("Batch Transaction Timer expired:");
  try {
    lock.writeLock().lock();
    log.debug("Committing the current transactions");
    try {
      if (session != null && session.getTransacted()) {
        session.commit();
      }
      ((BatchTransactionCommitStrategy)commitStrategy).reset();
    }
 catch (    Exception e) {
      log.warn("Failed to commit the session during timeout: {}",e.getMessage());
    }
  }
  finally {
    lock.writeLock().unlock();
  }
}
