{
  MockEndpoint header=getMockEndpoint("mock:header");
  header.expectedBodiesReceived("HEADER:foo");
  header.expectedFileExists("./target/multicast/out/header.txt");
  MockEndpoint footer=getMockEndpoint("mock:footer");
  footer.expectedBodiesReceived("FOOTER:foo");
  footer.expectedFileExists("./target/multicast/out/footer.txt");
  MockEndpoint end=getMockEndpoint("mock:end");
  end.expectedMessageCount(1);
  end.expectedFileExists("./target/multicast/.camel/foo.txt");
  template.sendBodyAndHeader("file://target/multicast","foo",Exchange.FILE_NAME,"foo.txt");
  assertMockEndpointsSatisfied();
}
