{
  if (delay != null) {
    long ms=ObjectConverter.toLong(delay);
    delay(ms);
  }
  if ("out".equals(uri)) {
    outputStream=System.out;
  }
 else   if ("err".equals(uri)) {
    outputStream=System.err;
  }
 else   if ("file".equals(uri)) {
    outputStream=resolveStreamFromFile();
  }
 else   if ("header".equals(uri)) {
    outputStream=resolveStreamFromHeader(exchange.getIn().getHeader("stream"));
  }
 else   if ("url".equals(uri)) {
    outputStream=resolveStreamFromUrl();
  }
  writeToStream(exchange);
}
