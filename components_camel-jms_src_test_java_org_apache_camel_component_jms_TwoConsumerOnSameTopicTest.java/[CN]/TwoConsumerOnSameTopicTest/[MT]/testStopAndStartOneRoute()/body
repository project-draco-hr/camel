{
  Thread.sleep(500);
  getMockEndpoint("mock:a").expectedBodiesReceived("Hello World");
  getMockEndpoint("mock:b").expectedBodiesReceived("Hello World");
  template.sendBody("activemq:topic:foo","Hello World");
  assertMockEndpointsSatisfied();
  context.stopRoute("a");
  resetMocks();
  getMockEndpoint("mock:a").expectedMessageCount(0);
  getMockEndpoint("mock:b").expectedBodiesReceived("Bye World");
  template.sendBody("activemq:topic:foo","Bye World");
  assertMockEndpointsSatisfied();
  resetMocks();
  getMockEndpoint("mock:a").expectedBodiesReceived("Hi Camel");
  getMockEndpoint("mock:b").expectedBodiesReceived("Hi Camel");
  context.startRoute("a");
  template.sendBody("activemq:topic:foo","Hi Camel");
  assertMockEndpointsSatisfied();
}
