{
  TelegramService service=mockTelegramService();
  Exchange ex=endpoint.createExchange();
  ex.getIn().setHeader(TelegramConstants.TELEGRAM_MEDIA_TITLE_CAPTION,"Photo");
  ex.getIn().setHeader(TelegramConstants.TELEGRAM_MEDIA_TYPE,TelegramMediaType.PHOTO_PNG.name());
  byte[] image=TelegramTestUtil.createSampleImage("PNG");
  ex.getIn().setBody(image);
  context().createProducerTemplate().send(endpoint,ex);
  ArgumentCaptor<OutgoingPhotoMessage> captor=ArgumentCaptor.forClass(OutgoingPhotoMessage.class);
  Mockito.verify(service).sendMessage(eq("mock-token"),captor.capture());
  assertEquals("my-id",captor.getValue().getChatId());
  assertEquals(image,captor.getValue().getPhoto());
  assertEquals("photo.png",captor.getValue().getFilenameWithExtension());
  assertEquals("Photo",captor.getValue().getCaption());
}
