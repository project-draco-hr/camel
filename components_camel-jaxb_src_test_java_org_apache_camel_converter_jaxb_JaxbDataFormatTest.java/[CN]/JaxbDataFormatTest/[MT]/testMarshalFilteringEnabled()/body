{
  JaxbDataFormat jaxbDataFormatMock=createMockBuilder(JaxbDataFormat.class).addMockedMethod("needFiltering").createStrictMock();
  Object graph=new Object();
  OutputStream stream=new ByteArrayOutputStream();
  expect(jaxbDataFormatMock.needFiltering(exchangeMock)).andReturn(true);
  marshallerMock.marshal(same(graph),isA(FilteringXmlStreamWriter.class));
  replayAll();
  jaxbDataFormatMock.marshal(exchangeMock,graph,stream,marshallerMock);
  verifyAll();
}
