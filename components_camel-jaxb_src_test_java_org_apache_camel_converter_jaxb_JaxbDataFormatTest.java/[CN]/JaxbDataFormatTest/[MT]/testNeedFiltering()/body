{
  expect(exchangeMock.getProperty(Exchange.FILTER_NON_XML_CHARS,false,Boolean.class)).andReturn(false);
  replayAll();
  assertFalse("Not expected filtering here",jaxbDataFormat.needFiltering(exchangeMock));
  verifyAll();
  resetAll();
  expect(exchangeMock.getProperty(Exchange.FILTER_NON_XML_CHARS,false,Boolean.class)).andReturn(true);
  replayAll();
  assertTrue("Expected filtering here",jaxbDataFormat.needFiltering(exchangeMock));
  verifyAll();
  resetAll();
  jaxbDataFormat.setFilterNonXmlChars(true);
  expect(exchangeMock.getProperty(Exchange.FILTER_NON_XML_CHARS,true,Boolean.class)).andReturn(false);
  replayAll();
  assertFalse("Not expected filtering here",jaxbDataFormat.needFiltering(exchangeMock));
  verifyAll();
  resetAll();
  expect(exchangeMock.getProperty(Exchange.FILTER_NON_XML_CHARS,true,Boolean.class)).andReturn(true);
  replayAll();
  assertTrue("Expected filtering here",jaxbDataFormat.needFiltering(exchangeMock));
  verifyAll();
  resetAll();
}
