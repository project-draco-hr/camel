{
  resultEndpoint.expectedMessageCount(1);
  template.sendBody("direct:inject","hello");
  assertMockEndpointsSatisfied();
  Exchange exchange=resultEndpoint.getExchanges().get(0);
  List<Item> results=(List<Item>)exchange.getIn().getBody();
  Object[] items=(Object[])results.toArray();
  Object[] itemsExpected=(Object[])itemsExpected().toArray();
  for (int i=0; i < items.length; ++i) {
    Item itemExpected=(Item)items[i];
    Item itemReceived=(Item)itemsExpected[i];
    assertEquals(itemExpected.getName(),itemReceived.getName());
    assertEquals(itemExpected.getPrice(),itemReceived.getPrice());
  }
  assertNotNull(results);
}
