{
  resultEndpoint.expectedMessageCount(1);
  template.sendBody("direct:inject","hello");
  assertMockEndpointsSatisfied();
  Exchange exchange=resultEndpoint.getExchanges().get(0);
  List<?> results=exchange.getIn().getBody(List.class);
  ArrayList<Item> expected=itemsExpected();
  assertNotNull(results);
  assertNotNull(expected);
  assertEquals(expected.size(),results.size());
  Object[] items=results.toArray();
  Object[] itemsExpected=itemsExpected().toArray();
  for (int i=0; i < items.length; ++i) {
    assertTrue(itemsExpected[i] != null && (itemsExpected[i] instanceof Item));
    assertTrue(items[i] != null && (items[i] instanceof Item));
    Item itemExpected=(Item)itemsExpected[i];
    Item itemReceived=(Item)items[i];
    assertEquals(itemExpected.getName(),itemReceived.getName());
    assertEquals(itemExpected.getPrice(),itemReceived.getPrice());
  }
  assertNotNull(results);
}
