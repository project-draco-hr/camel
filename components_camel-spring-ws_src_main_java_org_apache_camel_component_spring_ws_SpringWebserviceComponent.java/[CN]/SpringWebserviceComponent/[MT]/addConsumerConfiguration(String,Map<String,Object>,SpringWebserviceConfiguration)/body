{
  EndpointMappingType type=EndpointMappingType.getTypeFromUriPrefix(remaining);
  if (type != null) {
    LOG.debug("Building Spring Web Services consumer of type " + type);
    String lookupKey=getLookupKey(remaining,type);
    if (EndpointMappingType.BEANNAME.equals(type)) {
      addEndpointDispatcherToConfiguration(configuration,lookupKey);
    }
 else {
      addEndpointMappingToConfiguration(parameters,configuration);
    }
    if (EndpointMappingType.XPATHRESULT.equals(type)) {
      XPathExpression expression=getXPathExpressionFromParameters(parameters);
      configuration.setEndpointMappingKey(new EndpointMappingKey(type,lookupKey,expression));
    }
 else {
      configuration.setEndpointMappingKey(new EndpointMappingKey(type,lookupKey,null));
    }
  }
}
