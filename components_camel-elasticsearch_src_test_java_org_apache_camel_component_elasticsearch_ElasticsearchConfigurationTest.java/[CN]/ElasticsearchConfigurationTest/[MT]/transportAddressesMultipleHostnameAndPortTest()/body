{
  URI uri=new URI("elasticsearch://local?operation=INDEX&indexName=twitter&" + "indexType=tweet&transportAddresses=127.0.0.1:9400,127.0.0.2,127.0.0.3:9401");
  Map<String,Object> parameters=URISupport.parseParameters(uri);
  ElasticsearchConfiguration conf=new ElasticsearchConfiguration(uri,parameters);
  assertDefaultConfigurationParameters(conf);
  assertEquals(3,conf.getTransportAddresses().size());
  assertEquals("127.0.0.1",conf.getTransportAddresses().get(0).address().getHostString());
  assertEquals(9400,conf.getTransportAddresses().get(0).address().getPort());
  assertEquals("127.0.0.2",conf.getTransportAddresses().get(1).address().getHostString());
  assertEquals(9300,conf.getTransportAddresses().get(1).address().getPort());
  assertEquals("127.0.0.3",conf.getTransportAddresses().get(2).address().getHostString());
  assertEquals(9401,conf.getTransportAddresses().get(2).address().getPort());
}
