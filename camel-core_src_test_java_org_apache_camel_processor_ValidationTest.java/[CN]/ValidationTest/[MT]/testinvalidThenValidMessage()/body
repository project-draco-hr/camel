{
  validEndpoint.expectedMessageCount(2);
  invalidEndpoint.expectedMessageCount(1);
  template.sendBodyAndHeader("direct:start","<invalid/>","foo","notMatchedHeaderValue");
  template.sendBodyAndHeader("direct:start","<valid/>","foo","bar");
  template.sendBodyAndHeader("direct:start","<valid/>","foo","bar");
  MockEndpoint.assertIsSatisfied(validEndpoint,invalidEndpoint);
}
