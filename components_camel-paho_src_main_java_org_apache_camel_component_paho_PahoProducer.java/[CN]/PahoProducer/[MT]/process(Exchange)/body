{
  MqttClient client=getEndpoint().getClient();
  String topic=getEndpoint().getTopic();
  int qos=retrieveQos(exchange);
  boolean retained=retrieveRetained(exchange);
  byte[] payload=exchange.getIn().getBody(byte[].class);
  MqttMessage message=new MqttMessage(payload);
  message.setQos(qos);
  message.setRetained(retained);
  client.publish(topic,message);
}
