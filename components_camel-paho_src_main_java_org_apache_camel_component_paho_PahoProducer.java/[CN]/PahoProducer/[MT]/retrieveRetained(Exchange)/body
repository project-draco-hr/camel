{
  if (exchange.getIn().getHeaders().containsKey(PahoConstants.CAMEL_PAHO_MSG_RETAINED)) {
    return exchange.getIn().getHeader(PahoConstants.CAMEL_PAHO_MSG_RETAINED,Boolean.class);
  }
 else {
    return getEndpoint().isRetained();
  }
}
