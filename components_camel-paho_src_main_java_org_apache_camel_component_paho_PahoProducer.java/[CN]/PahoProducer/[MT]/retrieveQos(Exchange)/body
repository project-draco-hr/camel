{
  if (exchange.getIn().getHeaders().containsKey(PahoConstants.CAMEL_PAHO_MSG_QOS)) {
    return exchange.getIn().getHeader(PahoConstants.CAMEL_PAHO_MSG_QOS,Integer.class);
  }
 else {
    return getEndpoint().getQos();
  }
}
