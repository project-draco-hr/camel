{
  if (log.isDebugEnabled()) {
    log.debug("Completion timeout triggered for correlation key: " + key);
  }
  try {
    lock.lock();
    boolean inProgress=inProgressCompleteExchanges.contains(exchangeId);
    if (inProgress) {
      if (LOG.isTraceEnabled()) {
        LOG.trace("Aggregated exchange with id: " + exchangeId + " is already in progress.");
      }
      return;
    }
    Exchange answer=aggregationRepository.get(camelContext,key);
    answer.setProperty(Exchange.AGGREGATED_COMPLETED_BY,"timeout");
    onCompletion(key,answer,true);
  }
  finally {
    lock.unlock();
  }
}
