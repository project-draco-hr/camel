{
  MockEndpoint mockEndpoint=resolveMandatoryEndpoint("mock:results",MockEndpoint.class);
  mockEndpoint.expectedMessageCount(1);
  JettyHttpEndpoint endpoint=context.getEndpoint(jettyUri,JettyHttpEndpoint.class);
  ((DefaultHeaderFilterStrategy)endpoint.getHeaderFilterStrategy()).setOutFilter(null);
  InputStream answer=(InputStream)template.requestBody(uri,inputText);
  verifyMockGotExpectedText(mockEndpoint,expectedText);
  String lastLine=readLastLine(answer);
  assertNotNull("last response line",lastLine);
  assertEquals("response matches: " + inputText,inputText,lastLine);
}
