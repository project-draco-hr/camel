{
  DefaultTypeConverter answer=new DefaultTypeConverter(context.getPackageScanClassResolver(),context.getInjector(),context.getDefaultFactoryFinder());
  List<TypeConverterLoader> typeConverterLoaders=answer.getTypeConverterLoaders();
  TypeConverterLoader atLoader=null;
  for (  TypeConverterLoader loader : typeConverterLoaders) {
    if (loader instanceof AnnotationTypeConverterLoader) {
      atLoader=loader;
      break;
    }
  }
  if (atLoader != null) {
    typeConverterLoaders.remove(atLoader);
  }
  typeConverterLoaders.add(new OsgiAnnotationTypeConverterLoader(context.getPackageScanClassResolver()));
  context.setTypeConverterRegistry(answer);
  return answer;
}
