{
  if (defaultInstance == null) {
    if (instanceClassName == null) {
      throw new CamelException("There is not defaultInstance for protobuf unmarshaling");
    }
 else {
synchronized (this) {
        if (defaultInstance == null) {
          defaultInstance=loadDefaultInstance(instanceClassName,exchange.getContext());
        }
      }
    }
  }
  Builder builder=this.defaultInstance.newBuilderForType().mergeFrom(inputStream);
  if (!builder.isInitialized()) {
    throw new InvalidPayloadException(exchange,this.defaultInstance.getClass());
  }
  return builder.build();
}
