{
  if (this.defaultInstance == null) {
    if (instanceClassName == null) {
      throw new CamelException("There is not defaultInstance for protobuf unmarshaling");
    }
 else {
      if (!setDefaultInstanceHasBeenCalled.getAndSet(true)) {
        defaultInstance=loadDefaultInstance(instanceClassName,exchange.getContext());
      }
    }
  }
  Builder builder=this.defaultInstance.newBuilderForType().mergeFrom(inputStream);
  if (!builder.isInitialized()) {
    throw new InvalidPayloadException(exchange,this.defaultInstance.getClass());
  }
  return builder.build();
}
