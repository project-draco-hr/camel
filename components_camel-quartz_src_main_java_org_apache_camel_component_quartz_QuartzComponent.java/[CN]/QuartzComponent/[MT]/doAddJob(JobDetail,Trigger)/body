{
  JOBS.incrementAndGet();
  Trigger existingTrigger=getScheduler().getTrigger(trigger.getName(),trigger.getGroup());
  if (existingTrigger == null) {
    if (LOG.isDebugEnabled()) {
      LOG.debug("Adding job using trigger: " + trigger.getGroup() + "/"+ trigger.getName());
    }
    getScheduler().scheduleJob(job,trigger);
  }
 else   if (hasTriggerChanged(existingTrigger,trigger)) {
    if (LOG.isDebugEnabled()) {
      LOG.debug("Trigger: " + trigger.getGroup() + "/"+ trigger.getName()+ " already exists and will be updated by Quartz.");
    }
    scheduler.addJob(job,true);
    trigger.setJobName(job.getName());
    scheduler.rescheduleJob(trigger.getName(),trigger.getGroup(),trigger);
  }
 else {
    if (LOG.isDebugEnabled()) {
      LOG.debug("Trigger: " + trigger.getGroup() + "/"+ trigger.getName()+ " already exists and will be resumed automatically by Quartz.");
    }
    if (!isClustered()) {
      scheduler.resumeTrigger(trigger.getName(),trigger.getGroup());
    }
  }
}
