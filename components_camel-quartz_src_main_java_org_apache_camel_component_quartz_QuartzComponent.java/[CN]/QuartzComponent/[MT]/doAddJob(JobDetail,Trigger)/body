{
  jobs.incrementAndGet();
  Trigger existingTrigger=getScheduler().getTrigger(trigger.getName(),trigger.getGroup());
  if (existingTrigger == null) {
    LOG.debug("Adding job using trigger: {}/{}",trigger.getGroup(),trigger.getName());
    getScheduler().scheduleJob(job,trigger);
  }
 else   if (hasTriggerChanged(existingTrigger,trigger)) {
    LOG.debug("Trigger: {}/{} already exists and will be updated by Quartz.",trigger.getGroup(),trigger.getName());
    scheduler.addJob(job,true);
    trigger.setJobName(job.getName());
    scheduler.rescheduleJob(trigger.getName(),trigger.getGroup(),trigger);
  }
 else {
    LOG.debug("Trigger: {}/{} already exists and will be resumed automatically by Quartz.",trigger.getGroup(),trigger.getName());
    if (!isClustered()) {
      scheduler.resumeTrigger(trigger.getName(),trigger.getGroup());
    }
  }
}
