{
  super.doStop();
  if (scheduler != null) {
    AtomicInteger number=(AtomicInteger)scheduler.getContext().get("CamelJobs");
    if (number != null && number.get() > 0) {
      LOG.info("Cannot shutdown Quartz scheduler: " + scheduler.getSchedulerName() + " as there are still "+ number.get()+ " jobs registered.");
    }
 else {
      LOG.info("There are no more jobs registered, so shutting down Quartz scheduler: " + scheduler.getSchedulerName());
      scheduler.shutdown();
      scheduler=null;
    }
  }
}
