{
  HystrixCommand.Setter setter=HystrixCommand.Setter.withGroupKey(HystrixCommandGroupKey.Factory.asKey(exchange.getIn().getHeader(HystrixConstants.CAMEL_HYSTRIX_GROUP_KEY,configuration.getGroupKey(),String.class)));
  setCommandPropertiesDefaults(setter,exchange);
  setThreadPoolPropertiesDefaults(setter,exchange);
  CamelHystrixCommand camelHystrixCommand=new CamelHystrixCommand(setter,exchange,getCacheKey(exchange),exchange.getIn().getHeader(HystrixConstants.CAMEL_HYSTRIX_RUN_ENDPOINT_ID,configuration.getRunEndpointId(),String.class),exchange.getIn().getHeader(HystrixConstants.CAMEL_HYSTRIX_FALLBACK_ENDPOINT_ID,configuration.getFallbackEndpointId(),String.class));
  checkRequestContextPresent(exchange);
  clearCache(camelHystrixCommand.getCommandKey(),exchange);
  camelHystrixCommand.execute();
  populateWithMetrics(exchange,camelHystrixCommand);
}
