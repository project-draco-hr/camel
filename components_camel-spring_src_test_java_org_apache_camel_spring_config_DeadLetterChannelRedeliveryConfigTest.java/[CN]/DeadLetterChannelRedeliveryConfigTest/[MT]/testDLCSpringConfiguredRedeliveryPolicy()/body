{
  MockEndpoint dead=context.getEndpoint("mock:dead",MockEndpoint.class);
  MockEndpoint result=context.getEndpoint("mock:result",MockEndpoint.class);
  dead.expectedBodiesReceived("Hello World");
  dead.message(0).header(Exchange.REDELIVERED).isEqualTo(Boolean.TRUE);
  dead.message(0).header(Exchange.REDELIVERY_COUNTER).isEqualTo(3);
  result.expectedMessageCount(0);
  try {
    template.sendBody("direct:in","Hello World");
  }
 catch (  Exception e) {
  }
  result.assertIsSatisfied();
  dead.assertIsSatisfied();
}
