{
  Endpoint endpoint=camelContext.getEndpoint("stub:dummy");
  return new DefaultProducer(endpoint){
    @Override public void process(    Exchange exchange) throws Exception {
      if (uriTemplate.contains("{name}")) {
        int pos=resolvedUriTemplate.lastIndexOf('/');
        String name=resolvedUriTemplate.substring(pos + 1);
        exchange.getIn().setBody("Hello " + name);
      }
 else       if (queryParameters.contains("name=")) {
        String name=ObjectHelper.after(queryParameters,"name=");
        exchange.getIn().setBody("Bye " + name);
      }
    }
  }
;
}
