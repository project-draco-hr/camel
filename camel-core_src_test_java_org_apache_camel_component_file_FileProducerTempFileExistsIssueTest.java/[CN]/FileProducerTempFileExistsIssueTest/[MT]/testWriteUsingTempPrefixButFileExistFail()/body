{
  template.sendBodyAndHeader("file://target/tempprefix","Hello World",Exchange.FILE_NAME,"hello.txt");
  try {
    template.sendBodyAndHeader("file://target/tempprefix?tempPrefix=foo&fileExist=Fail","Bye World",Exchange.FILE_NAME,"hello.txt");
    fail("Should have thrown an exception");
  }
 catch (  CamelExecutionException e) {
    GenericFileOperationFailedException cause=assertIsInstanceOf(GenericFileOperationFailedException.class,e.getCause());
    assertTrue(cause.getMessage().startsWith("File already exist"));
  }
  File file=new File("target/tempprefix/hello.txt").getAbsoluteFile();
  assertEquals(true,file.exists());
  assertEquals("Hello World",context.getTypeConverter().convertTo(String.class,file));
}
