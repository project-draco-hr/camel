{
  XPathExpression xpath=XPathFactory.newInstance().newXPath().compile("//text()[normalize-space(.) = '']");
  NodeList emptyNodes=(NodeList)xpath.evaluate(pom,XPathConstants.NODESET);
  for (int i=0; i < emptyNodes.getLength(); i++) {
    Node emptyNode=emptyNodes.item(i);
    emptyNode.getParentNode().removeChild(emptyNode);
  }
  Transformer transformer=TransformerFactory.newInstance().newTransformer();
  transformer.setOutputProperty(OutputKeys.INDENT,"yes");
  transformer.setOutputProperty(OutputKeys.METHOD,"xml");
  transformer.setOutputProperty("{http://xml.apache.org/xslt}indent-amount","2");
  DOMSource source=new DOMSource(pom);
  targetPom.getParentFile().mkdirs();
  String content;
  try (StringWriter out=new StringWriter()){
    StreamResult result=new StreamResult(out);
    transformer.transform(source,result);
    content=out.toString();
  }
   content=content.replaceFirst("-->","-->\n");
  writeFileIfChanged(content,targetPom);
}
