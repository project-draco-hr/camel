{
  super(endpoint,processor);
  this.endpoint=endpoint;
  this.method=findMethod();
  final HashMap<String,Object> properties=new HashMap<String,Object>();
  FacebookPropertiesHelper.getEndpointProperties(endpoint.getConfiguration(),properties);
  final Reading reading=(Reading)properties.get(READING_PROPERTY);
  if (reading != null) {
    final String queryString=reading.toString();
    if (queryString.contains(SINCE_PREFIX)) {
      final int startIndex=queryString.indexOf(SINCE_PREFIX) + SINCE_PREFIX.length();
      int endIndex=queryString.indexOf('&',startIndex);
      if (endIndex == -1) {
        endIndex=queryString.length() - 1;
      }
      final String strSince=queryString.substring(startIndex,endIndex);
      try {
        this.sinceTime=URLDecoder.decode(strSince,"UTF-8");
      }
 catch (      UnsupportedEncodingException e) {
        throw new RuntimeCamelException(String.format("Error decoding %s.since with value %s due to: %s",READING_PREFIX,strSince,e.getMessage()),e);
      }
      LOG.debug("Using supplied property {}since value {}",READING_PREFIX,this.sinceTime);
    }
    if (queryString.contains("until=")) {
      LOG.debug("Overriding configured property {}until",READING_PREFIX);
    }
  }
  this.endpointProperties=Collections.unmodifiableMap(properties);
}
