{
  String body=ExchangeHelper.convertToMandatoryType(exchange,String.class,inputStream);
  Message message=HL7Converter.parse(body,parser);
  Terser terser=new Terser(message);
  for (  Map.Entry<String,String> entry : HEADER_MAP.entrySet()) {
    exchange.getOut().setHeader(entry.getKey(),terser.get(entry.getValue()));
  }
  exchange.getOut().setHeader(HL7_CONTEXT,hapiContext);
  return message;
}
