{
  System.out.println("Notice this client requires that the CamelServer is already running!");
  ApplicationContext context=new ClassPathXmlApplicationContext("META-INF/spring/camel-client.xml");
  final ProducerTemplate producer=(ProducerTemplate)context.getBean("camelTemplate");
  final MockEndpoint mock=(MockEndpoint)context.getBean("result");
  mock.expectedMessageCount(SIZE);
  mock.expectsNoDuplicates().body();
  mock.allMessages().body().startsWith("Bye Message");
  System.out.println("Sending ...");
  for (int i=0; i < SIZE; i++) {
    producer.sendBody("direct:start","Message " + i);
  }
  System.out.println("... Send done");
  System.out.println("Asserting ...");
  mock.assertIsSatisfied();
  System.out.println("... Asserting done");
  System.exit(0);
}
