{
  if (LOG.isDebugEnabled()) {
    LOG.debug("Received XMPP message for " + endpoint.getUser() + " from "+ endpoint.getParticipant()+ " : "+ message.getBody());
  }
  Exchange exchange=endpoint.createExchange(message);
  try {
    getProcessor().process(exchange);
  }
 catch (  Exception e) {
    exchange.setException(e);
  }
}
