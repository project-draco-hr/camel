{
  Message message=(Message)packet;
  if (LOG.isDebugEnabled()) {
    LOG.debug("Recieved XMPP message: " + message.getBody());
  }
  XmppExchange exchange=endpoint.createExchange(message);
  try {
    getProcessor().process(exchange);
    if (muc != null) {
      muc.nextMessage();
    }
  }
 catch (  Exception e) {
    LOG.error("Error while processing XMPP message",e);
  }
}
