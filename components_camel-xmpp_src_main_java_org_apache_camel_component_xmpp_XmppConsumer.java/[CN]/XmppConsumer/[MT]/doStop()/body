{
  super.doStop();
  if (muc != null) {
    LOG.info("Leaving room: {}",muc.getRoom());
    muc.removeMessageListener(this);
    muc.leave();
    muc=null;
  }
  if (connection != null && connection.isConnected()) {
    connection.disconnect();
  }
}
