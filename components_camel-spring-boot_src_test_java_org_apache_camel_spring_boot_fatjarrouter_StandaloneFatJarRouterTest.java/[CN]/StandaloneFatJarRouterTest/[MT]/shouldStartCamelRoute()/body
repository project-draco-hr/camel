{
  final int port=SocketUtils.findAvailableTcpPort();
  TestFatJarRouter.main("--spring.main.sources=org.apache.camel.spring.boot.FatJarRouter","--http.port=" + port);
  await().until(new Callable<Boolean>(){
    @Override public Boolean call() throws Exception {
      new URL("http://localhost:" + port);
      return true;
    }
  }
);
  String response=IOUtils.toString(new URL("http://localhost:" + port));
  assertEquals("stringBean",response);
}
