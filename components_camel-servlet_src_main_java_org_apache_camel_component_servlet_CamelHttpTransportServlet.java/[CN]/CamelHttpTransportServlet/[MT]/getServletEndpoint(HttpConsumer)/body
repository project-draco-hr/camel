{
  if (!(consumer.getEndpoint() instanceof ServletEndpoint)) {
    throw new RuntimeException("Invalid consumer type. Must be ServletEndpoint but is " + consumer.getClass().getName());
  }
  return (ServletEndpoint)consumer.getEndpoint();
}
