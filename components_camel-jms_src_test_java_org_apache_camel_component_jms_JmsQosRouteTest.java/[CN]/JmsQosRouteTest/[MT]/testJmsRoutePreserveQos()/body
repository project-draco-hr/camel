{
  MockEndpoint preserveEndpoint1=(MockEndpoint)context.getEndpoint("mock:preserve-1");
  preserveEndpoint1.expectedMessageCount(1);
  preserveEndpoint1.message(0).header("JMSPriority").isEqualTo(1);
  MockEndpoint preserveEndpoint2=(MockEndpoint)context.getEndpoint("mock:preserve-2");
  preserveEndpoint2.expectedMessageCount(1);
  preserveEndpoint2.message(0).header("JMSPriority").isEqualTo(2);
  template.sendBody(componentName + ":queue:p1?explicitQosEnabled=true&priority=1","test");
  template.sendBody(componentName + ":queue:p2?explicitQosEnabled=true&priority=2","test");
  MockEndpoint.assertIsSatisfied(preserveEndpoint1,preserveEndpoint2);
}
