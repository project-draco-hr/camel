{
  MockEndpoint preserveEndpoint1=context.getEndpoint("mock:preserve-1",MockEndpoint.class);
  preserveEndpoint1.expectedMessageCount(1);
  preserveEndpoint1.message(0).header("JMSPriority").isEqualTo(1);
  MockEndpoint preserveEndpoint2=context.getEndpoint("mock:preserve-2",MockEndpoint.class);
  preserveEndpoint2.expectedMessageCount(1);
  preserveEndpoint2.message(0).header("JMSPriority").isEqualTo(2);
  template.sendBody(componentName + ":queue:p1?explicitQosEnabled=true&priority=1","test");
  template.sendBody(componentName + ":queue:p2?explicitQosEnabled=true&priority=2","test");
  MockEndpoint.assertIsSatisfied(preserveEndpoint1,preserveEndpoint2);
}
