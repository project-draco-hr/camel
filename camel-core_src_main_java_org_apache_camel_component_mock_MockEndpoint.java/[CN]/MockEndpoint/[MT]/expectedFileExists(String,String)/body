{
  final File file=new File(FileUtil.normalizePath(name)).getAbsoluteFile();
  expects(new Runnable(){
    public void run(){
      final long timeout=System.currentTimeMillis() + 5000;
      boolean stop=false;
      while (!stop && !file.exists()) {
        try {
          Thread.sleep(50);
        }
 catch (        InterruptedException e) {
        }
        stop=System.currentTimeMillis() > timeout;
      }
      assertTrue("The file should exists: " + name,file.exists());
      if (content != null) {
        try {
          assertEquals("Content of file: " + name,content,IOConverter.toString(file));
        }
 catch (        IOException e) {
          throw new RuntimeException(e);
        }
      }
    }
  }
);
}
