{
  Endpoint endpoint=context.getEndpoint("cmis://" + getUrl() + "?queryMode=true");
  Producer producer=endpoint.createProducer();
  Exchange exchange=createExchangeWithInBody("SELECT * FROM cmis:document WHERE cmis:name='test1.txt'");
  exchange.getIn().getHeaders().put("CamelCMISRetrieveContent",true);
  producer.process(exchange);
  @SuppressWarnings("unchecked") List<Map<String,Object>> documents=exchange.getOut().getBody(List.class);
  InputStream content=(InputStream)documents.get(0).get("CamelCMISContent");
  assertEquals("This is the first Camel test content.",readFromStream(content));
}
