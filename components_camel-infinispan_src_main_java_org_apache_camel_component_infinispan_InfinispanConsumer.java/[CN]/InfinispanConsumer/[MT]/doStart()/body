{
  if (configuration.getCacheContainer() instanceof EmbeddedCacheManager) {
    cacheManager=(EmbeddedCacheManager)configuration.getCacheContainer();
    Cache<Object,Object> cache;
    if (configuration.getCacheName() != null) {
      cache=cacheManager.getCache(configuration.getCacheName());
    }
 else {
      cache=cacheManager.getCache();
    }
    cache.addListener(listener);
  }
 else {
    throw new UnsupportedOperationException("Consumer not support for CacheContainer: " + configuration.getCacheContainer());
  }
  super.doStart();
}
