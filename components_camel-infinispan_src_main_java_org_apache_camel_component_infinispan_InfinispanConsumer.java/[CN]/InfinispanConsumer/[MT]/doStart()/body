{
  BasicCacheContainer cacheContainer=configuration.getCacheContainer();
  String cacheName=configuration.getCacheName();
  cache=cacheName == null ? cacheContainer.getCache() : cacheContainer.getCache(cacheName);
  if (InfinispanUtil.isEmbedded(cacheContainer)) {
    listener=InfinispanConsumerEmbeddedHandler.INSTANCE.start(this);
  }
 else   if (InfinispanUtil.isRemote(cacheContainer)) {
    listener=InfinispanConsumerRemoteHandler.INSTANCE.start(this);
  }
 else {
    throw new UnsupportedOperationException("Consumer not support for CacheContainer: " + cacheContainer);
  }
  super.doStart();
}
