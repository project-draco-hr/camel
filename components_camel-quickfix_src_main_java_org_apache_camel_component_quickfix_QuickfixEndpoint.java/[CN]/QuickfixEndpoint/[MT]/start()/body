{
  if (settings == null) {
    Resource configResource=getResource();
    InputStream inputStream=configResource.getInputStream();
    ObjectHelper.notNull(inputStream,"Could not load " + configuration);
    settings=new SessionSettings(inputStream);
  }
  MessageStoreFactory storeFactory=createMessageStoreFactory(settings);
  LogFactory logFactory=createLogFactory(settings);
  createApplication();
  start(application,storeFactory,settings,logFactory);
}
