{
  Boolean filtered=exchange.getProperty(Exchange.FILTERED,Boolean.class);
  if (aggregationStrategy != null && (filtered == null || !filtered)) {
    Exchange oldExchange=result.get();
    ExchangeHelper.prepareAggregation(oldExchange,exchange);
    result.set(aggregationStrategy.aggregate(oldExchange,exchange));
  }
 else {
    if (LOG.isTraceEnabled()) {
      LOG.trace("Cannot aggregate exchange as its filtered: " + exchange);
    }
  }
}
