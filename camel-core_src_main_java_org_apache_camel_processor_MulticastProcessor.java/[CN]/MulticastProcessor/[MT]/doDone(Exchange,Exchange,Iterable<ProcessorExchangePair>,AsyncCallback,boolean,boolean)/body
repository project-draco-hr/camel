{
  if (pairs != null && pairs instanceof Closeable) {
    IOHelper.close((Closeable)pairs,"pairs",LOG);
  }
  removeAggregationStrategyFromExchange(original);
  if (original.getException() != null || subExchange != null && subExchange.getException() != null) {
    original.setProperty(Exchange.REDELIVERY_EXHAUSTED,exhaust);
  }
  if (subExchange != null) {
    ExchangeHelper.copyResults(original,subExchange);
  }
  callback.done(doneSync);
}
