{
  Map<String,CamelContext> map=getCamelContextMap();
  if (map.size() == 0) {
    throw new CamelException("Can't find any Camel Context from the Application Context. Please check your Application Context setting");
  }
  Set<Map.Entry<String,CamelContext>> entries=map.entrySet();
  int size=entries.size();
  for (  Map.Entry<String,CamelContext> entry : entries) {
    String name=entry.getKey();
    CamelContext camelContext=entry.getValue();
    camelContexts.add(camelContext);
    generateDot(name,camelContext,size);
    postProcesCamelContext(camelContext);
  }
  if (isAggregateDot()) {
    generateDot("aggregate",aggregateCamelContext(),1);
  }
  if (!"".equals(getRoutesOutputFile())) {
    outputRoutesToFile();
  }
}
