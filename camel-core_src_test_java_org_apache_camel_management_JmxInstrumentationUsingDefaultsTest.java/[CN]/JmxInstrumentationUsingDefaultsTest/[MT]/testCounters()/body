{
  MockEndpoint resultEndpoint=resolveMandatoryEndpoint("mock:end",MockEndpoint.class);
  resultEndpoint.expectedBodiesReceived("<hello>world!</hello>");
  sendBody("direct:start","<hello>world!</hello>");
  resultEndpoint.assertIsSatisfied();
  MBeanServer mbs=iAgent.getMBeanServer();
  ObjectName name=new ObjectName(domainName + ":name=Stats,*");
  Set s=mbs.queryNames(name,null);
  assertTrue(s.size() == 1);
  Iterator iter=s.iterator();
  ObjectName pcob=(ObjectName)iter.next();
  Long valueofNumExchanges=(Long)mbs.getAttribute(pcob,"NumExchanges");
  assertNotNull("Expected attribute not found. MBean registerred under a " + "'<domain>:name=Stats,*' key must be of type PerformanceCounter.class",valueofNumExchanges);
  assertTrue(valueofNumExchanges == 1);
  Long valueofNumCompleted=(Long)mbs.getAttribute(pcob,"NumCompleted");
  assertNotNull("Expected attribute not found. MBean registerred under a " + "'<domain>:name=Stats,*' key must be of type PerformanceCounter.class",valueofNumCompleted);
  assertTrue(valueofNumCompleted == 1);
  Long valueofNumFailed=(Long)mbs.getAttribute(pcob,"NumFailed");
  assertNotNull("Expected attribute not found. MBean registerred under a " + "'<domain>:name=Stats,*' key must be of type PerformanceCounter.class",valueofNumFailed);
  assertTrue(valueofNumFailed == 0);
  Long valueofMinProcessingTime=(Long)mbs.getAttribute(pcob,"MinProcessingTime");
  assertNotNull("Expected attribute not found. MBean registerred under a " + "'<domain>:name=Stats,*' key must be of type PerformanceCounter.class",valueofMinProcessingTime);
  assertTrue(valueofMinProcessingTime > 0);
  Long valueofMaxProcessingTime=(Long)mbs.getAttribute(pcob,"MaxProcessingTime");
  assertNotNull("Expected attribute not found. MBean registerred under a " + "'<domain>:name=Stats,*' key must be of type PerformanceCounter.class",valueofMaxProcessingTime);
  assertTrue(valueofMaxProcessingTime > 0);
  Long valueofMeanProcessingTime=(Long)mbs.getAttribute(pcob,"MeanProcessingTime");
  assertNotNull("Expected attribute not found. MBean registerred under a " + "'<domain>:name=Stats,*' key must be of type PerformanceCounter.class",valueofMeanProcessingTime);
  assertTrue(valueofMeanProcessingTime >= valueofMinProcessingTime && valueofMeanProcessingTime <= valueofMaxProcessingTime);
}
