{
  if (System.getProperty(JmxSystemPropertyKeys.USE_PLATFORM_MBS) != null && !Boolean.getBoolean(JmxSystemPropertyKeys.USE_PLATFORM_MBS)) {
    assertEquals(domainName,mbsc.getDefaultDomain());
  }
  resolveMandatoryEndpoint("mock:end",MockEndpoint.class);
  Set s=mbsc.queryNames(new ObjectName(domainName + ":type=endpoint,*"),null);
  assertEquals("Could not find 2 endpoints: " + s,2,s.size());
  s=mbsc.queryNames(new ObjectName(domainName + ":name=context,*"),null);
  assertEquals("Could not find 1 context: " + s,1,s.size());
  s=mbsc.queryNames(new ObjectName(domainName + ":type=processor,*"),null);
  assertEquals("Could not find 1 processor: " + s,1,s.size());
  s=mbsc.queryNames(new ObjectName(domainName + ":type=route,*"),null);
  assertEquals("Could not find 1 route: " + s,1,s.size());
}
