{
  RemoteFile<ChannelSftp.LsEntry> remote=new RemoteFile<ChannelSftp.LsEntry>();
  remote.setFile(file);
  remote.setFileName(file.getFilename());
  remote.setFileLength(file.getAttrs().getSize());
  remote.setLastModified(file.getAttrs().getMTime() * 1000L);
  remote.setHostname(endpoint.getConfiguration().getHost());
  String absoluteFileName=(ObjectHelper.isNotEmpty(directory) ? directory + "/" : "") + file.getFilename();
  remote.setAbsolutelFileName(absoluteFileName);
  String ftpBasePath=endpoint.getConfiguration().getFile();
  String relativePath=absoluteFileName.substring(ftpBasePath.length());
  if (relativePath.startsWith("/")) {
    relativePath=relativePath.substring(1);
  }
  remote.setRelativeFileName(relativePath);
  return remote;
}
