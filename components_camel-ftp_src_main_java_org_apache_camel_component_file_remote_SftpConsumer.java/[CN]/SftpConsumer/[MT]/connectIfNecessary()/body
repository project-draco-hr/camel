{
  if (channel == null || !channel.isConnected()) {
    if (session == null || !session.isConnected()) {
      LOG.debug("Session isn't connected, trying to recreate and connect.");
      session=endpoint.createSession();
      session.connect();
    }
    LOG.debug("Channel isn't connected, trying to recreate and connect.");
    channel=endpoint.createChannelSftp(session);
    channel.connect();
    LOG.info("Connected to " + remoteServer());
  }
}
