{
  return new Option[]{karafDistributionConfiguration().frameworkUrl(maven().groupId("org.apache.karaf").artifactId("apache-karaf").versionAsInProject().type("tar.gz")).karafVersion(MavenUtils.getArtifactVersion("org.apache.karaf","apache-karaf")).name("Apache Karaf").unpackDirectory(new File("target/karaf")),keepRuntimeFolder(),configureConsole().ignoreRemoteShell(),logLevel(LogLevelOption.LogLevel.WARN),replaceConfigurationFile("etc/org.ops4j.pax.logging.cfg",getConfigFile("/etc/org.ops4j.pax.logging.cfg")),editConfigurationFilePut("etc/org.ops4j.pax.web.cfg","org.osgi.service.http.port",Integer.toString(AvailablePortFinder.getNextAvailable())),editConfigurationFilePut("etc/org.apache.karaf.management.cfg","rmiRegistryPort",Integer.toString(AvailablePortFinder.getNextAvailable())),editConfigurationFilePut("etc/org.apache.karaf.management.cfg","rmiServerPort",Integer.toString(AvailablePortFinder.getNextAvailable())),junitBundles(),KarafDistributionOption.features(getCamelKarafFeatureUrl(),"camel","camel-test"),mavenBundle().groupId("org.apache.camel").artifactId("camel-test-karaf").versionAsInProject()};
}
