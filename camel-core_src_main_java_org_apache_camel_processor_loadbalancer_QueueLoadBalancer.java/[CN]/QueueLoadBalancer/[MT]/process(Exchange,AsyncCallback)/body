{
  boolean sync;
  List<Processor> list=getProcessors();
  if (list.isEmpty()) {
    throw new IllegalStateException("No processors available to process " + exchange);
  }
  Processor processor=chooseProcessor(list,exchange);
  if (processor == null) {
    throw new IllegalStateException("No processors could be chosen to process " + exchange);
  }
 else {
    AsyncProcessor albp=AsyncProcessorTypeConverter.convert(processor);
    sync=albp.process(exchange,new AsyncCallback(){
      public void done(      boolean doneSync){
        if (doneSync) {
          return;
        }
        callback.done(false);
      }
    }
);
  }
  return sync;
}
