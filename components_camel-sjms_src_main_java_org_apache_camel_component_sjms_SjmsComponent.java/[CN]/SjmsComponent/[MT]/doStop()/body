{
  if (timedTaskManager != null) {
    timedTaskManager.cancelTasks();
  }
  if (getConnectionResource() != null) {
    if (getConnectionResource() instanceof ConnectionFactoryResource) {
      ((ConnectionFactoryResource)getConnectionResource()).drainPool();
    }
  }
  super.doStop();
}
