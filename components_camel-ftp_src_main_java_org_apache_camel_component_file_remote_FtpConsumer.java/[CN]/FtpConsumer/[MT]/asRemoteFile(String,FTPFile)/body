{
  RemoteFile<FTPFile> remote=new RemoteFile<FTPFile>();
  remote.setFile(file);
  remote.setFileName(file.getName());
  remote.setFileLength(file.getSize());
  if (file.getTimestamp() != null) {
    remote.setLastModified(file.getTimestamp().getTimeInMillis());
  }
  remote.setHostname(((RemoteFileConfiguration)endpoint.getConfiguration()).getHost());
  String absoluteFileName=(ObjectHelper.isNotEmpty(directory) ? directory + "/" : "") + file.getName();
  remote.setAbsoluteFileName(absoluteFileName);
  String ftpBasePath=endpoint.getConfiguration().getFile();
  String relativePath=absoluteFileName.substring(ftpBasePath.length());
  if (relativePath.startsWith("/")) {
    relativePath=relativePath.substring(1);
  }
  remote.setRelativeFileName(relativePath);
  return remote;
}
