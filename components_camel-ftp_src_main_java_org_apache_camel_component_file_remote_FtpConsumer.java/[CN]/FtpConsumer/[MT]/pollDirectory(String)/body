{
  client.changeWorkingDirectory(dir);
  for (  FTPFile ftpFile : client.listFiles()) {
    if (ftpFile.isFile()) {
      pollFile(ftpFile);
    }
 else     if (ftpFile.isDirectory()) {
      if (isRecursive()) {
        pollDirectory(getFullFileName(ftpFile));
      }
    }
 else {
      LOG.warn("Unsupported type of FTPFile: " + ftpFile + " not a file or directory");
    }
  }
}
