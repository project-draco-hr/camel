{
  String protocol=uri.getScheme();
  if (!protocol.equalsIgnoreCase("lpr")) {
    throw new IllegalArgumentException("Unrecognized Print protocol: " + protocol + " for uri: "+ uri);
  }
  setUri(uri);
  setHostname(uri.getHost());
  setPort(uri.getPort());
  String path=uri.getPath();
  path=ObjectHelper.removeStartingCharacters(path,'/');
  path=ObjectHelper.removeStartingCharacters(path,'\\');
  setPrintername(path);
  Map<String,Object> printSettings=URISupport.parseParameters(uri);
  setFlavor((String)printSettings.get("flavor"));
  setMimeType((String)printSettings.get("mimeType"));
  setDocFlavor(assignDocFlavor(flavor,mimeType));
  setPrinterPrefix((String)printSettings.get("printerPrefix"));
  if (printSettings.containsKey("copies")) {
    setCopies(Integer.valueOf((String)printSettings.get("copies")));
  }
  setMediaSize((String)printSettings.get("mediaSize"));
  setSides((String)printSettings.get("sides"));
  setOrientation((String)printSettings.get("orientation"));
  setMediaSizeName(assignMediaSize(mediaSize));
  setInternalSides(assignSides(sides));
  setInternalOrientation(assignOrientation(orientation));
  if (printSettings.containsKey("sendToPrinter")) {
    if (!(Boolean.valueOf((String)printSettings.get("sendToPrinter")))) {
      setSendToPrinter(false);
    }
  }
  if (printSettings.containsKey("mediaTray")) {
    setMediaTray((String)printSettings.get("mediaTray"));
  }
}
