{
  template.sendBody("list:foo",body1);
  template.sendBody("list:foo",body2);
  List<ListEndpoint> list=CamelContextHelper.getSingletonEndpoints(context,ListEndpoint.class);
  assertEquals("number of endpoints",2,list.size());
  for (  ListEndpoint endpoint : list) {
    List<Exchange> exchanges=endpoint.getExchanges();
    LOG.debug(">>>> " + endpoint + " has: "+ exchanges);
    assertEquals("Exchanges received on " + endpoint,2,exchanges.size());
    assertInMessageBodyEquals(exchanges.get(0),body1);
    assertInMessageBodyEquals(exchanges.get(1),body2);
  }
}
