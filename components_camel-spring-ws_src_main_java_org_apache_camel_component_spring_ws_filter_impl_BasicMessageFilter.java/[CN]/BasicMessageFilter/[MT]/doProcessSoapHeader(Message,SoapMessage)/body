{
  SoapHeader soapHeader=soapMessage.getSoapHeader();
  Map<String,Object> headers=inOrOut.getHeaders();
  HashSet<String> headerKeySet=new HashSet<String>(headers.keySet());
  headerKeySet.remove(SpringWebserviceConstants.SPRING_WS_SOAP_ACTION.toLowerCase());
  headerKeySet.remove(SpringWebserviceConstants.SPRING_WS_ADDRESSING_ACTION.toLowerCase());
  headerKeySet.remove(SpringWebserviceConstants.SPRING_WS_ENDPOINT_URI.toLowerCase());
  headerKeySet.remove(LOWERCASE_BREADCRUMB_ID);
  for (  String name : headerKeySet) {
    Object value=headers.get(name);
    if (value instanceof QName) {
      soapHeader.addHeaderElement((QName)value);
    }
 else {
      if (value instanceof String) {
        soapHeader.addAttribute(new QName(name),value + "");
      }
    }
  }
}
