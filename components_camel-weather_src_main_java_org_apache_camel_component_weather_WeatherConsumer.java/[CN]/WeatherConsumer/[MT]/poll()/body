{
  LOG.debug("Going to execute the query '{}'",query);
  String weather=getEndpoint().getCamelContext().getTypeConverter().mandatoryConvertTo(String.class,new URL(query));
  LOG.debug("Got back the answer '{}'",weather);
  if (ObjectHelper.isEmpty(weather)) {
    throw new IllegalStateException("Got the empty string '" + weather + "' as the result of the query '"+ query+ "'");
  }
  Exchange exchange=getEndpoint().createExchange();
  exchange.getIn().setBody(weather);
  exchange.getIn().setHeader(WeatherConstants.WEATHER_QUERY,query);
  getProcessor().process(exchange);
  return 1;
}
