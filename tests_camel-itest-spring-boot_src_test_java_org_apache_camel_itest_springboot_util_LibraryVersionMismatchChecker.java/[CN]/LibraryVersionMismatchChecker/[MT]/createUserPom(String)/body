{
  String pom;
  try (InputStream pomTemplate=ArquillianPackager.class.getResourceAsStream("/application-pom.xml")){
    pom=IOUtils.toString(pomTemplate);
  }
   Map<String,String> resolvedProperties=new TreeMap<>();
  Pattern propPattern=Pattern.compile("(\\$\\{[^}]*\\})");
  Matcher m=propPattern.matcher(pom);
  while (m.find()) {
    String property=m.group();
    String resolved=DependencyResolver.resolveSpringBootParentProperty(property);
    resolvedProperties.put(property,resolved);
  }
  for (  String property : resolvedProperties.keySet()) {
    pom=pom.replace(property,resolvedProperties.get(property));
  }
  pom=pom.replace("#{module}",moduleName);
  File pomFile=new File("target/library-version-mismatch-spring-boot-pom.xml");
  try (FileWriter fw=new FileWriter(pomFile)){
    IOUtils.write(pom,fw);
  }
   return pomFile;
}
