{
  super.doStart();
  JMXEndpoint ep=(JMXEndpoint)getEndpoint();
  if (ep.isPlatformServer()) {
    setServerConnection(ManagementFactory.getPlatformMBeanServer());
  }
 else {
    JMXServiceURL url=new JMXServiceURL(ep.getServerURL());
    String[] creds={ep.getUser(),ep.getPassword()};
    Map<String,String[]> map=Collections.singletonMap(JMXConnector.CREDENTIALS,creds);
    JMXConnector connector=JMXConnectorFactory.connect(url,map);
    setServerConnection(connector.getMBeanServerConnection());
  }
  addNotificationListener();
}
