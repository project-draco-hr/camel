{
  String uri=null;
  if (!(endpoint.isBridgeEndpoint())) {
    uri=exchange.getIn().getHeader(Exchange.HTTP_URI,String.class);
  }
  if (uri == null) {
    uri=endpoint.getHttpUri().toString();
  }
  String path=exchange.getIn().getHeader(Exchange.HTTP_PATH,String.class);
  if (path != null) {
    if (!uri.endsWith("/")) {
      uri=uri + "/";
    }
    if (path.startsWith("/")) {
      path=path.substring(1);
    }
    uri=uri.concat(path);
  }
  return uri;
}
