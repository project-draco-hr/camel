{
  Message in=exchange.getIn();
  String defaultMetricsName=getEndpoint().getMetricsName();
  String finalMetricsName=getMetricsName(in,defaultMetricsName);
  MetricRegistry registry=getEndpoint().getRegistry();
  try {
    doProcess(exchange,getEndpoint(),registry,finalMetricsName);
  }
 catch (  Exception e) {
    exchange.setException(e);
  }
 finally {
    clearMetricsHeaders(in);
  }
}
