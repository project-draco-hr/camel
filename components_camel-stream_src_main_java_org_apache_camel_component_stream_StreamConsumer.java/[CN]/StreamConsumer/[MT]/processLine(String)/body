{
  if (endpoint.getGroupLines() > 0) {
    lines.add(line);
    if (lines.size() >= endpoint.getGroupLines()) {
      Exchange exchange=endpoint.createExchange();
      Message msg=new DefaultMessage();
      List<String> copy=new ArrayList<String>(lines);
      msg.setBody(endpoint.getGroupStrategy().groupLines(copy));
      exchange.setIn(msg);
      lines.clear();
      getProcessor().process(exchange);
    }
  }
 else {
    Exchange exchange=endpoint.createExchange();
    Message msg=new DefaultMessage();
    msg.setBody(line);
    exchange.setIn(msg);
    getProcessor().process(exchange);
  }
}
