{
  if (request == null) {
    return null;
  }
  if (exchange == null || !exchange.getProperty(Exchange.SKIP_GZIP_ENCODING,Boolean.FALSE,Boolean.class)) {
    String contentEncoding=request.getHeader(Exchange.CONTENT_ENCODING);
    return GZIPHelper.uncompressGzip(contentEncoding,request.getInputStream());
  }
 else {
    return request.getInputStream();
  }
}
