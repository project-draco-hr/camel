{
  super.doStart();
  if (transformerFactory == null) {
    createTransformerFactory();
  }
  if (rules == null) {
    try {
      LOG.debug("Reading schematron rules from class path {}",path);
      InputStream schRules=ResourceHelper.resolveMandatoryResourceAsInputStream(getCamelContext(),path);
      rules=TemplatesFactory.newInstance().getTemplates(schRules,transformerFactory);
    }
 catch (    Exception classPathException) {
      LOG.debug("Error loading schematron rules from class path, attempting file system {}",path);
      try {
        InputStream schRules=FileUtils.openInputStream(new File(path));
        rules=TemplatesFactory.newInstance().getTemplates(schRules,transformerFactory);
      }
 catch (      FileNotFoundException e) {
        LOG.debug("Schematron rules not found in the file system {}",path);
        throw classPathException;
      }
    }
    if (rules == null) {
      LOG.error("Failed to load schematron rules {}",path);
      throw new SchematronConfigException("Failed to load schematron rules: " + path);
    }
  }
}
