{
  return new RouteBuilder(){
    @Override public void configure() throws Exception {
      from(new MyEndpoint()).process(new AsyncProcessor(){
        @Override public boolean process(        final Exchange exchange,        final AsyncCallback callback){
          executorService.submit(new Runnable(){
            @Override public void run(){
              taskThread=Thread.currentThread().getName();
              try {
                Thread.sleep(100);
              }
 catch (              InterruptedException e) {
              }
              exchange.getIn().setHeader("foo",123);
              callback.done(false);
            }
          }
);
          return false;
        }
        @Override public void process(        Exchange exchange) throws Exception {
        }
      }
).process(new Processor(){
        @Override public void process(        Exchange exchange) throws Exception {
          afterThread=Thread.currentThread().getName();
        }
      }
).to("mock:result");
    }
  }
;
}
