{
  return new RouteBuilder(){
    @Override public void configure() throws Exception {
      errorHandler(deadLetterChannel("mock:error"));
      onException(CamelException.class).maximumRedeliveries(2);
      from("seda:start").aggregate(new PredicateAggregationCollection(header("id"),new AggregationStrategy(){
        public Exchange aggregate(        Exchange oldExchange,        Exchange newExchange){
          return newExchange;
        }
      }
,header(Exchange.AGGREGATED_SIZE).isEqualTo(2))).batchTimeout(500L).to("mock:result");
    }
  }
;
}
