{
  order="";
  getMockEndpoint("mock:result").expectedBodiesReceived("Hello World");
  final CountDownLatch latch=new CountDownLatch(1);
  template.asyncCallback("direct:start",new Processor(){
    public void process(    Exchange exchange) throws Exception {
      exchange.getIn().setBody("Hello");
    }
  }
,new SynchronizationAdapter(){
    @Override public void onDone(    Exchange exchange){
      order+="B";
      assertEquals("Hello World",exchange.getIn().getBody());
      latch.countDown();
    }
  }
);
  order+="A";
  latch.await(10,TimeUnit.SECONDS);
  order+="C";
  assertMockEndpointsSatisfied();
  assertEquals("ABC",order);
}
