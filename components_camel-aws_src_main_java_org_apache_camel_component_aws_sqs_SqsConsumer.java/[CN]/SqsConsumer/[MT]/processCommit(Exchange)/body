{
  try {
    if (getConfiguration().isDeleteAfterRead()) {
      String receiptHandle=exchange.getIn().getHeader(SqsConstants.RECEIPT_HANDLE,String.class);
      DeleteMessageRequest deleteRequest=new DeleteMessageRequest(getQueueUrl(),receiptHandle);
      LOG.trace("Deleting message with receipt handle {}...",receiptHandle);
      getClient().deleteMessage(deleteRequest);
      LOG.trace("Message deleted");
    }
  }
 catch (  AmazonClientException e) {
    LOG.warn("Error occurred during deleting message",e);
    exchange.setException(e);
  }
}
