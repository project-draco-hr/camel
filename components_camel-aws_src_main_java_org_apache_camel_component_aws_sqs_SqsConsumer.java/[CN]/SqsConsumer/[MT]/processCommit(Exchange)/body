{
  try {
    if (getConfiguration().isDeleteAfterRead()) {
      String receiptHandle=exchange.getIn().getHeader(SqsConstants.RECEIPT_HANDLE,String.class);
      DeleteMessageRequest deleteRequest=new DeleteMessageRequest(getQueueUrl(),receiptHandle);
      if (LOG.isTraceEnabled()) {
        LOG.trace("Deleting message with receipt handle " + receiptHandle + "...");
      }
      getClient().deleteMessage(deleteRequest);
    }
  }
 catch (  AmazonClientException e) {
    LOG.warn("Error occurred during deleting message",e);
    exchange.setException(e);
  }
}
