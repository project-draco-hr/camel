{
  ExecutorServiceManager esm=endpoint.getCamelContext().getExecutorServiceManager();
  String pattern=esm.getThreadNamePattern();
  String beanName=getBeanName();
  ThreadPoolTaskExecutor answer=new ThreadPoolTaskExecutor();
  answer.setBeanName(beanName);
  answer.setThreadFactory(new CamelThreadFactory(pattern,beanName,true));
  answer.setCorePoolSize(endpoint.getConcurrentConsumers());
  answer.setMaxPoolSize(endpoint.getMaxConcurrentConsumers());
  return answer;
}
