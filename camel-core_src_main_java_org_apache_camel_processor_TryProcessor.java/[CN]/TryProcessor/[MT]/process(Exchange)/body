{
  Throwable e=null;
  try {
    tryProcessor.process(exchange);
    e=exchange.getException();
    if (e != null && DeadLetterChannel.isFailureHandled(exchange)) {
      e=null;
    }
  }
 catch (  Exception ex) {
    e=ex;
    exchange.setException(e);
  }
  if (e != null) {
    try {
      DeadLetterChannel.setFailureHandled(exchange,true);
      handleException(exchange,e);
      exchange.setException(null);
    }
 catch (    Exception ex) {
      throw ex;
    }
catch (    Throwable ex) {
      throw new RuntimeCamelException(ex);
    }
 finally {
      handleAll(exchange);
    }
  }
 else {
    handleAll(exchange);
  }
}
