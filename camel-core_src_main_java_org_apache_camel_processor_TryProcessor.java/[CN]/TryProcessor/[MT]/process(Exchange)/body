{
  Exception e;
  try {
    tryProcessor.process(exchange);
    e=exchange.getException();
    if (e != null && ExchangeHelper.isFailureHandled(exchange)) {
      e=null;
    }
  }
 catch (  Exception ex) {
    e=ex;
    exchange.setException(e);
  }
  try {
    if (e != null) {
      if (LOG.isDebugEnabled()) {
        LOG.debug("Caught exception while processing exchange.",e);
      }
      handleException(exchange,e);
    }
  }
  finally {
    processFinally(exchange);
  }
}
