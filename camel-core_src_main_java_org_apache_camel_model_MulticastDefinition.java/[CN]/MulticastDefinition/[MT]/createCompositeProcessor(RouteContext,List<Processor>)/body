{
  if (aggregationStrategy == null && strategyRef != null) {
    aggregationStrategy=routeContext.lookup(strategyRef,AggregationStrategy.class);
  }
  if (aggregationStrategy == null) {
    aggregationStrategy=new UseLatestAggregationStrategy();
  }
  if (threadPoolRef != null) {
    executor=routeContext.lookup(threadPoolRef,Executor.class);
  }
  return new MulticastProcessor(list,aggregationStrategy,isParallelProcessing(),executor);
}
