{
  if (strategyRef != null) {
    aggregationStrategy=routeContext.lookup(strategyRef,AggregationStrategy.class);
  }
  if (aggregationStrategy == null) {
    aggregationStrategy=new UseLatestAggregationStrategy();
  }
  if (executorServiceRef != null) {
    executorService=routeContext.lookup(executorServiceRef,ExecutorService.class);
  }
  List<Processor> processors=new ArrayList<Processor>(list.size());
  for (  Processor output : list) {
    Processor errorHandler=wrapInErrorHandler(routeContext,output);
    processors.add(errorHandler);
  }
  return new MulticastProcessor(processors,aggregationStrategy,isParallelProcessing(),executorService,isStreaming(),isStopOnException());
}
