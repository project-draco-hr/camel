{
  if (strategyRef != null) {
    aggregationStrategy=routeContext.lookup(strategyRef,AggregationStrategy.class);
  }
  if (aggregationStrategy == null) {
    aggregationStrategy=new UseLatestAggregationStrategy();
  }
  executorService=ExecutorServiceHelper.getConfiguredExecutorService(routeContext,this);
  return new MulticastProcessor(routeContext.getCamelContext(),list,aggregationStrategy,isParallelProcessing(),executorService,isStreaming(),isStopOnException());
}
