{
  endpoint.setIteratorType(ShardIteratorType.LATEST);
  undertest=new DdbStreamConsumer(endpoint,processor);
  undertest.poll();
  undertest.poll();
  ArgumentCaptor<GetRecordsRequest> getRecordsCaptor=ArgumentCaptor.forClass(GetRecordsRequest.class);
  verify(amazonDynamoDBStreams,times(2)).getRecords(getRecordsCaptor.capture());
  assertThat(getRecordsCaptor.getAllValues().get(0).getShardIterator(),is("shard_iterator_d_000"));
  assertThat(getRecordsCaptor.getAllValues().get(1).getShardIterator(),is("shard_iterator_d_001"));
}
