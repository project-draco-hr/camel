{
  return new RouteBuilder(){
    @Override public void configure() throws Exception {
      from("activemq:queue:inbox?concurrentConsumers=10").wireTap("activemq:topic:audit").choice().when(header("type").isEqualTo("gold")).to("direct:gold").when(header("type").isEqualTo("silver")).to("direct:silver").otherwise().to("direct:bronze").end();
      from("direct:gold").to("mock:gold");
      from("direct:silver").delay(5).to("mock:silver");
      from("direct:bronze").delay(10).to("mock:bronze");
      from("activemq:topic:audit").to("mock:audit");
    }
  }
;
}
