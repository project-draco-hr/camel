{
  getMockEndpoint("mock:result.timeoutAndCompletionAware").expectedMessageCount(2);
  getMockEndpoint("mock:result.timeoutAndCompletionAware").message(0).body().isEqualTo("AGGREGATE1");
  getMockEndpoint("mock:result.timeoutAndCompletionAware").message(0).exchangeProperty("Timeout").isEqualTo(true);
  getMockEndpoint("mock:result.timeoutAndCompletionAware").message(1).body().isEqualTo("AGGREGATE3");
  template.sendBody("direct:start.timeoutAndCompletionAware","AGGREGATE1");
  assertTrue(timeoutLatch.await(2500,TimeUnit.MILLISECONDS));
  template.sendBody("direct:start.timeoutAndCompletionAware","AGGREGATE2");
  template.sendBody("direct:start.timeoutAndCompletionAware","AGGREGATE3");
  assertTrue(completionLatch.await(2500,TimeUnit.MILLISECONDS));
  getMockEndpoint("mock:result.timeoutAndCompletionAware").getReceivedExchanges();
  assertMockEndpointsSatisfied();
}
