{
  DeadLetterChannelBuilder errorHandler=(DeadLetterChannelBuilder)ctx.getBean("deadLetterErrorHandler");
  assertNotNull(errorHandler);
  assertNotNull(errorHandler.getDeadLetter());
  assertTrue("It should be a direct endpoint",errorHandler.getDeadLetter() instanceof DirectEndpoint);
  RedeliveryPolicy policy=errorHandler.getRedeliveryPolicy();
  assertNotNull(policy);
  assertEquals("Wrong maximumRedeliveries",2,policy.getMaximumRedeliveries());
  assertEquals("Wrong redeliveryDelay",1000,policy.getRedeliveryDelay());
  assertEquals("Wrong logStackTrace",true,policy.isLogHandled());
}
