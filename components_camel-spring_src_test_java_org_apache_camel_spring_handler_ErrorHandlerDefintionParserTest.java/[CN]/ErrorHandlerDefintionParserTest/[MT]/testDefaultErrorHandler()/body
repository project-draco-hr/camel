{
  DefaultErrorHandlerBuilder errorHandler=(DefaultErrorHandlerBuilder)ctx.getBean("defaultErrorHandler");
  assertNotNull(errorHandler);
  Processor processor=errorHandler.getFailureProcessor();
  assertNotNull(processor);
  assertTrue("It should be MyErrorProcessor",processor instanceof MyErrorProcessor);
  ExceptionPolicyStrategy strategy=errorHandler.getExceptionPolicyStrategy();
  assertNotNull(strategy);
  assertTrue("It should be DefaultExceptionPolicyStrategy",strategy instanceof DefaultExceptionPolicyStrategy);
  RedeliveryPolicy policy=errorHandler.getRedeliveryPolicy();
  assertNotNull(policy);
  assertEquals("Wrong maximumRedeliveries",2,policy.getMaximumRedeliveries());
  assertEquals("Wrong redeliveryDelay",0,policy.getRedeliveryDelay());
  assertEquals("Wrong logStackTrace",false,policy.isLogStackTrace());
}
