{
  if (consumer != null) {
    if (consumer == threadConsumer.get()) {
      threadConsumer.remove();
    }
    consumer.stop();
  }
  if (template != null) {
    if (template == threadTemplate.get()) {
      threadTemplate.remove();
    }
    template.stop();
  }
}
