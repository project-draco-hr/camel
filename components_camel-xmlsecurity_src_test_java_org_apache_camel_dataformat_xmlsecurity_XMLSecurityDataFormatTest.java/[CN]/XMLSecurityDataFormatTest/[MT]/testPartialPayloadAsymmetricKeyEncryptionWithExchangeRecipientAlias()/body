{
  MockEndpoint resultEndpoint=context.getEndpoint("mock:foo",MockEndpoint.class);
  resultEndpoint.setExpectedMessageCount(1);
  Map<String,String> contextProps=context.getProperties();
  contextProps.put(XMLSecurityDataFormat.XML_ENC_TRUST_STORE_URL,getClass().getClassLoader().getResource("sender.ts").toString());
  contextProps.put(XMLSecurityDataFormat.XML_ENC_TRUST_STORE_PASSWORD,"password");
  context.addRoutes(new RouteBuilder(){
    public void configure(){
      from("direct:start").process(new Processor(){
        public void process(        Exchange exchange) throws Exception {
          exchange.getIn().setHeader(XMLSecurityDataFormat.XML_ENC_RECIPIENT_ALIAS,"recipient");
        }
      }
).marshal().secureXML("//cheesesites/italy/cheese",true,null,XMLCipher.AES_256,XMLCipher.RSA_v1dot5).to("mock:encrypted");
    }
  }
);
  testEncryption();
}
