{
  MockEndpoint before=getMockEndpoint("mock:before");
  before.expectedMessageCount(1);
  before.assertIsSatisfied();
  Thread.sleep(1000);
  assertTrue("File should not have been deleted",new File("target/files/report.txt").getAbsoluteFile().exists());
  MockEndpoint mock=getMockEndpoint("mock:result");
  mock.expectedMessageCount(1);
  mock.assertIsSatisfied();
  Thread.sleep(100);
  assertFalse("File should been deleted",new File("target/files/report.txt").getAbsoluteFile().exists());
}
