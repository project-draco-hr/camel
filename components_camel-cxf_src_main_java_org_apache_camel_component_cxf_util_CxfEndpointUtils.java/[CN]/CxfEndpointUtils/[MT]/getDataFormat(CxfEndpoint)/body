{
  String dataFormatString=endpoint.getDataFormat();
  if (dataFormatString == null) {
    CxfEndpointBean cxfEndpointBean=endpoint.getCxfEndpointBean();
    if (cxfEndpointBean != null && cxfEndpointBean.getProperties() != null) {
      dataFormatString=(String)cxfEndpointBean.getProperties().get(CxfConstants.DATA_FORMAT);
    }
  }
  if (dataFormatString == null) {
    return DataFormat.POJO;
  }
  DataFormat retval=DataFormat.asEnum(dataFormatString);
  if (retval == DataFormat.UNKNOWN) {
    throw new CamelException(new Message("INVALID_MESSAGE_FORMAT_XXXX",LOG,dataFormatString).toString());
  }
  return retval;
}
