{
  ClientProxyFactoryBean clientFactory=null;
  try {
    if (cls == null) {
      clientFactory=new ClientProxyFactoryBean();
      clientFactory.setServiceFactory(new WSDLSoapServiceFactoryBean());
    }
 else {
      boolean isJSR181SEnabled=CxfEndpointUtils.hasWebServiceAnnotation(cls);
      clientFactory=isJSR181SEnabled ? new JaxWsProxyFactoryBean() : new ClientProxyFactoryBean();
    }
    return clientFactory;
  }
 catch (  Exception e) {
    throw new CamelException(e);
  }
}
