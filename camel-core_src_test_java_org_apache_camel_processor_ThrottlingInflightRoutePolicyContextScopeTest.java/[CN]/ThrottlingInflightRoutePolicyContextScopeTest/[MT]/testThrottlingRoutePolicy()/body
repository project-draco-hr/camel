{
  template.sendBody("seda:bar","Hello World");
  MockEndpoint result=getMockEndpoint("mock:result");
  result.expectedBodiesReceived("A");
  template.sendBody("direct:start","A");
  Thread.sleep(2000);
  template.sendBody("direct:start","B");
  result.assertIsSatisfied();
  result.reset();
  result.expectedBodiesReceived("B");
  latch.countDown();
  result.assertIsSatisfied();
}
