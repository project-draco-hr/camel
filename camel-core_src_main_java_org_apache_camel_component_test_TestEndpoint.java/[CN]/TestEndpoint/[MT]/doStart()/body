{
  LOG.debug("Consuming expected messages from: {}",expectedMessageEndpoint);
  final List<Object> expectedBodies=new ArrayList<Object>();
  EndpointHelper.pollEndpoint(expectedMessageEndpoint,new Processor(){
    public void process(    Exchange exchange) throws Exception {
      Object body=getInBody(exchange);
      if (body instanceof WrappedFile) {
        body=exchange.getIn().getBody(byte[].class);
      }
      LOG.trace("Received message body {}",body);
      expectedBodies.add(body);
    }
  }
,timeout);
  LOG.info("Received: {} expected message(s) from: {}",expectedBodies.size(),expectedMessageEndpoint);
  if (anyOrder) {
    expectedBodiesReceivedInAnyOrder(expectedBodies);
  }
 else {
    expectedBodiesReceived(expectedBodies);
  }
}
