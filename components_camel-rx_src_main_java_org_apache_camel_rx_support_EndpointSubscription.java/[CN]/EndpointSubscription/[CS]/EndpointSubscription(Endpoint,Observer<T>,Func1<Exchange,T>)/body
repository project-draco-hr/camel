{
  this.endpoint=endpoint;
  this.observer=observer;
  Processor processor=new ProcessorToObserver<T>(func,observer);
  try {
    this.consumer=endpoint.createConsumer(processor);
    this.consumer.start();
  }
 catch (  Exception e) {
    observer.onError(e);
  }
}
