{
  HttpMethod method=createMethod(exchange);
  HttpBinding binding=((HttpEndpoint)getEndpoint()).getBinding();
  for (  String headerName : exchange.getIn().getHeaders().keySet()) {
    String headerValue=exchange.getIn().getHeader(headerName,String.class);
    if (binding.shouldHeaderBePropagated(headerName,headerValue)) {
      method.addRequestHeader(headerName,headerValue);
    }
  }
  int responseCode=httpClient.executeMethod(method);
  InputStream in=method.getResponseBodyAsStream();
  Message out=exchange.getOut(true);
  out.setBody(in);
  Header[] headers=method.getResponseHeaders();
  for (  Header header : headers) {
    String name=header.getName();
    String value=header.getValue();
    out.setHeader(name,value);
  }
  out.setHeader(HTTP_RESPONSE_CODE,responseCode);
}
