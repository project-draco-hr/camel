{
  overdueEndpoint.expectedMinimumMessageCount(1);
  final CountDownLatch startLatch=new CountDownLatch(1);
  final CountDownLatch endLatch=new CountDownLatch(1);
  Thread thread=new Thread("B sender"){
    public void run(){
      startLatch.countDown();
      sendBMessages();
      endLatch.countDown();
    }
  }
;
  thread.start();
  startLatch.await(30,TimeUnit.SECONDS);
  sendAMessages();
  endLatch.await(30,TimeUnit.SECONDS);
  overdueEndpoint.assertIsSatisfied();
}
