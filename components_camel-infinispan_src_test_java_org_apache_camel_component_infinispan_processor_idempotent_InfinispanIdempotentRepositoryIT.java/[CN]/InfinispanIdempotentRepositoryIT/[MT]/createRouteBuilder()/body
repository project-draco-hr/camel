{
  return new RouteBuilder(){
    @Override public void configure(){
      from("direct:start").idempotentConsumer(header("MessageID"),new InfinispanIdempotentRepository(new RemoteCacheManager(new ConfigurationBuilder().addServers("localhost").build(),true),"idempotent")).skipDuplicate(true).to("log:org.apache.camel.component.infinispan.processor.idempotent?level=INFO&showAll=true&multiline=true").to("mock:result");
    }
  }
;
}
