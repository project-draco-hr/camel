{
  ExecutorServiceStrategy strategy=routeContext.getCamelContext().getExecutorServiceStrategy();
  ObjectHelper.notNull(strategy,"ExecutorServiceStrategy",routeContext.getCamelContext());
  if (definition.getExecutorService() != null) {
    return definition.getExecutorService();
  }
 else   if (definition.getExecutorServiceRef() != null) {
    ExecutorService answer=strategy.lookup(definition.getExecutorServiceRef());
    if (answer == null) {
      throw new IllegalArgumentException("ExecutorServiceRef " + definition.getExecutorServiceRef() + " not found in registry.");
    }
    return answer;
  }
  return null;
}
