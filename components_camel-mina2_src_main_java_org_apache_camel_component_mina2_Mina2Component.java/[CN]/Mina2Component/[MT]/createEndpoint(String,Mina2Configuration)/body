{
  ObjectHelper.notNull(getCamelContext(),"camelContext");
  String protocol=config.getProtocol();
  Mina2Endpoint endpoint=null;
  if (protocol != null) {
    if (protocol.equals("tcp") || config.isDatagramProtocol() || protocol.equals("vm")) {
      endpoint=new Mina2Endpoint(uri,this,config);
    }
  }
  if (endpoint == null) {
    throw new IllegalArgumentException("Unrecognised MINA protocol: " + protocol + " for uri: "+ uri);
  }
  if (config.isSync()) {
    endpoint.setExchangePattern(ExchangePattern.InOut);
  }
 else {
    endpoint.setExchangePattern(ExchangePattern.InOnly);
  }
  return endpoint;
}
