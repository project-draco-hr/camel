{
  ObjectHelper.notNull(getCamelContext(),"camelContext");
  Endpoint endpoint;
  String protocol=config.getProtocol();
  if (protocol != null) {
    if (protocol.equals("tcp") || config.isDatagramProtocol() || protocol.equals("vm")) {
      return new Mina2Endpoint(uri,this,config);
    }
  }
  throw new IllegalArgumentException("Unrecognised MINA protocol: " + protocol + " for uri: "+ uri);
}
