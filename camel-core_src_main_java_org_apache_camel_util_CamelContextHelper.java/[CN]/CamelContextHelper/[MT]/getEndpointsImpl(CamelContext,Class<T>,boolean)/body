{
  List<T> answer=new ArrayList<T>();
  Collection<Endpoint> endpoints=singleton ? camelContext.getSingletonEndpoints() : camelContext.getEndpoints();
  for (  Endpoint endpoint : endpoints) {
    if (type.isInstance(endpoint)) {
      T value=type.cast(endpoint);
      answer.add(value);
    }
  }
  return answer;
}
