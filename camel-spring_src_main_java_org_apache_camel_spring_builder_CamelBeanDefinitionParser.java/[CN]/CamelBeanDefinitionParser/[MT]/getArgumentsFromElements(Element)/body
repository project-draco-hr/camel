{
  LinkedHashMap<String,ArrayList<Element>> elements=new LinkedHashMap<String,ArrayList<Element>>();
  NodeList childNodes=element.getChildNodes();
  String lastTag=null;
  for (int i=0; i < childNodes.getLength(); i++) {
    Node node=childNodes.item(i);
    if (node.getNodeType() == Node.ELEMENT_NODE) {
      Element el=(Element)node;
      String tag=el.getLocalName();
      ArrayList<Element> els=elements.get(tag);
      if (els == null) {
        els=new ArrayList<Element>();
        elements.put(el.getLocalName(),els);
        els.add(el);
        lastTag=tag;
      }
 else {
        if (tag.equals(lastTag)) {
          els.add(el);
          lastTag=tag;
        }
      }
    }
  }
  return elements;
}
