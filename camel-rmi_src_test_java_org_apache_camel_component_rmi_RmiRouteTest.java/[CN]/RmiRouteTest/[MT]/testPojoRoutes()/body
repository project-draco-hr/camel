{
  if (classPathHasSpaces()) {
    return;
  }
  LocateRegistry.createRegistry(1099);
  CamelContext camelContext=new DefaultCamelContext();
  PojoComponent component=(PojoComponent)camelContext.getComponent("pojo");
  component.addService("bye",new SayService("Good Bye!"));
  camelContext.addRoutes(new RouteBuilder(){
    public void configure(){
      from("direct:hello").to("rmi://localhost:1099/bye");
      RmiEndpoint bye=(RmiEndpoint)endpoint("rmi://localhost:1099/bye");
      bye.setRemoteInterfaces(ISay.class);
      from(bye).to("pojo:bye");
    }
  }
);
  camelContext.start();
  Endpoint endpoint=camelContext.getEndpoint("direct:hello");
  ISay proxy=PojoComponent.createProxy(endpoint,ISay.class);
  String rc=proxy.say();
  assertEquals("Good Bye!",rc);
  camelContext.stop();
}
