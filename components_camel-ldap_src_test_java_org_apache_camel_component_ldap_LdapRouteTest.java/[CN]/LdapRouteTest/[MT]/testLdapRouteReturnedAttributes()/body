{
  camel.addRoutes(createRouteBuilder("ldap:localhost:" + port + "?base=ou=system&returnedAttributes=uid,cn"));
  camel.start();
  Endpoint endpoint=camel.getEndpoint("direct:start");
  Exchange exchange=endpoint.createExchange();
  exchange.getIn().setBody("(uid=tcruise)");
  Exchange out=template.send(endpoint,exchange);
  Collection<SearchResult> searchResults=defaultLdapModuleOutAssertions(out);
  Assert.assertEquals(1,searchResults.size());
  Assert.assertTrue(contains("uid=tcruise,ou=actors,ou=system",searchResults));
  Attributes theOneResultAtts=searchResults.iterator().next().getAttributes();
  Assert.assertEquals("tcruise",theOneResultAtts.get("uid").get());
  Assert.assertEquals("Tom Cruise",theOneResultAtts.get("cn").get());
  Assert.assertNull(theOneResultAtts.get("sn"));
}
