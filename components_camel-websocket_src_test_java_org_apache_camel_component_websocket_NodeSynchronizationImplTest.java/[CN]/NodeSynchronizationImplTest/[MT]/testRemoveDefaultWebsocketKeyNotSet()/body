{
  sync=new DefaultNodeSynchronization(store1);
  sync.addSocket(websocket1);
  assertEquals(websocket1,store1.get(KEY_1));
  websocket1.setConnectionKey(null);
  try {
    sync.removeSocket(websocket1);
    fail("Exception expected");
  }
 catch (  Exception e) {
    assertEquals(NullPointerException.class,e.getClass());
  }
}
