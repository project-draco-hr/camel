{
  assertNotNull("Should have injected a producer template",template);
  ProducerTemplate lookup=context.getRegistry().lookup("template",ProducerTemplate.class);
  assertNotNull("Should lookup producer template",lookup);
  assertEquals(50,template.getMaximumCacheSize());
  assertEquals("Size should be 0",0,template.getCurrentCacheSize());
  for (int i=0; i < 53; i++) {
    Endpoint e=context.getEndpoint("direct:queue:" + i);
    template.sendBody(e,"Hello");
  }
  assertEquals("Size should be 50",50,template.getCurrentCacheSize());
  template.stop();
  assertEquals("Size should be 0",0,template.getCurrentCacheSize());
}
