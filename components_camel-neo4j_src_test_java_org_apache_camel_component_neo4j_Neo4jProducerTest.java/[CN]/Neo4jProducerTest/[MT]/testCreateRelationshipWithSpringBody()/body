{
  when(msg.getHeader(Neo4jEndpoint.HEADER_OPERATION)).thenReturn(Neo4jOperation.CREATE_RELATIONSHIP);
  Object start=new Object();
  Object end=new Object();
  Class<Relationship> entityClass=Relationship.class;
  String type="friendswith";
  SpringDataRelationship<Relationship> spring=new SpringDataRelationship<Relationship>(start,end,entityClass,type,true);
  when(msg.getBody()).thenReturn(spring);
  Relationship r=mock(Relationship.class);
  when(r.getId()).thenReturn(55L);
  when(template.createRelationshipBetween(start,end,entityClass,type,true)).thenReturn(r);
  producer.process(exchange);
  verify(template).createRelationshipBetween(start,end,entityClass,type,true);
  verify(msg).setHeader(Neo4jEndpoint.HEADER_RELATIONSHIP_ID,55L);
}
