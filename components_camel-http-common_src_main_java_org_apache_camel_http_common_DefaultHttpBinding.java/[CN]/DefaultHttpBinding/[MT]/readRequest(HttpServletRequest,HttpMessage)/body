{
  LOG.trace("readRequest {}",request);
  if (mapHttpMessageBody) {
    readBody(request,message);
  }
  if (mapHttpMessageHeaders) {
    readHeaders(request,message);
  }
  Map<String,Object> headers=message.getHeaders();
  String rawPath=getRawPath(request);
  headers.put(Exchange.HTTP_METHOD,request.getMethod());
  headers.put(Exchange.HTTP_QUERY,request.getQueryString());
  headers.put(Exchange.HTTP_URL,request.getRequestURL().toString());
  headers.put(Exchange.HTTP_URI,request.getRequestURI());
  headers.put(Exchange.HTTP_PATH,rawPath);
  if (!headers.containsKey(Exchange.CONTENT_TYPE)) {
    headers.put(Exchange.CONTENT_TYPE,request.getContentType());
  }
  if (LOG.isTraceEnabled()) {
    LOG.trace("HTTP method {}",request.getMethod());
    LOG.trace("HTTP query {}",request.getQueryString());
    LOG.trace("HTTP url {}",request.getRequestURL());
    LOG.trace("HTTP uri {}",request.getRequestURI());
    LOG.trace("HTTP path {}",rawPath);
    LOG.trace("HTTP content-type {}",headers.get(Exchange.CONTENT_TYPE));
  }
}
