{
  if (checkCompat(bundle,DataFormat.class)) {
    Map<String,String> dataformats=new HashMap<String,String>();
    for (Enumeration e=bundle.getEntryPaths(META_INF_DATAFORMAT); e != null && e.hasMoreElements(); ) {
      String path=(String)e.nextElement();
      if (LOG.isDebugEnabled()) {
        LOG.debug("Found entry: " + path + " in bundle "+ bundle.getSymbolicName());
      }
      String name=path.substring(path.lastIndexOf("/") + 1);
      dataformats.put(name,path);
    }
    if (!dataformats.isEmpty()) {
      resolvers.add(new BundleDataFormatResolver(bundle,dataformats));
    }
  }
}
