{
  return new RouteBuilder(){
    @Override public void configure() throws Exception {
      ThreadPoolProfile profile=new ThreadPoolProfileSupport("custom");
      profile.setPoolSize(5);
      profile.setMaxPoolSize(15);
      profile.setKeepAliveTime(25L);
      profile.setMaxQueueSize(250);
      profile.setRejectedPolicy(ThreadPoolRejectedPolicy.Abort);
      context.getExecutorServiceStrategy().registerThreadPoolProfile(profile);
      from("direct:start").threads().executorServiceRef("custom").to("mock:result");
      from("direct:foo").threads().executorServiceRef("custom").to("mock:foo");
    }
  }
;
}
