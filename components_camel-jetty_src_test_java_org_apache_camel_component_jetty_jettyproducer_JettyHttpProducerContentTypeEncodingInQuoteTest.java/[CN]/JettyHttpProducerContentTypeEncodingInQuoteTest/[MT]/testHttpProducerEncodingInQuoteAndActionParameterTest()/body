{
  if (isPlatform("windows")) {
    return;
  }
  Thread.sleep(1000);
  MockEndpoint mock=getMockEndpoint("mock:result");
  mock.expectedMinimumMessageCount(1);
  Exchange out=template.send("jetty:http://localhost:{{port}}/myapp/myservice",new Processor(){
    public void process(    Exchange exchange) throws Exception {
      exchange.getIn().setBody("Hello World");
      exchange.getIn().setHeader("Content-Type","text/plain;charset=\"utf-8\";action=\"http://somewhere.com/foo\"");
    }
  }
);
  assertMockEndpointsSatisfied();
  assertEquals("OK",out.getOut().getBody(String.class));
  assertEquals("text/plain;charset=utf-8;action=\"http://somewhere.com/foo\"",out.getOut().getHeader("Content-Type"));
}
