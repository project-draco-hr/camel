{
  uri=uri.startsWith("servlet:") ? remaining : uri;
  HttpParams clientParams=configureHttpParams(parameters);
  configureParameters(parameters);
  URI httpUri=URISupport.createRemainingURI(new URI(UnsafeUriCharactersEncoder.encode(uri)),CastUtils.cast(parameters));
  uri=httpUri.toString();
  ServletEndpoint result=createServletEndpoint(uri,this,httpUri,clientParams,getClientConnectionManager(),httpClientConfigurer);
  if (httpBinding != null) {
    result.setBinding(httpBinding);
  }
  setEndpointHeaderFilterStrategy(result);
  setProperties(result,parameters);
  return result;
}
