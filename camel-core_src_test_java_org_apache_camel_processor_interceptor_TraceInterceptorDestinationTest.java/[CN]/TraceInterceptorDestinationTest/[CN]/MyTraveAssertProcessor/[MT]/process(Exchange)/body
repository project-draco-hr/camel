{
  String nodeId=exchange.getProperty("CamelTraceEventNodeId",String.class);
  Date timestamp=exchange.getProperty("CamelTraceEventTimestamp",Date.class);
  assertNotNull(nodeId);
  assertNotNull(timestamp);
  TraceEventMessage msg=exchange.getIn().getBody(DefaultTraceEventMessage.class);
  tracedBodies.add(msg.getBody());
  if (msg.getHeaders() != null) {
    tracedHeaders.add(msg.getHeaders());
  }
}
