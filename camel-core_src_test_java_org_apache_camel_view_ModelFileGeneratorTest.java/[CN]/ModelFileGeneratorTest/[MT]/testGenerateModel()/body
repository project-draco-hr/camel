{
  deleteDirectory(outputDirectory);
  ModelFileGenerator generator=new ModelFileGenerator(JAXBContext.newInstance("org.apache.camel.model"));
  generator.marshalRoutesUsingJaxb(outputDirectory + "/route.xml",context.getRouteDefinitions());
  File out=new File(outputDirectory + "/route.xml").getAbsoluteFile();
  assertTrue("File should have been generated",out.exists());
  String content=context.getTypeConverter().convertTo(String.class,out);
  assertTrue("Should contain a route",content.contains("<route"));
  assertTrue("Should contain a route",content.contains("</route>"));
  assertTrue("Should contain a route",content.contains("direct:start"));
  assertTrue("Should contain a route",content.contains("mock:result"));
}
