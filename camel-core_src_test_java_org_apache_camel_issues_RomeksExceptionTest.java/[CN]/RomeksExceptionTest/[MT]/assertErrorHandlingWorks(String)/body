{
  MockEndpoint resultEndpoint=getMockEndpoint("mock:result");
  MockEndpoint exceptionEndpoint=getMockEndpoint("mock:exception");
  resultEndpoint.expectedMessageCount(0);
  exceptionEndpoint.expectedBodiesReceived("<exception/>");
  try {
    template.sendBodyAndHeader("direct:start","<body/>","route",route);
    fail("Should have thrown exception");
  }
 catch (  RuntimeCamelException e) {
    assertTrue(e.getCause() instanceof IllegalArgumentException);
    assertEquals("Exception thrown intentionally.",e.getCause().getMessage());
  }
  assertMockEndpointsSatisfied();
  List<Exchange> list=exceptionEndpoint.getReceivedExchanges();
  Exchange exchange=list.get(0);
  LOG.debug("Received: " + exchange.getIn());
}
