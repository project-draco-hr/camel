{
  if (isLockFile()) {
    if (log.isDebugEnabled()) {
      log.debug("Locking file: " + file);
    }
    FileChannel channel=new RandomAccessFile(file,"rw").getChannel();
    FileLock lock=channel.lock();
    if (lock != null) {
      exchange.setProperty("org.apache.camel.fileChannel",channel);
      exchange.setProperty("org.apache.camel.file.lock",lock);
      return true;
    }
    return false;
  }
  return true;
}
