{
  ObjectHelper.notNull(token,"token");
  if (isXml()) {
    return ExpressionBuilder.tokenizeXMLExpression(token,inheritNamespaceTagName);
  }
 else   if (endToken != null) {
    return ExpressionBuilder.tokenizePairExpression(token,endToken,includeTokens);
  }
  Expression answer;
  Expression exp=headerName == null ? ExpressionBuilder.bodyExpression() : ExpressionBuilder.headerExpression(headerName);
  if (regex) {
    answer=ExpressionBuilder.regexTokenizeExpression(exp,token);
  }
 else {
    answer=ExpressionBuilder.tokenizeExpression(exp,token);
  }
  if (group > 0) {
    answer=ExpressionBuilder.groupIteratorExpression(answer,token,group);
  }
  return answer;
}
