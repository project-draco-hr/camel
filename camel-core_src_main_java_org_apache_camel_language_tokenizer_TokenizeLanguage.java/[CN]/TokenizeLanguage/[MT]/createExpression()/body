{
  ObjectHelper.notNull(token,"token");
  if (isXml()) {
    return ExpressionBuilder.tokenizeXMLExpression(token,inheritNamespaceTagName);
  }
 else   if (endToken != null) {
    return ExpressionBuilder.tokenizePairExpression(token,endToken);
  }
  Expression exp=headerName == null ? ExpressionBuilder.bodyExpression() : ExpressionBuilder.headerExpression(headerName);
  if (regex) {
    return ExpressionBuilder.regexTokenizeExpression(exp,token);
  }
 else {
    return ExpressionBuilder.tokenizeExpression(exp,token);
  }
}
