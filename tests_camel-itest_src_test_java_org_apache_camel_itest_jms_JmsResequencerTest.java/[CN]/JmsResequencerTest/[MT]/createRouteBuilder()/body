{
  return new RouteBuilder(){
    public void configure(){
      from("activemq:queue:batch").to(callExecuteOnBean("myBean1")).resequence(header("seqnum")).batch(new BatchResequencerConfig(100,2000L)).to(callExecuteOnBean("myBean2")).to("activemq:queue:stop");
      from("activemq:queue:stream").to(callExecuteOnBean("myBean1")).resequence(header("seqnum")).stream().to(callExecuteOnBean("myBean2")).to("activemq:queue:stop");
      from("activemq:queue:stop").to(callExecuteOnBean("myBean3")).to("mock:result");
    }
  }
;
}
