{
  BeanManager beanManager=getBeanManager();
  Set<Bean<?>> beans=beanManager.getBeans(name);
  if (beans == null || beans.isEmpty()) {
    if (optional) {
      return null;
    }
    throw new IllegalStateException("Could not find beans for Type=" + type + " and name:"+ name);
  }
  return getContextualReference(type,beanManager,beans);
}
