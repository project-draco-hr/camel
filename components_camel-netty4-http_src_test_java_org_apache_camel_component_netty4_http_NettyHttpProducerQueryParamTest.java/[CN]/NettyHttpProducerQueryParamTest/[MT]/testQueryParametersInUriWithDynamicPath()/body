{
  Exchange exchange=template.request((url + "&quote=Camel%20rocks").replace("/cheese",""),new Processor(){
    public void process(    Exchange exchange) throws Exception {
      exchange.getIn().setHeader(Exchange.HTTP_PATH,"/cheese");
    }
  }
);
  assertNotNull(exchange);
  String body=exchange.getOut().getBody(String.class);
  Map<?,?> headers=exchange.getOut().getHeaders();
  assertEquals("Bye World",body);
  assertEquals("Carlsberg",headers.get("beer"));
}
