{
  Exchange copy=new DefaultExchange(exchange);
  if (preserveExchangeId) {
    copy.setExchangeId(exchange.getExchangeId());
  }
  copy.getProperties().putAll(exchange.getProperties());
  copy.setIn(exchange.getIn().copy());
  if (exchange.hasOut()) {
    copy.setOut(exchange.getOut().copy());
  }
  return copy;
}
