{
  if (result == null) {
    return null;
  }
  if (type.isAssignableFrom(result.getClass())) {
    return type.cast(result);
  }
  if (result instanceof Exchange) {
    Exchange exchange=(Exchange)result;
    Object answer=ExchangeHelper.extractResultBody(exchange,exchange.getPattern());
    return context.getTypeConverter().convertTo(type,exchange,answer);
  }
  return context.getTypeConverter().convertTo(type,result);
}
