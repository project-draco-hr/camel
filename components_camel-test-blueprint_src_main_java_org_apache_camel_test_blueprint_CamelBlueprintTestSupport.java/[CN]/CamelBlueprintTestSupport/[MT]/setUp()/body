{
  String symbolicName=getClass().getSimpleName();
  this.bundleContext=CamelBlueprintHelper.createBundleContext(symbolicName,getBlueprintDescriptor(),getBundleFilter(),getBundleVersion(),true);
  Properties extra=useOverridePropertiesWithPropertiesComponent();
  if (extra != null) {
    bundleContext.registerService(PropertiesComponent.OVERRIDE_PROPERTIES,extra,null);
  }
  super.setUp();
  log.debug("Waiting for BlueprintContainer to be published with symbolicName: {}",symbolicName);
  getOsgiService(BlueprintContainer.class,"(osgi.blueprint.container.symbolicname=" + symbolicName + ")");
}
