{
  if (stream.markSupported()) {
    return new MarkableInputStreamCache(stream);
  }
 else {
    CachedOutputStream cos=new CachedOutputStream(exchange);
    IOHelper.copyAndCloseInput(stream,cos);
    return cos.getStreamCache();
  }
}
