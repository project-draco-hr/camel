{
  deleteDirectory("target/inprogress");
  deleteDirectory("target/done");
  deleteDirectory("target/reports");
  MockEndpoint mock=getMockEndpoint("mock:report");
  mock.expectedMessageCount(1);
  mock.expectedBodiesReceived("Hello Paris");
  template.sendBodyAndHeader("file:target/reports","Hello Paris",FileComponent.HEADER_FILE_NAME,"paris.txt");
  mock.assertIsSatisfied();
  Thread.sleep(100);
  String content=IOConverter.toString(new File("./target/done/paris.txt"));
  assertEquals("The file should have been renamed","Hello Paris",content);
}
